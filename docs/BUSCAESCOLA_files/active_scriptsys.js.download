//// Projeto : RANULFO ALVES PEREIRA - Active Company
//var DEBUG = true;
var DEBUG = false;
var _tmpbase = {};
/////////// FUNÇÕES ÚTEIS ///////////
var debug = {
	on: true,
	console( text, type = "log" ) {},

	returnedAJAX( r ) {
		if( debug.on ) {
			var ii = 0;
			var types = [ "<b>Notice</b>:", "<b>Warning</b>:", "<b>Parse error</b>:", "<b>Fatal error</b>:" ];

			types.forEach( function( v, i ) {
				while( r.indexOf( v ) != -1 ) {
					r = r.replace( /on line <b>(\d+)<\/b>/, "on line $1]]]]]}" );
					var s = r.indexOf( v );
					var e = r.indexOf( "]]]]]}" ) + 6;
					var msg = r.substring( s, e );
					r = r.replace( msg, "" );

					while( msg.indexOf( "<b>" ) != -1 || msg.indexOf( "</b>" ) != -1 ) {
						msg = msg.replace( "<b>", "" );
						msg = msg.replace( "</b>", "" );
						msg = msg.replace( "]]]]]}", "" );
					}

					console.error( "(PHP)", msg );
					ii++;
				}
			} );
		}
	}
};
var hist = {
		_index: 0,
		_hist: [],
		add( ajx ) {
				hist._hist.push( ajx );
				hist._index = hist._hist.length - 1;
		},
		last() {
				if( hist._hist[ hist._index ] != undefined ) {
						return hist._hist[ hist._index ];
				} else {
						return undefined;
				}
		},
		prev( steps = 1 ) {
				if( hist._hist[ hist._index - steps ] != undefined ) {
						hist._index = hist._index - steps;
						return hist._hist[ hist._index ];
				} else {
						return undefined;
				}
		},
		prox( steps = 1 ) {
				if( hist._hist[ hist._index + steps ] != undefined ) {
						hist._index = hist._index + steps;
						return hist._hist[ hist._index ];
				} else {
						return undefined;
				}
		}
};

Number.prototype.toCurrencyBRL = function( cifrao = false ) {
		var r = this;
		r = new Intl.NumberFormat( "pt-BR", { style: "currency", currency: "BRL" } ).format( r );
		return ( cifrao ) ? r : r.replace( "R$", "" ).trim();
};

Array.prototype.sum = function() {
		var it = this, _sum = 0, err = false;
		it.forEach( function( v ) {
				if( typeof v === "number" ) {
						_sum = _sum + v;
				} else {
						err = true;
				}
		} );
		return ( err ) ? false : _sum;
};

String.prototype.replaceall = function( token, newtoken ) {
		var string = this;
		while( string.toString().indexOf( token ) != -1 ) {
				string = string.toString().replace( token, newtoken );
		}
		return string;
};

String.prototype.formatJQID = function() {
		var string = this;
		return ( string.trim() != "" ) ? "#" + string.replace( /\#/g, "" ) : "";
};

String.prototype.strToFloat = function() { // A MESMA FUNÇÃO DE CIMA, MAS COM NOME ATUALIZADO... VERIFICAR ONDE A DE CIMA ESTÁ SENDO USADA E ELIMINÁ-LA
		var string = this;
		return parseFloat( string.replace( /\./g, "" ).replace( ",", "." ) );
};

String.prototype.conc = function() {
		var args = [].slice.call( arguments, 0 );
		var texto = this;
		//texto = texto.replaceall( "|%", "{{pct}}" );
		for( i = 0; i < args.length; i++ ) {
				texto = texto.replace( "{%s}", args[ i ] );
		}
		//return texto.replaceall( "{{pct}}", "%" );
		return texto;
};

function nav_grade() {
		$( "div.nav-grade nav a" ).on( "click", function() {
				var nav = $( this ).parent().parent();
				var to = $( this ).attr( "data-to" );
				var data = "";
				if( to.indexOf( "?" ) != "-1" ) {
						to = to.split( "?" );
						data = to[ 1 ];
						to = to[ 0 ];
				}
				carregando.exibe();
				$.get( to, data, function( r ) {
						carregando.esconde();
						window.setTimeout( function() {
								$( nav ).animate( { "margin-left": "-100%", "margin-right": "100%", "opacity": 0 }, 250, function() {
										$( nav ).hide();
										$( "div.nav-grade div.painel" ).css( { "display": "block", "margin-left": "100%", "margin-right": "-100%", "opacity": 0 } );
										$( "#conteudo" ).html( r );
										$( "div.nav-grade div.painel" ).animate( { "margin-left": 0, "margin-right": 0, "opacity": 1 }, 250 );
										var func = to.split( "/" );
										func = func[ func.length - 1 ].replace( ".php", "" ) + "_load";
										if( eval( "window." + func ) ) {
												eval( func + "( { url:'" + to + ( ( data != "" ) ? "?" + data : "" ) + "', tipo:'GET', alvo:'', origem: '', resultado: r } )" );
										}
								} );
						}, 1500 );
				} );
				return false;
		} );
		$( "div.nav-grade div.painel button" ).on( "click", function() {
				$( this ).parent().hide();
				$( "div.nav-grade nav" ).css( { "display": "flex" } );
				$( "div.nav-grade nav" ).animate( { "margin-left": "50px", "margin-right": 0, "opacity": 1 }, 500, function() {} );
		} );
}

$( document ).ready( function() {
		horas();
		login_esconde_label();
		nav_grade();
} );

function debuglog( msg ) {
		if( document.URL.indexOf( "localhost" ) != -1 ) {
				console.log( msg );
		}
}

var msg = {
	_msg: [],
	USU: [ "Outras informações, utilize os links de seu perfil!", "info" ],
	INC: [ "Registro incluido com sucesso!", "success" ],
	ALT: [ "Registro alterado com sucesso!", "success" ],
	EXC: [ "Registro excluido com sucesso!", "success" ],
	ATI: [ "Registro (Des)Ativado com sucesso!", "success" ],
	DEV: [ "Cheque devolvido com sucesso!", "success" ],
	RTS: [ "Registro transferido com sucesso!", "success" ],
	TRO: [ "Prorrogação de vencimento efetuada com sucesso!", "success" ],
	TRA: [ "Transferencia de registro efetuada com sucesso!", "success" ],
	DOC: [ "Troca de documentos efetuada USU sucesso!", "success" ],
	BOL: [ "Boletos impresso com sucesso!", "success" ],
	ARQ: [ "Arquivo de remessa gerado com sucesso!", "success" ],
	ARR: [ "Arquivo de retorno capturado com sucesso!", "success" ],
	ENV: [ "E-mail enviado com sucesso!", "success" ],
	CON: [ "Registro conciliado com sucesso!", "success" ],
	SP1: [ "Selecione pelo menos um registro!", "warning" ],
	SA1: [ "Selecione apenas um registro!", "warning" ],
	AMO: [ "Amortização realizada com sucesso!", "success" ],
	RAT: [ "Rateio Carregado com sucesso!", "success" ],
	RATF: [ "Rateio por Fração processado com sucesso!", "success" ],
	RATDG: [ "Rateio de Despesas Geral processado com sucesso!", "success" ],
	RATDF: [ "Rateio de Despesas por Fração processado com sucesso!", "success" ],
	RATDI: [ "Rateio de Despesas Individual processado com sucesso!", "success" ],
	RATDB: [ "Rateio de Despesas por Bloco processado com sucesso!", "success" ],
	RATDP: [ "Rateio de Despesas por Pessoa processado com sucesso!", "success" ],
	RATDE: [ "Conta de Despesas excluída com sucesso!", "success" ],
	ENVEMA: [ "E-mail Enviados com sucesso!", "success" ],
	ENVSMS: [ "SMS Enviados com sucesso!", "success" ],
	ENVWHA: [ "Whats Enviados com sucesso!", "success" ],
	REGREC: [ "Recebimento efetuado com sucesso!", "success" ],
	REGPAG: [ "Pagamento efetuado com sucesso!", "success" ],
	REGTRA: [ "Transferência efetuada com sucesso!", "success" ],
	REGFEC: [ "Fechamento do caixa efetuado com sucesso!", "success" ],
	DTAEXE: [ "Data já existente!", "warning" ],
	BXC: [ "Lançamento já conciliado não exclui ou altera!", "warning" ],

	ad( arr ) {
		msg._msg = arr;
	},

	ex( arr ) {
		var titulo = {
			"success": "Sucesso!",
			"info": "Informação",
			"warning": "Aviso!",
			"error": "Erro!"
		};
		if( arr != undefined ) {
			swal( titulo[ arr[ 1 ] ], arr[ 0 ], arr[ 1 ] );
		}
		else if( msg._msg.length > 0 ) {
			swal( titulo[ msg._msg[ 1 ] ], msg._msg[ 0 ], msg._msg[ 1 ] );
			msg._msg = [];
		}
	}
};

function verificaEnviaCheckBox( idform, func, max = 0 ) {
		idform = idform.formatJQID();
		if( qtd_marcados( idform + " input.func" ) > 0 ) {
				if( max == 0 || qtd_marcados( idform + " input.func" ) <= max ) {
						func();
						return true;
				} else {
						msg.ex( msg.SA1 );
						return false;
				}
		} else {
				msg.ex( msg.SP1 );
				return false;
		}
}

function verificaEnviaCheckBoxUni( idform, func ) {
		idform = idform.formatJQID();
		if( qtd_marcados( idform + " input.func" ) == 0 ) {
				msg.ex( msg.SP1 );
		} else if( qtd_marcados( "func" ) > 1 ) {
				msg.ex( msg.SA1 );
		} else {
				func();
		}
		return false;
}

//para envio de um ou mais checkbox
function enviaCheckBoxParaModal( idform ) {
		idform = idform.formatJQID();
		if( qtd_marcados( idform + " input.func" ) > 0 ) {
				$( ".verifica-modal" ).attr( "data-toggle", "modal" );
				fajax( idform, "../include/busca_base.php", "" );
		} else{
				$( ".verifica-modal" ).attr( "data-toggle", "" );
				msg.ex( msg.SP1 );
		}
		return false;
}

//para envio de um unico checkbox
function enviaCheckBoxParaModalUni( idform ) {
		idform = idform.formatJQID();
		if( qtd_marcados( idform + " input.func" ) == 1 ) {
				$( ".verifica-modal" ).attr( "data-toggle", "modal" );
				fajax( idform, "../include/busca_base.php", "" );
		} else if( qtd_marcados( idform + " input.func" ) == 0 ) {
				$( ".verifica-modal" ).attr( "data-toggle", "" );
				msg.ex( msg.SP1 );
		} else if( qtd_marcados( idform + " input.func" ) > 1 ) {
				$( ".verifica-modal" ).attr( "data-toggle", "" );
				msg.ex( msg.SA1 );
		}
		return false;
}

function alertaPorFuncao( idform ) { //alert( idform );alert( $( "#"+idform ).html() );alert( $( "#"+idform+" input[name=funcao]" ).val() );
		$( "#" + idform + " button.btn-success" );
		var fn = $( "#" + idform + " input[name=funcao]" ).val();
		if( fn == "inc" ) {
				swal( "Sucesso", msgs[ "reg_inc" ], "success" );
		} else if( fn == "alt" ) {
				swal( "Sucesso", msgs[ "reg_alt" ], "success" );
		} else if( fn == "exc" ) {
				swal( "Aviso!", msgs[ "reg_exc" ], "warning" );
		}
}

/////////// FUNÇÕES ÚTEIS ///////////
var ajax_url_replaces = [];
var ajax_hist = { "to": "", "data": "", "method": "", "append": "" };

function ajax(url, tipo, alvo, origem, exbcarreg = true) {
	var dados = ( url.indexOf( "?" ) != -1 ) ? url.split( "?" )[ 1 ] : "";
	var func = url.split( "?" )[ 0 ];
	func = func.split( "/" );
	func = func[ func.length-1 ];
	func = func.replaceall( "-", "_" );
	func = func.split( "." )[ 0 ];
	func = func.toLowerCase();
	url = url.split( "?" )[ 0 ];
	alvo = alvo.formatJQID();

	if( origem == undefined ) {
		if( window.event == undefined ) {
			origem = null;
		} else {
			origem = window.event.srcElement;
		}
	}

	if( exbcarreg ) {
			carregando.exibe();
	}

	// FAZ UM POSS?VEL REPLACE NA URL
	if( ajax_url_replaces.length > 0 ) {
		for( var i=0; i < ajax_url_replaces.length; i++ ) {
			url = url.replaceall( ajax_url_replaces[ i ][ 0 ], ajax_url_replaces[ i ][ 1 ] );
			dados = dados.replaceall( ajax_url_replaces[ i ][ 0 ], ajax_url_replaces[ i ][ 1 ] );
		}

		ajax_url_replaces = [];
	}

	ajax_hist[ "to" ] = url;
	ajax_hist[ "data" ] = dados;
	ajax_hist[ "method" ] = tipo;
	ajax_hist[ "append" ] = alvo;
	debuglog( tipo.toUpperCase() + ": \"" + url + "?" + dados + "\"" );

	if( window.location.hash === "#esp30es30" ) {
		console.log( "Ajax Request", {
			url: url,
			data: dados,
			method: tipo,
			elementTarget: alvo
		} );
	}

	$.ajax( {
		url: url + "?" + ( ( tipo == "get" && dados != "" ) ? dados : "" ),
		type: tipo,
		data: ( tipo == "post" ) ? dados : "",

		success( response ) {
			debug.returnedAJAX( response );
			// if( alvo.length>0 && alvo.indexOf( "#" )==-1 && alvo.indexOf( "." )==-1 ){ alvo = "#"+alvo; }

			if( alvo == "" ) {
				if( eval( "window." + func + "_load" ) ) {
					eval( func + "_load( { url:'" + url + "', tipo:'" + tipo + "', alvo:'', origem:origem, resultado: response } )" );
				}
			} else {
				$( $( alvo )[ 0 ] ).html( "<div id='ajax_efeito' style='opacity: 0;'>" + response + "</div>" );

				$( "#ajax_efeito" ).animate( { opacity: 1 }, 500, function() {
					if( eval( "window." + func + "_load" ) ) {
						var alvop = $( alvo )[ 0 ];
						eval( func + "_load( { url:'" + url + "', tipo:'" + tipo + "', alvo:alvop, origem:origem, resultado: response } )" );
					}

					$( this ).attr( "id", "ajax_efeito_" + Math.floor( Math.random() * 1000 ) );
				} );
			}

			if( exbcarreg ) {
				carregando.esconde();
			}

			// FUNCOES QUE CARREGAM AP?S O CARREGAMENTO DO AJAX
			init_gentelella_no_ajax();
		}
	} );

	return false;
}

function fajax( id, url, alvo ) {
	id = id.formatJQID();
	alvo = alvo.formatJQID();
	var query = "";
	var elementos = $( id )[ 0 ].elements;

	for( var i = 0; i < elementos.length; i++ ) {
		if( elementos[ i ].type == "radio" || elementos[ i ].type == "checkbox" ) {
			if( elementos[ i ].checked ){
				query += "&" + elementos[ i ].name + "=" + elementos[ i ].value.replaceall( "&", "[amp]" );
			}
		}
		else{
			query += "&" + elementos[ i ].name + "=" + elementos[ i ].value.replaceall( "&", "[amp]" );
		}
	}
	query = query.substring( 1, query.length );
	return ajax( url + "?" + query, "post", alvo, $( id )[ 0 ] );
}

function ajax_url_replace( de, para ){
		ajax_url_replaces[ ajax_url_replaces.length ] = [ de, para ];
}

var carregando = {
	_incremento: 5,
	_atraso: 0,
	_juntaCarregando: false,
	exibe(){
		if( !$( "#exibe_carregando" ).is( "div" ) ){
			$( "body" ).append( "<div id='exibe_carregando' style='position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: url(../imgs/pelicula-branca.png); z-index: 5000;'><div style='position: absolute; top: 50%; left: 50%; margin: 0 0 0 -150px; width: 300px;'><div class='progress mb-3'><div id='barraprogresso' class='progress-bar bg-danger progress-bar-striped progress-bar-animated' role='progressbar' style='width: 0%'' aria-valuenow='0' aria-valuemin='0' aria-valuemax='100'>0%</div></div></div></div>" );
			carregando.progresso( -1 );
		}
		else{
			carregando._juntaCarregando = true;
		}
	},
	esconde(){
		if( $( "#exibe_carregando" ).is( "div" ) ){
			// if( carregando._atraso!=0 ){ window.clearTimeout( carregando._atraso ); }
			// $( "#barraprogresso" ).css( "width", "100%" ).attr( "aria-valuenow", "100" ).html( "100%" );
			window.setTimeout( function(){
				if( !carregando._juntaCarregando ){
					if( carregando._atraso!=0 ){ window.clearTimeout( carregando._atraso ); }
					$( "#barraprogresso" ).animate( { "width": "100%" }, 100, function(){
						$( this ).attr( "aria-valuenow", "100" ).html( "100%" );
						$( "#exibe_carregando" ).animate( { opacity: 0 }, 500, function(){
							$( "#exibe_carregando" ).remove();
						} );
					} );
				}
				else{
					carregando._juntaCarregando = false;
				}
			}, 1000 );
		}
	},
	progresso( progresso ){
		if( progresso==-1 ){
			carregando._atraso = window.setTimeout( function(){
				var progressoatual = parseInt( $( "#barraprogresso" ).attr( "aria-valuenow" ), 10 );
				if( progressoatual<90 ){
					var adicao = ( progressoatual<70 )?Math.floor( Math.random() * carregando._incremento ) + 1:1;
					progressoatual += adicao;
					$( "#barraprogresso" ).css( "width", progressoatual+"%" ).attr( "aria-valuenow", progressoatual ).html( progressoatual+"%" );
					carregando.progresso( -1 );
				}
			}, 1500 );
		}
		else{
			$( "#barraprogresso" ).css( "width", progresso+"%" ).attr( "aria-valuenow", progresso ).html( progresso+"%" );
		}
	},
	min: {
		exibe( id ){ // ID DO ELEMENTO QUE SERÁ CARREGADO
			id = "#" + id.replace( "#", "" );
			var ppts = $( id ).ppt();
			if( !$( "#exibe_carregando_min" ).is( "div" ) ){
				var html =
				`<div id="exibe_carregando_min" style="position: absolute; top: ${ ppts[ 0 ] }px; left: ${ ppts[ 1 ] }px; width: ${ ppts[ 2 ] }px; height: ${ ppts[ 3 ] }px; background: #fff;">
					<div class="sk-chase">
						<div class="sk-chase-dot"></div>
						<div class="sk-chase-dot"></div>
						<div class="sk-chase-dot"></div>
						<div class="sk-chase-dot"></div>
						<div class="sk-chase-dot"></div>
						<div class="sk-chase-dot"></div>
					</div>
				</div>`;
				$( "body" ).append( html );
			}
		},
		esconde(){
			$( "#exibe_carregando_min" ).fadeOut( "slow", function(){
				$( this ).remove();
			} );
		}
	}
};

// *************************** FUNÇÔES DE APOIO OU CORREÇÂO PARA A INTERFACE GENTELELLA
function init_gentelella_no_ajax(){
		$('.collapse-link').on('click', function() {
		    var $BOX_PANEL = $(this).closest('.x_panel'),
				$ICON = $(this).find('i'),
				$BOX_CONTENT = $BOX_PANEL.find('.x_content');
		    // fix for some div with hardcoded fix class
		    if ($BOX_PANEL.attr('style')) {
					$BOX_CONTENT.slideToggle(200, function(){
			    		$BOX_PANEL.removeAttr('style');
					});
		    } else {
					$BOX_CONTENT.slideToggle(200);
					$BOX_PANEL.css('height', 'auto');
		    }
		    $ICON.toggleClass('fa-chevron-up fa-chevron-down');
		});
		$('.close-link').click(function () {
		    var $BOX_PANEL = $(this).closest('.x_panel');
		    $BOX_PANEL.remove();
		});
		// iCheck
		$(document).ready(function() {
		    if ($("input.flat")[0]) {
						$(document).ready(function () {
					    	$('input.flat').iCheck({
										checkboxClass: 'icheckbox_flat-green',
										radioClass: 'iradio_flat-green'
					    	});
						});
		    }
		});
		// /iCheck
		// Table
		$('table input').on('ifChecked', function () {
		    checkState = '';
		    $(this).parent().parent().parent().addClass('selected');
		    countChecked();
		});
		$('table input').on('ifUnchecked', function () {
		    checkState = '';
		    $(this).parent().parent().parent().removeClass('selected');
		    countChecked();
		});
		var checkState = '';
		$('.bulk_action input').on('ifChecked', function () {
		    checkState = '';
		    $(this).parent().parent().parent().addClass('selected');
		    countChecked();
		});
		$('.bulk_action input').on('ifUnchecked', function () {
		    checkState = '';
		    $(this).parent().parent().parent().removeClass('selected');
		    countChecked();
		});
		$('.bulk_action input#check-all').on('ifChecked', function () {
		    checkState = 'all';
		    countChecked();
		});
		$('.bulk_action input#check-all').on('ifUnchecked', function () {
		    checkState = 'none';
		    countChecked();
		});
		function countChecked() {
		    if (checkState === 'all') {
						$(".bulk_action input[name='table_records']").iCheck('check');
		    }
		    if (checkState === 'none') {
						$(".bulk_action input[name='table_records']").iCheck('uncheck');
		    }
		    var checkCount = $(".bulk_action input[name='table_records']:checked").length;
		    if (checkCount) {
						$('.column-title').hide();
						$('.bulk-actions').show();
						$('.action-cnt').html(checkCount + ' Registro Selecionado');
		    } else {
						$('.column-title').show();
						$('.bulk-actions').hide();
		    }
		}
		// /Table
		init_DataTables();
		init_chart_doughnut();
		init_flot_chart();
		init_daterangepicker();
}

function ajaxupload( config ){
		// BLOQUEIA O FUNCIOAMENTO NO INTERNET EXPLORER 6
		//if( $.browser.msie && $.browser.version<7 ){ exibe_alerta( "Navegador n?o suportado. Tente novamente com um navegador atual." );return; }
		// VERIFICA O PAR?METRO
		if( config.url==null ){ config.url = ""; }
		if( config.fileField==null ){ config.fileField = ""; }
		if( config.type==null ){ config.type = ""; }
		if( config.size==null ){ config.size = 0; }
		if( config.onComplete==null ){ config.onComplete = function(){}; }
		// CRIA O IFRAME
		$( "body" ).append( "<iframe id='iajax' name='iajax' name='iajax' width='0' height='0' style='position: absolute;top: 0; left: 0;'></iframe>" );
		// CRIA O FORM
		$( "body" ).append( "<form id='fajax' action='"+config.url+"' method='post' enctype='multipart/form-data' target='iajax' style='position: absolute;top: 0;left: 0;width: 0;height: 0;overflow: hidden;'></form>" );
		$( "#"+config.fileField ).clone( true ).insertAfter( "#"+config.fileField );
		$( "#"+config.fileField ).appendTo( "#fajax" );
		$( "#fajax" ).append( "<input type='text' name='type' value='"+config.type+"' />" );
		$( "#fajax" ).append( "<input type='text' name='size' value='"+config.size+"' />" );
		// ATRIBUI O ON-LOAD AO IFRAME
		//$( "#iajax" ).load( function(){
			$( "#iajax" ).on( "load", function(){
				var contentFrame = ( this.contentWindow )?this.contentWindow.document:this.contentDocument;
				config.onComplete( contentFrame.body.innerHTML );
				$( "#iajax, #fajax" ).remove();
		} );
		// ENVIA O FORMUL?RIO
		$( "#fajax" )[ 0 ].submit();
}

// EXTENDER O JQUERY COM O MÉTODO QUE RECUPERA PROPORÇÕES
( function( $ ){
		$.fn.ppt = function(){
				var posicao = function( el ){
						var top = 0;
						var left = 0;
						var width = el.offsetWidth;
						var height = el.offsetHeight;
						while( el ) {
								top += el.offsetTop;
								left += el.offsetLeft;
								el = el.offsetParent;
						}
						return [ top, left, width, height ];
				};
				var retorno = posicao( this[ 0 ] );
				return retorno;
		};
} )( jQuery );

// EXTENDER O JQUERY COM O MÉTODO SCROLLBAR
(function($){
		$.tiny = $.tiny || { };
		$.tiny.scrollbar = {
				options: {
						axis: 'y', // vertical or horizontal scrollbar? ( x || y ).
						wheel: 40,  //how many pixels must the mouswheel scroll at a time.
						scroll: true, //enable or disable the mousewheel;
						size: 'auto', //set the size of the scrollbar to auto or a fixed number.
						sizethumb: 'auto' //set the size of the thumb to auto or a fixed number.
				}
		};
		$.fn.tinyscrollbar = function(options) {
				var options = $.extend({}, $.tiny.scrollbar.options, options);
				this.each(function(){ $(this).data('tsb', new Scrollbar($(this), options)); });
				return this;
		};
		$.fn.tinyscrollbar_update = function(sScroll) { return $(this).data('tsb').update(sScroll); };
		function Scrollbar(root, options){
				var oSelf = this;
				var oWrapper = root;
				var oViewport = { obj: $('.viewport', root) };
				var oContent = { obj: $('.overview', root) };
				var oScrollbar = { obj: $('.scrollbar', root) };
				var oTrack = { obj: $('.track', oScrollbar.obj) };
				var oThumb = { obj: $('.thumb', oScrollbar.obj) };
				var sAxis = options.axis == 'x', sDirection = sAxis ? 'left' : 'top', sSize = sAxis ? 'Width' : 'Height';
				var iScroll, iPosition = { start: 0, now: 0 }, iMouse = {};
				function initialize() {
						oSelf.update();
						setEvents();
						return oSelf;
				}
				this.update = function(sScroll){
						oViewport[options.axis] = oViewport.obj[0]['offset'+ sSize];
						oContent[options.axis] = oContent.obj[0]['scroll'+ sSize];
						oContent.ratio = oViewport[options.axis] / oContent[options.axis];
						oScrollbar.obj.toggleClass('disable', oContent.ratio >= 1);
						oTrack[options.axis] = options.size == 'auto' ? oViewport[options.axis] : options.size;
						oThumb[options.axis] = Math.min(oTrack[options.axis], Math.max(0, ( options.sizethumb == 'auto' ? (oTrack[options.axis] * oContent.ratio) : options.sizethumb )));
						oScrollbar.ratio = options.sizethumb == 'auto' ? (oContent[options.axis] / oTrack[options.axis]) : (oContent[options.axis] - oViewport[options.axis]) / (oTrack[options.axis] - oThumb[options.axis]);
						iScroll = (sScroll == 'relative' && oContent.ratio <= 1) ? Math.min((oContent[options.axis] - oViewport[options.axis]), Math.max(0, iScroll)) : 0;
						iScroll = (sScroll == 'bottom' && oContent.ratio <= 1) ? (oContent[options.axis] - oViewport[options.axis]) : isNaN(parseInt(sScroll)) ? iScroll : parseInt(sScroll);
						setSize();
				};
				function setSize(){
						oThumb.obj.css(sDirection, iScroll / oScrollbar.ratio);
						oContent.obj.css(sDirection, -iScroll);
						iMouse['start'] = oThumb.obj.offset()[sDirection];
						var sCssSize = sSize.toLowerCase();
						oScrollbar.obj.css(sCssSize, oTrack[options.axis]);
						oTrack.obj.css(sCssSize, oTrack[options.axis]);
						oThumb.obj.css(sCssSize, oThumb[options.axis]);
				};
				function setEvents(){
						oThumb.obj.bind('mousedown', start);
						oThumb.obj[0].ontouchstart = function(oEvent){
								oEvent.preventDefault();
								oThumb.obj.unbind('mousedown');
								start(oEvent.touches[0]);
								return false;
						};
						oTrack.obj.bind('mouseup', drag);
						if(options.scroll && this.addEventListener){
								oWrapper[0].addEventListener('DOMMouseScroll', wheel, false);
								oWrapper[0].addEventListener('mousewheel', wheel, false );
						}
						else if(options.scroll){oWrapper[0].onmousewheel = wheel;}
				};
				function start(oEvent){
						iMouse.start = sAxis ? oEvent.pageX : oEvent.pageY;
						var oThumbDir = parseInt(oThumb.obj.css(sDirection));
						iPosition.start = oThumbDir == 'auto' ? 0 : oThumbDir;
						$(document).bind('mousemove', drag);
						document.ontouchmove = function(oEvent){
								$(document).unbind('mousemove');
								drag(oEvent.touches[0]);
						};
						$(document).bind('mouseup', end);
						oThumb.obj.bind('mouseup', end);
						oThumb.obj[0].ontouchend = document.ontouchend = function(oEvent){
								$(document).unbind('mouseup');
								oThumb.obj.unbind('mouseup');
								end(oEvent.touches[0]);
						};
						return false;
				};
				function wheel(oEvent){
						if(!(oContent.ratio >= 1)){
								oEvent = $.event.fix(oEvent || window.event);
								var iDelta = oEvent.wheelDelta ? oEvent.wheelDelta/120 : -oEvent.detail/3;
								iScroll -= iDelta * options.wheel;
								iScroll = Math.min((oContent[options.axis] - oViewport[options.axis]), Math.max(0, iScroll));
								oThumb.obj.css(sDirection, iScroll / oScrollbar.ratio);
								oContent.obj.css(sDirection, -iScroll);
								oEvent.preventDefault();
						};
				};
				function end(oEvent){
						$(document).unbind('mousemove', drag);
						$(document).unbind('mouseup', end);
						oThumb.obj.unbind('mouseup', end);
						document.ontouchmove = oThumb.obj[0].ontouchend = document.ontouchend = null;
						return false;
				};
				function drag(oEvent){
						if(!(oContent.ratio >= 1)){
								iPosition.now = Math.min((oTrack[options.axis] - oThumb[options.axis]), Math.max(0, (iPosition.start + ((sAxis ? oEvent.pageX : oEvent.pageY) - iMouse.start))));
								iScroll = iPosition.now * oScrollbar.ratio;
								oContent.obj.css(sDirection, -iScroll);
								oThumb.obj.css(sDirection, iPosition.now);
						}
						return false;
				};
				return initialize();
		};
})(jQuery);

function scrollbar( query, maxHeight ){
		if( $( query ).is( "div" ) ){
				var height = $( query ).ppt()[ 3 ];
				if( maxHeight<height ){
						var conteudo = $( query ).html();
						var html = "<div class=\"scrollbar\"><div class=\"track\"><div class=\"thumb\"><div class=\"end\"></div></div></div></div><div class=\"viewport\"><div class=\"overview\">"+conteudo+"</div></div>";
						$( query ).html( html );
						$( query+" div.viewport" ).css( { "height": maxHeight+"px", "overflow": "hidden", "position": "relative" } );
						$( query+" div.overview" ).css( { "position": "absolute", "left": 0, "top": 0, "width": "100%" } );
						$( query+" div.scrollbar" ).css( { "position": "relative", "float": "right", "width": "11px", "background": "#ddd" } );
						$( query+" div.thumb" ).css( { "margin-left": "1px", "background": "#999", "height": "20px", "width": "10px", "cursor": "pointer", "overflow": "hidden", "position": "absolute", "top": 0, "left": 0 } );
						$( query+" div.disable" ).css( { "display": "none" } );
						$( query ).tinyscrollbar();
				}
		}
}

function scrollWidth(){
		$( "body" ).append( "<div id=\"scrollWidthFora\" style=\"width: 100px;height: 50px;overflow: auto;\"><div id=\"scrollWidthDentro\" style=\"height: 100px;\"></div></div>" );
		var width = 100-$( "#scrollWidthDentro" ).ppt()[ 2 ];
		$( "#scrollWidthFora" ).remove();
		return width;
}

var chaveiro = {
		chaves: [],
		tranca: function( chave ){ chaveiro.chaves[ chave ] = true; },
		destranca: function( chave ){ chaveiro.chaves[ chave ] = false; },
		destrancado: function( chave ){
				if( chaveiro.chaves[ chave ]==undefined || chaveiro.chaves[ chave ]==false ){ return true; }
				else{ return false; }
		}
}

// *************************** FIM DAS FUNÇÕES DE APOIO
function levarvalor(origem,destino){
  	document.getElementById(destino).value=document.getElementById(origem).value;
}
function levarvalormulti(origem,destino,destinoo){
	  document.getElementById(destinoo).value=document.getElementById(destino).value;
	  document.getElementById(destino).value=document.getElementById(origem).value;
}

// mascara para campo telefone
function mascara_telefone(fone,campo){
	  var mytelefone = '';
	  mytelefone = mytelefone + fone;
	  if(mytelefone.length == 2){
				mytelefone = '('+mytelefone + ')';
				campo.value = mytelefone;
	  }
	  if(mytelefone.length == 8){
				mytelefone = mytelefone + '-';
				campo.value = mytelefone;
	  }
	  if(mytelefone.length == 14){
				numtel=mytelefone.replace("-","");
				nvnum1=numtel.substring(0,numtel.length-4);
				nvnum2=numtel.substring(9,numtel.length+4);
				nvnum1 = nvnum1 + '-';
				mytelefone = nvnum1 + nvnum2;
				campo.value = mytelefone;
	  }
}

function marcatodos( el, cls ){
		if( el.checked ){
				$( "input."+cls ).each( function( i, input ){
						input.checked = true;
				} );
		}
		else{
				$( "input."+cls ).each( function( i, input ){
						input.checked = false;
				} );
		}
}

function casas( numero, casas ){
		var zeros = "";
		numero = numero.toString();
		if( numero.length<casas ){
				var diferenca = casas-numero.length;
				for( var i=0;i<diferenca;i++ ){
						zeros += "0";
				}
		}
		return zeros+numero;
}

function qtd_marcados( sch ){
		var qtd = 0;
		$( sch ).each( function( i, input ){
				if( input.type=="checkbox" && input.checked==true ){
					qtd++;
				}
		} );
		return qtd;
}

function horas(){
		var now = new Date();
		var hours = now.getHours();
		var minutes = now.getMinutes();
		var seconds = now.getSeconds()
		if(hours <=9)
				hours="0"+hours;
		if(minutes<=9)
				minutes="0"+minutes;
		if(seconds<=9)
				seconds="0"+seconds;
		var cdate=hours+":"+minutes+":"+seconds;
		$( "div.hora" ).html( cdate );
		window.setTimeout( "horas()", 1000 );
}

function login_esconde_label(){
		$( "#usus_login, #usus_senha" ).keyup( function(){
				if( $.trim( $( this ).val() )!="" ){
						$( "label[for="+$( this ).attr( "id" )+"]" ).animate( { opacity: 0 }, 100 );
				} else{
						$( "label[for="+$( this ).attr( "id" )+"]" ).animate( { opacity: 1 }, 100 );
				}
		} );
}

// JANELA POPUP
function popup( title, html, width, func ){
		func = ( func==undefined )?function(){}:func;
		$( window ).bind( "keyup.popup_esc", function( e ){
				if( e.keyCode==27 ){
						fecha_popup();
				}
		} );
		$( "body" ).append( "<div id=\"boxDestaqueBg\"> </div>" );
		$( "body" ).append( "<div id=\"boxDestaque\"><div id=\"boxPopup\"><div id=\"boxTitle\">"+title+"</div><div id=\"boxHtml\"><div style=\"margin-right: -"+scrollWidth()+"px;max-height: 600px;overflow: auto;\">"+html+"</div></div></div></div>" );
		$( "html" ).css( { "margin-right": scrollWidth()+"px" } );
		$( "body" ).css( { "overflow": "hidden" } );
		$( "#boxPopup" ).css( {	"width": ( width+2 )+"px" } );
		scrollbar( "div.popup-scrollbar", 400 );
		$( "#boxDestaque" ).click( function( e ){
				if( $( e.target ).attr( "id" )=="boxDestaque" ){
						fecha_popup();
				}
		} );
		// ANIMA��O DE ABERTURA
		$( "#boxPopup" ).animate( { marginTop: "0px", opacity: 1 }, 400, function(){
				$( this ).css( "box-shadow", "6px 6px 80px #000" );
				func();
		} );
}

function fecha_popup( exec ){
		if( chaveiro.destrancado( "popup" ) ){
				$( "#boxPopup" ).css( "box-shadow", "none" );
				$( "#boxDestaqueBg" ).animate( { opacity: 0 }, "fast" );
				$( "#boxDestaque" ).animate( { opacity: 0 }, "fast", function(){
						$( "#boxDestaqueBg, #boxDestaque" ).remove();
						$( window ).unbind( "keyup.popup_esc" );
						if( $( "body" ).attr( "id" )!="inicio" ){ $( "html" ).css( { "margin-right": 0 } ); }
						$( "body" ).css( { "overflow": "visible" } );
						if( exec!=undefined ){
								exec();
						}
				} );
		}
}

function exibe_alerta( texto, tipo ){
		var delay = 50;
		tipo = ( tipo==undefined )?"aviso":tipo;
		if( !$( "#exibe_alerta" ).is( "div" ) ){
				$( "body" ).append( "<div id='base_alerta'><div id='exibe_alerta' class='"+tipo+"'>"+texto+"</div></div>" );
				$( "#exibe_alerta" ).animate( { marginTop: 0, opacity: 1 }, 100, function(){
						window.setTimeout( function(){
								$( "#exibe_alerta" ).animate( { marginTop: "-200px", opacity: 0 }, 100, function(){
										$( "#base_alerta" ).remove();
								} );
						}, delay*texto.length );
				} );
		}
}

function ver_cpf_cnpj( numcpf, campo ){
	 	//Filtragem da entrada do CPF - Filtra caracteres ""-"" ou ""/"" ou "".""\
	 	var wcgccalc, wsoma;
		cleancpf = "";
		tamcpf = numcpf.length;
		for(i = 0; i < tamcpf;i++){
				carac = numcpf.substring(i,i+1);
				if(carac != "1" && carac != "2" && carac != "3" && carac !="4" && carac != "5" && carac != "6" && carac != "7" && carac != "8" && carac!= "9" && carac != "0"){
						carac = "";
				}
				cleancpf = cleancpf + carac;
		}
		numcpf = cleancpf;
		if(numcpf.length == 11){
				x=0; soma=0; dig1=0; dig2=0; texto=""; numcpf1="";
				len = numcpf.length; x = len -1;
				for(var i=0; i <= len - 3; i++){
						y = numcpf.substring(i,i+1); soma = soma + ( y * x);
						x = x - 1; texto = texto + y;
				}
				dig1 = 11 - (soma % 11);
				if(dig1 == 10) dig1=0 ;
				if(dig1 == 11) dig1=0 ;
				numcpf1 = numcpf.substring(0,len - 2) + dig1 ;
				x = 11; soma=0;
				for(var i=0; i <= len - 2; i++){
						soma = soma + (numcpf1.substring(i,i+1) * x);
						x = x - 1;
				}
				dig2= 11 - (soma % 11);
				if(dig2 == 10) dig2=0;
				if(dig2 == 11) dig2=0;
				if((dig1 + "" + dig2) == numcpf.substring(len,len-2)){
						return true;
				} else {
						swal( "Aviso!", "O CNPJ/CPF que digitou está incorreto" , "warning" );
						campo.value="";
						return false;
				}
		} else {
				if(numcpf.length == 14){
						wcgccalc= (numcpf.substring(0,12));
						wsoma=0;
						for(var i=0; i<=3; i++){
								wnum=parseInt(wcgccalc.substring(i,i+1));
								wsoma= wsoma + wnum * (5-i);
						}
						for(var x=0; x<=7; x++){
								wnum=parseInt(wcgccalc.substring(x+4,x+5));
								wsoma=wsoma + wnum * (9-x);
						}
						wcgcdigit= 11-(wsoma%11);
						if((wcgcdigit == 10) || (wcgcdigit == 11)){
								wcgccalc= wcgccalc + '0';
						} else {
								wcgccalc= wcgccalc + wcgcdigit;
						}
						wsoma=0;
						for(var y=0; y<=4; y++){
								wnum=parseInt(wcgccalc.substring(y,y+1));
								wsoma= wsoma + wnum * (6-y);
						}
						for(var z=0; z<=7; z++){
								wnum=parseInt(wcgccalc.substring(z+5,z+6));
								wsoma=wsoma + wnum *(9-z);
						}
						wcgcdigit= 11 - (wsoma%11);
						if((wcgcdigit == 10)||(wcgcdigit == 11)){
								wcgccalc= wcgccalc + '0';
						} else {
								wcgccalc= wcgccalc + wcgcdigit;
						}
						if(numcpf==wcgccalc){
								return true;
						} else {
								swal( "Aviso!", "O CNPJ/CPF que digitou está incorreto" , "warning" );
								campo.value="";
								return false;
						}
				} else {
						swal( "Aviso!",  "O CNPJ/CPF que digitou está incorreto" , "warning" );
						campo.value="";
						return false;
				}
		}
}

function busca_cpf( silencioso=true ){ // OKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKK
		var funcao = $( "#funcao" ).val();
		var csit = ($( "#csitua" ).val().substring(0,1));
		var cli_codigo_c = $( "#cli_codigo_c" ).val();
		var cli_codigo_a = $( "#cli_codigo_a" ).val();
		var cli_codigo_p = $( "#cli_codigo_p" ).val();
		var cli_cpfcnpj = $( "#cli_cpfcnpjc" ).val();
		var cli_cpfcnpj=cli_cpfcnpj.replace("-","");
		var cli_cpfcnpj=cli_cpfcnpj.replace(".","");
		var cli_cpfcnpj=cli_cpfcnpj.replace("/","");
		if(cli_cpfcnpj!="" || cli_codigo_c!="" || cli_codigo_a!="" || cli_codigo_p!=""){
				$.ajax( {
						url: "../include/busca_base.php",
						type: "post",
						data: "busca=1111&cli_cpfcnpj="+cli_cpfcnpj+"&cli_codigo_c="+cli_codigo_c+"&cli_codigo_a="+cli_codigo_a+"&cli_codigo_p="+cli_codigo_p+"&csitua="+csit,
						success: function( response ){ // alert(response); console.log(response);
								var json = JSON.parse( response );
								if( json[ "cli_nome_c" ]!=null ){
										$( "#cli_nome_c" ).val( json[ "cli_nome_c" ] );
								} else {
										$( "#cli_nome_c" ).val( "" );
								}
								if( json[ "cli_nome_a" ]!=null ){
										$( "#cli_nome_a" ).val( json[ "cli_nome_a" ] );
								} else {
										$( "#cli_nome_a" ).val( "" );
								}
								if( json[ "cli_nome_p" ]!=null ){
										$( "#cli_nome_p" ).val( json[ "cli_nome_p" ] );
								} else {
										$( "#cli_nome_p" ).val( "" );
								}
								if( json[ "cli_cpfcnpjc" ]!=null ){
										$( "#cli_cpfcnpjc" ).val( json[ "cli_cpfcnpjc" ] );
										$( "#cli_codigo_c" ).val( json[ "cli_codigo_c" ]);
										$( "#cli_codigo_a" ).val( json[ "cli_codigo_a" ]);
										$( "#cli_codigo_p" ).val( json[ "cli_codigo_p" ]);
								} else {
										$( "#cli_cpfcnpjc" ).val( "" );
								}
								if (silencioso==false && json[ "linhas" ].length>0) {
										//fazer alguma coias
								}
						}
				} );
		} else {
				swal( "Aviso!", "Informe o CPF/CNPJ. Campo obrigatório." , "warning" );
				$( "#cli_cpfcnpj" ).focus();
				return false;
		}
}

function paginacao( i, func, filtro, get ){
	$( "#bot-paginacao" ).click( function(){
		filtro = ( filtro==undefined )?"":filtro;
		get = ( get==undefined )?"":get;
		$.ajax( {
			url: "../include/paginacao_json.php?i="+i+"&pg="+pagina_atual+"&filtro="+filtro+get,
			type: "get",
			success: function( json ){ //alert (json);
				if( json.indexOf( "<b>Warning</b>" )!=-1 ){
					alert( json );
				}

				eval( "var results = "+json );
				if( results.length==0 ){
					$( "#bot-paginacao" ).hide();
				}
				else{
					pagina_atual++;
					func( results );
				}
			}
		} );

		return false;
	} );
}

Number.prototype.formatMoney = function( c, d, t ){ //Serve para formatar um number em formato dinheiro
	var n = this;
	c = isNaN( c = Math.abs( c ) )?2:c;
	d = ( d==undefined )?",":d;
	t = ( t==undefined )?".":t;
	var i = parseInt( n = ( +n || 0 ).toFixed( c ) )+"";
	var j = ( ( j=i.length )>3 )?j%3:0;
	return ( ( j )?i.substr( 0, j )+t:"" )+i.substr( j ).replace( /(\d{3})(?=\d)/g, "$1"+t )+( ( c )?d+( n-i ).toFixed( c ).slice( 2 ):"" );
};

// funcao loading (aguarde)
function Loading(a,tab){
  if(a=='on'){
    document.getElementById(tab).innerHTML = "<img src='../images/aguarde.gif'><br>aguarde...";
  } else {
    document.getElementById(tab).innerHTML = "";
  }
}

// funcao start do AJAX
function startAjax(){
  try { xmlhttp = new XMLHttpRequest(); }
    catch(e) {
    try { xmlhttp = new ActiveXObject("Msxml2.XMLHTTP"); }
      catch(ee) {
      try { xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");}
        catch(E){
        xmlhttp = false;
      }
    }
  }
  return xmlhttp;
}

// funcao enviar link  (AJAX)
function enviagenerico(todoscampos,enderecourl,getoupost,tab){
  if(arguments[4]!=null){ var callback=arguments[4];}
  var maiscampos=todoscampos;
  var ajax = startAjax();
  if(ajax){
    Loading('on', tab);
    ajax.open(getoupost,enderecourl,true)
    ajax.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
    ajax.onreadystatechange = function(){
      if(ajax.readyState==4){
	Loading('off', tab);
	//var get = ajax.responseText.replace(/\+/g," ");
	extraiScript(ajax.responseText);
	//alert (ajax.responseText);
	document.getElementById(tab).innerHTML = ajax.responseText;
	if(callback!=null){
	  callback();
	}
      }
    }
    maiscampos=maiscampos+"&navegador="+document.getElementById('navegador').value;
    ajax.send(maiscampos);
    /*
    if(document.getElementById("atual").value!=enderecourl){
	  document.getElementById("ultima").value=document.getElementById("atual").value;
	  document.getElementById("atual").value=enderecourl;
    }*/
  }
}
//busca o CEP OKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKK
function buscaPorCEP( el ){
		$.ajax( {
				url: "../include/busca_base.php",
				type: "POST",
				data: "busca=2000&cli_cep=" + $( el ).val(),
				success: function( response ){ //alert( response );
						var dadosCEP = JSON.parse( response );
						if( dadosCEP[ "erro" ] == undefined ){
								var formid = "#" + $( el ).parents( "form" ).attr( "id" );
								for( var i=0;i<$( formid + " select[name=cod_uf]" )[ 0 ].options.length;i++ ){
										if( $( formid + " select[name=cod_uf]" )[ 0 ].options[ i ].value==dadosCEP[ "uf" ].toUpperCase() ){
												$( formid + " select[name=cod_uf]" )[ 0 ].options[ i ].selected = true;
										}
								}
								busca_cidadessys( $( formid + " select[name=cod_uf]" ).val(), 'cidades', dadosCEP[ "cidade_cod" ] )
								$( formid + " input[name=cender]" ).val( dadosCEP[ "logradouro" ] );
								$( formid + " input[name=cbairr]" ).val( dadosCEP[ "bairro" ] );
						} else {
								msg.ex( [ "CEP inválido.", "error" ] );
						}
				}
		} );
}
//busca a rela??o de cidades
function busca_cidadessys( cod_uf, id_cidades, cid_cod ){
		$.ajax( {
				url: "../include/busca_cidades.php?cod_uf="+cod_uf,
				type: "get",
				success: function( response ){ // alert(response);
						eval( "var cidades = "+response );
						var html = "";
						for( var i=0;i<cidades.length;i++ ){
								html += "<option value='"+cidades[ i ][ "cid_cod" ]+"'>"+cidades[ i ][ "cidade" ]+"</option>";
						}
						$( "#"+id_cidades ).html( html );
						if( cid_cod!=undefined ){
								for( var i=0;i<cidades.length;i++ ){
										if( parseInt( cid_cod )==parseInt( cidades[ i ][ "cid_cod" ] ) ){
												$( "#"+id_cidades )[ 0 ].selectedIndex = i;
										}
								}
						}
				}
		} );
}

//busca a rela??o de cidades
function busca_cidadessysfun( cod_uf_nas, id_cidades_nas, cid_cod_nas ){
		$.ajax( {
				url: "../include/busca_cidades.php?cod_uf="+cod_uf_nas,
				type: "get",
				success: function( response ){ // alert(response);
						eval( "var cidades_nas = "+response );
						var html = "";
						for( var i=0;i<cidades_nas.length;i++ ){
								html += "<option value='"+cidades_nas[ i ][ "cid_cod" ]+"'>"+cidades_nas[ i ][ "cidade" ]+"</option>";
						}
						$( "#"+id_cidades_nas ).html( html );
						if( cid_cod_nas!=undefined ){
								for( var i=0;i<cidades_nas.length;i++ ){
										if( parseInt( cid_cod_nas )==parseInt( cidades_nas[ i ][ "cid_cod" ] ) ){
												$( "#"+id_cidades_nas )[ 0 ].selectedIndex = i;
										}
								}
						}
				}
		} );
}

/////////// FIM DAS FUÇÕES ÚTEIS //////////

/////////// FUNÇÕES PARA O DE ROTINAS DE PROGRAMA ///////////

//Validação de Base de dados já existe.
function busca_base_load( rt ){  // alert( rt[ "resultado" ] );
		var dados = JSON.parse( rt[ "resultado" ] );
		switch( dados[ "busca" ] ){
				case 1004:
						$( "#pretran tbody" ).remove();
						var html = "<tbody>";
						for( var i=0;i<dados[ "linhas" ].length;i++ ){
								html +=
									"<tr><td>"+dados[ "linhas" ][ i ][ "ddtpre" ]+
									"</td><td>"+dados[ "linhas" ][ i ][ "cchequ" ]+
									"</td><td>"+dados[ "linhas" ][ i ][ "chisto" ]+
									"</td><td class='alinright'>"+dados[ "linhas" ][ i ][ "ntotal" ]+
									"</td></tr>";
						}
						html += "</tbody>";
						var tabela = $( "#pretran" ).html();
						$( "#pretran" ).html( tabela+html );
						break;
				case 1005:
						$( "#exbunidade" ).html( dados[ "cnumap" ]+"/"+dados[ "cbloco" ]+" - "+dados[ "cnomes" ] );
						$( "#id_pro" ).val( dados[ "id_pro" ] );
						break;
				case 1006:
						$( "#exbunidade" ).html( dados[ "cnumap" ]+"/"+dados[ "cbloco" ]+" - "+dados[ "cnomes" ] );
						$( "#id_pro" ).val( dados[ "id_pro" ] );
						$( "#cnscod" ).val( dados[ "cnscod" ] );
						break;
				case 1007:
						$( "#id_pro" ).val( dados[ "id_pro" ] );
						break;
				case 1008:
						if( dados[ "tipo_ope" ]=="sante" ){
								$( "#exbcondominio" ).html( dados[ "cpredi" ]+"<br> Rateio finalizado em: "+dados[ "rtddtrat" ]+" por: "+dados[ "rtcusuar" ] );
								$( "#id_rtg" ).val( dados[ "id_rtg" ] );
								$( "#nvlant" ).val( dados[ "nvlant" ] );
								$( "#nvlpgo" ).val( dados[ "nvlpgo" ] );
								$( "#nvlsdo" ).val( dados[ "nvlsdo" ] );
								$( "#crelac" ).val( dados[ "crelac" ] );
								$( "#sp-nvlant" ).html( dados[ "nvlant" ] );
								$( "#sp-nvlpgo" ).html( dados[ "nvlpgo" ] );
								$( "#sp-nvlsdo" ).html( dados[ "nvlsdo" ] );
								$( "#rattran tbody" ).remove();
								var html = "<tbody>";
								for( var i=0;i<dados[ "linhas" ].length;i++ ){
										if(dados["linhas"][ i ][ "cmovim"] == '*'){
												html +=
													"<tr><td>"+dados[ "linhas" ][ i ][ "ddtpre" ]+
													"</td><td>"+dados[ "linhas" ][ i ][ "cchequ" ]+
													"</td><td>"+dados[ "linhas" ][ i ][ "cforma" ]+
													"</td><td>"+dados[ "linhas" ][ i ][ "cconta" ]+
													"</td><td class='alinright'>"+dados[ "linhas" ][ i ][ "ntotal" ]+
													"</td><td class=\"alincenter\"><i class=\"fa fa-check\"></i>"+
													"</td></tr>";
										} else {
												html +=
													"<tr><td>"+dados[ "linhas" ][ i ][ "ddtpre" ]+
													"</td><td>"+dados[ "linhas" ][ i ][ "cchequ" ]+
													"</td><td>"+dados[ "linhas" ][ i ][ "cforma" ]+
													"</td><td>"+dados[ "linhas" ][ i ][ "cconta" ]+
													"</td><td class='alinright'>"+dados[ "linhas" ][ i ][ "ntotal" ]+
													"</td><td class=\"alincenter\"><input type=\"checkbox\" id=\"id_pre_"+i+"\" name=\"id_pre[]\" value=\""+dados[ "linhas" ][ i ][ "id_pre" ]+"\" class=\"func\">"+
													"</td></tr>";
										}
								}
								html += "</tbody>";
								var tabela = $( "#rattran" ).html();
								$( "#rattran" ).html( tabela+html );
								if( parseFloat( dados[ "nvlsdo" ].replace( ".", "" ).replace( ",", "." ) )==0 ){
										$( "#fin_ratpagaant button.bt-recibo" ).prop( "disabled", false );
										$( "#fin_ratpagaant button.bt-relacao" ).prop( "disabled", false );
								} else {
										$( "#fin_ratpagaant button.bt-recibo" ).prop( "disabled", true );
										$( "#fin_ratpagaant button.bt-relacao" ).prop( "disabled", true);
								}
						} else if( dados[ "tipo_ope" ]=="nante" ){
								$( "#exbcondominios" ).html( dados[ "cpredi" ] );
								$( "#nprinc" ).val( dados[ "nprinc" ] );
								$( "#nmulta" ).val( dados[ "nmulta" ] );
								$( "#ncorre" ).val( dados[ "ncorre" ] );
								$( "#njuros" ).val( dados[ "njuros" ] );
								$( "#ncusta" ).val( dados[ "ncusta" ] );
								$( "#nmu475" ).val( dados[ "nmu475" ] );
								$( "#nhonos" ).val( dados[ "nhonos" ] );
								$( "#nprinc_2" ).val( dados[ "nprinc" ] );
								$( "#nmulta_2" ).val( dados[ "nmulta" ] );
								$( "#ncorre_2" ).val( dados[ "ncorre" ] );
								$( "#njuros_2" ).val( dados[ "njuros" ] );
								$( "#ncusta_2" ).val( dados[ "ncusta" ] );
								$( "#nmu475_2" ).val( dados[ "nmu475" ] );
								$( "#nhonos_2" ).val( dados[ "nhonos" ] );
								$( "#cestr2_1" ).val( dados[ "cestr2_1" ] );
								$( "#crelac_1" ).val( dados[ "crelac_1" ] );
								$( "#cestr2_2" ).val( dados[ "cestr2_1" ] );
								$( "#crelac_2" ).val( dados[ "crelac_1" ] );
								$( "#crelac_ant" ).val( dados[ "crelac_1" ] );
								$( "#nvlpgo_pre" ).val( dados[ "nvlpgo_pre" ] );
								$( "#nvlant_pre" ).val( dados[ "nvlant_pre" ] );
								$( "#nvlsdo_pre" ).val( dados[ "nvlsdo_pre" ] );
								$( "#totcota" ).html( dados[ "totcota" ] );
								$( "#cotcota" ).html( dados[ "totcota" ] );
								$( "#totmult" ).html( dados[ "totmult" ] );
								$( "#totcorr" ).html( dados[ "totcorr" ] );
								$( "#totjuro" ).html( dados[ "totjuro" ] );
								$( "#perdpag" ).html( dados[ "totperd" ] );
								$( "#totenca" ).html( dados[ "totenca" ] );
								$( "#totdesc" ).html( dados[ "totdesc" ] );
								$( "#totacet" ).html( dados[ "totacet" ] );
								$( "#totcus" ).html( dados[ "totcus" ] );
								$( "#tot475" ).html( dados[ "tot475" ] );
								$( "#cotcota" ).html( dados[ "totpri" ] );
								$( "#multpag" ).html( dados[ "totmuc" ] );
								$( "#jurpag" ).html( dados[ "totjuc" ] );
								$( "#corrpag" ).html( dados[ "totcoc" ] );
								$( "#cuspag" ).html( dados[ "totcusc" ] );
								$( "#475pag" ).html( dados[ "tot475c" ] );
								$( "#honpag" ).html( dados[ "tothonc" ] );
								$( "#totalpag" ).html( dados[ "totacer" ] );
								$( "#sp-nvlant-pre" ).html( dados[ "nvlant_pre" ] );
								$( "#sp-nvlpgo-pre" ).html( dados[ "nvlpgo_pre" ] );
								$( "#sp-nvlsdo-pre" ).html( dados[ "nvlsdo_pre" ] );
								// console.log(dados);
								if( dados[ "tipo_opes" ]=="tabe" ){
										$( "#nvlant_pre" ).val( dados[ "nvlant_pre" ] );
										$( "#nvlpgo_pre" ).val( dados[ "nvlpgo_pre" ] );
										$( "#nvlsdo_pre" ).val( dados[ "nvlsdo_pre" ] );
										$( "#sp-nvlant-pre" ).html( dados[ "nvlant_pre" ] );
										$( "#sp-nvlpgo-pre" ).html( dados[ "nvlpgo_pre" ] );
										$( "#sp-nvlsdo-pre" ).html( dados[ "nvlsdo_pre" ] );
										$( "#rattran_pre tbody" ).remove();
										var html = "<tbody>";
										for( var i=0; i<dados[ "linhas" ].length; i++ ){
												if(dados["linhas"][ i ][ "cmovim"] == '*' && dados["linhas"][ i ][ "cforma"] == 'DES'){
														html +=
															"<tr><td>"+dados[ "linhas" ][ i ][ "ddtpre" ]+
															"</td><td>"+dados[ "linhas" ][ i ][ "cchequ" ]+
															"</td><td>"+dados[ "linhas" ][ i ][ "cforma" ]+
															"</td><td>"+dados[ "linhas" ][ i ][ "cconta" ]+
															"</td><td class='alinright'>"+dados[ "linhas" ][ i ][ "ntotal" ]+
															"</td><td class=\"alincenter\"><input type=\"checkbox\" id=\"id_pre_"+i+"\" name=\"id_pre[]\" value=\""+dados[ "linhas" ][ i ][ "id_pre" ]+"\" class=\"func\">"+
															"</td></tr>";
												} else if(dados["linhas"][ i ][ "cmovim"] == '*' && dados["linhas"][ i ][ "cforma"] != 'DES'){
														html +=
															"<tr><td>"+dados[ "linhas" ][ i ][ "ddtpre" ]+
															"</td><td>"+dados[ "linhas" ][ i ][ "cchequ" ]+
															"</td><td>"+dados[ "linhas" ][ i ][ "cforma" ]+
															"</td><td>"+dados[ "linhas" ][ i ][ "cconta" ]+
															"</td><td class='alinright'>"+dados[ "linhas" ][ i ][ "ntotal" ]+
															"</td><td class=\"alincenter\"><i class=\"fa fa-check\"></i>"+
															"</td></tr>";
												} else if(dados["linhas"][ i ][ "cmovim"] == '.'){
														html +=
															"<tr><td>"+dados[ "linhas" ][ i ][ "ddtpre" ]+
															"</td><td>"+dados[ "linhas" ][ i ][ "cchequ" ]+
															"</td><td>"+dados[ "linhas" ][ i ][ "cforma" ]+
															"</td><td>"+dados[ "linhas" ][ i ][ "cconta" ]+
															"</td><td class='alinright'>"+dados[ "linhas" ][ i ][ "ntotal" ]+
															"</td><td class=\"alincenter\"><input type=\"checkbox\" id=\"id_pre_"+i+"\" name=\"id_pre[]\" value=\""+dados[ "linhas" ][ i ][ "id_pre" ]+"\" class=\"func\">"+
															"</td></tr>";
												} else {
														html +=
															"<tr><td>"+dados[ "linhas" ][ i ][ "ddtpre" ]+
															"</td><td>"+dados[ "linhas" ][ i ][ "cchequ" ]+
															"</td><td>"+dados[ "linhas" ][ i ][ "cforma" ]+
															"</td><td>"+dados[ "linhas" ][ i ][ "cconta" ]+
															"</td><td class='alinright'>"+dados[ "linhas" ][ i ][ "ntotal" ]+
															"</td><td>"+dados[ "linhas" ][ i ][ "cconta" ]+
															"</td></tr>";
												}
										}
										html += "</tbody>";
										var tabelas = $( "#rattran_pre" ).html();
										$( "#rattran_pre" ).html( tabelas+html );
										if( parseFloat( dados[ "nvlsdo_pre" ].replace( ".", "" ).replace( ",", "." ) )==0 ){
												$( "#fin_ratpagaant_pre button.bt-recibo-pre" ).prop( "disabled", false );
												$( "#fin_ratpagaant_pre button.bt-relacao-pre" ).prop( "disabled", false );
										} else {
												$( "#fin_ratpagaant_pre button.bt-recibo-pre" ).prop( "disabled", true );
												$( "#fin_ratpagaant_pre button.bt-relacao-pre" ).prop( "disabled", true);
										}
								}
						}
						break;
				case 1010:
						$( "#id_hon_tro" ).val( dados[ "id_hon" ] );
						$( "#crelac_tro" ).val( dados[ "crelac" ] );
						$( "#basecl_tro" ).val( dados[ "basecl" ] );
						if( dados[ "tipo_ope" ]=="colab" ){
								$( "#exbcolaborador" ).html( dados[ "crespo" ] );
								$( "#crelac_1" ).val( dados[ "crelac_1" ] );
								$( "#crelac_2" ).val( dados[ "crelac_1" ] );
								$( "#nhonos" ).val( dados[ "nhonos" ] );
								$( "#nmu475" ).val( dados[ "nmu475" ] );
								$( "#nmulta" ).val( dados[ "nmulta" ] );
								$( "#njuros" ).val( dados[ "njuros" ] );
								$( "#ccorre" ).val( dados[ "ccorre" ] );
								$( "#ncorre" ).val( dados[ "ncorre" ] );
								$( "#ncusta" ).val( dados[ "ncusta" ] );
								$( "#nvlpgo_pre" ).val( dados[ "nvlpgo_pre" ] );
								$( "#nvlant_pre" ).val( dados[ "nvlant_pre" ] );
								$( "#nvlsdo_pre" ).val( dados[ "nvlsdo_pre" ] );
								$( "#totcota" ).html( dados[ "totcota" ] );
								$( "#cotcota" ).html( dados[ "cotcota" ] );
								$( "#totmult" ).html( dados[ "totmult" ] );
								$( "#totjuro" ).html( dados[ "totjuro" ] );
								$( "#totcorr" ).html( dados[ "totcorr" ] );
								$( "#totenca" ).html( dados[ "totenca" ] );
								$( "#totcust" ).html( dados[ "totcust" ] );
								$( "#tot475" ).html( dados[ "tot475" ] );
								$( "#totdesc" ).html( dados[ "totdesc" ] );
								$( "#totacet" ).html( dados[ "totacet" ] );
								$( "#multpag" ).html( dados[ "totmuc" ] );
								$( "#jurpag" ).html( dados[ "totjuc" ] );
								$( "#corrpag" ).html( dados[ "totcoc" ] );
								$( "#cuspag" ).html( dados[ "totcus" ] );
								$( "#475pag" ).html( dados[ "tot475c" ] );
								$( "#honpag" ).html( dados[ "tothonc" ] );
								$( "#totacer" ).html( dados[ "totacer" ] );
								$( "#totalpag" ).html( dados[ "totacer" ] );
								$( "#sp-nvlant-pre" ).html( dados[ "nvlant_pre" ] );
								$( "#sp-nvlpgo-pre" ).html( dados[ "nvlpgo_pre" ] );
								$( "#sp-nvlsdo-pre" ).html( dados[ "nvlsdo_pre" ] );
						} else if( dados[ "tipo_ope" ]=="tabe" ){
								$( "#nvlant_pre" ).val( dados[ "nvlant_pre" ] );
								$( "#nvlpgo_pre" ).val( dados[ "nvlpgo_pre" ] );
								$( "#nvlsdo_pre" ).val( dados[ "nvlsdo_pre" ] );
								$( "#sp-nvlant-pre" ).html( dados[ "nvlant_pre" ] );
								$( "#sp-nvlpgo-pre" ).html( dados[ "nvlpgo_pre" ] );
								$( "#sp-nvlsdo-pre" ).html( dados[ "nvlsdo_pre" ] );
								$( "#rattran_pre tbody" ).remove();
								var html = "<tbody>";
								for( var i=0; i<dados[ "linhas" ].length; i++ ){
										if(dados["linhas"][ i ][ "cmovim"] == '*'){
												html +=
													"<tr><td>"+dados[ "linhas" ][ i ][ "ddtpre" ]+
													"</td><td>"+dados[ "linhas" ][ i ][ "cchequ" ]+
													"</td><td>"+dados[ "linhas" ][ i ][ "cforma" ]+
													"</td><td>"+dados[ "linhas" ][ i ][ "cconta" ]+
													"</td><td class='alinright'>"+dados[ "linhas" ][ i ][ "ntotal" ]+
													"</td><td class=\"alincenter\"><i class=\"fa fa-check\"></i>"+
													"</td></tr>";
										} else {
												html +=
													"<tr><td>"+dados[ "linhas" ][ i ][ "ddtpre" ]+
													"</td><td>"+dados[ "linhas" ][ i ][ "cchequ" ]+
													"</td><td>"+dados[ "linhas" ][ i ][ "cforma" ]+
													"</td><td>"+dados[ "linhas" ][ i ][ "cconta" ]+
													"</td><td class='alinright'>"+dados[ "linhas" ][ i ][ "ntotal" ]+
													"</td><td class=\"alincenter\"><input type=\"checkbox\" id=\"id_pre_"+i+"\" name=\"id_pre[]\" value=\""+dados[ "linhas" ][ i ][ "id_pre" ]+"\" class=\"func\">"+
													"</td></tr>";
										}
								}
								html += "</tbody>";
								var tabelas = $( "#rattran_pre" ).html();
								$( "#rattran_pre" ).html( tabelas+html );
								if( parseFloat( dados[ "nvlsdo_pre" ].replace( ".", "" ).replace( ",", "." ) )==0 ){
										$( "#fin_ratpagaant_pre button.bt-recibo-pre" ).prop( "disabled", false );
										$( "#fin_ratpagaant_pre button.bt-relacao-pre" ).prop( "disabled", false );
								} else {
										$( "#fin_ratpagaant_pre button.bt-recibo-pre" ).prop( "disabled", true );
										$( "#fin_ratpagaant_pre button.bt-relacao-pre" ).prop( "disabled", true);
								}
						}
						break;
			}
}

function uti_cadskin(url, destino, imgs){
	var erro = false;
	if( imgs=="" && erro==false ){
		erro = true;
	}
	if( erro==false ){
		ajax( url, "post", "!"+destino );
	}
}

//funcao de confirma��o de multa
function adm_formulta_load( sobre ){
	var fn = $( sobre[ "origem" ] ).find( "input[name=funcao]" ).val();
	if( fn=="inc" ){
		alert( msgs[ "reg_inc" ] );
	} else if( fn=="alt" ) {
		alert( msgs[ "reg_alt" ] );
	} else if( fn=="exc" ) {
		alert( msgs[ "reg_exc" ] );
	}
}

function busca_conta(){
		var men_aceita = $( "#men_aceita" ).val();
		var fin_conta = $( "#fin_conta" ).val();
		if(fin_conta!=""){
				$.ajax( {
						url: "../include/busca_base.php",
						type: "post",
						data: "busca=1028&fin_conta="+$( "#fin_conta" ).val(),
						success: function( response ){ // alert(response);
								var dados = JSON.parse(response);
								$( "#fin_historico" ).val(dados["fin_historico"]);
								$( "#cautom" ).val(dados["cautom"]);
								$( "#custas" ).val(dados["custas"]);
								$( "#nparcp" ).val(dados["nparcp"]);
								$( "#nparce" ).val(dados["nparce"]);
								$( "#c_tipo" ).val(dados["c_tipo"]);
								//Trata da transferencia automatica de contas
								if( dados[ "cautom" ]=="S" ){
										$.ajax( {
												url: "../include/busca_base.php",
												type: "post",
												data: "busca=1030&baseuni="+$( "#baseuni" ).val()+"&ccodbc="+$( "#ccodbc" ).val(),
												success: function( response ){
														var dados = JSON.parse(response);
														var html = "";
														for( i=0;i<dados[ "value" ].length;i++ ){
																html += "<option value=\""+dados[ "value" ][ i ]+"\">"+dados[ "html" ][ i ]+"</option>";
														}
														//$( "#mostraautom" ).css( "display", "block" );
														$( "#mostraautom" ).show();
														$( "#banc_idds" ).html( "<option value=''>Banco de transferência</option>"+html );
														$( "#banc_idds" ).attr( "required", "true" );
												}
										} );
								} else {
										$( "#mostraautom" ).hide();
								}
								//Trata da selecção de contas de custas
								if( dados[ "custas" ]=="sim" ){
										$.ajax( {
												url: "../include/busca_base.php",
												type: "post",
												data: "busca=1031&baseuni="+$( "#baseuni" ).val(),
												success: function( response ){ // alert(response);
														var dados = JSON.parse(response);
														var html = "";
														for( i=0;i<dados[ "value" ].length;i++ ){
																if( $( "#baseuni" ).val()!="" && $( "#baseuni" ).val()!="EMPRESA" ){
																		if( $( "#baseuni" ).val()==dados[ "value" ][ i ] ){
																				html += "<option value=\""+dados[ "value" ][ i ]+"\">"+dados[ "html" ][ i ]+"</option>";
																		}
																} else{
																		if( html=="" ){ html += "<option value=''>Selecione a unidade</option>"; }
																		html += "<option value=\""+dados[ "value" ][ i ]+"\">"+dados[ "html" ][ i ]+"</option>";
																}
														}
														$( "#mostracustas" ).show();
														$( "#baseuni" ).html( html );
														$( "#baseuni,#cnscoda,#cnscodp" ).attr( "required", "true" );
														busca_dadoscondominio( $( "#basecl" )[ 0 ] );
												}
										} );
								} else {
										$( "#mostracustas" ).hide();
								}
								//Trata da selecão de contas de débitos
								if( dados[ "c_tipo" ]=="D" ){
										$.ajax( {
												url: "../include/busca_base.php",
												type: "post",
												data: "busca=1032&for_codigo="+$( "#for_codigo" ).val()+"&c_tipo="+$( "#c_tipo" ).val(),
												success: function( response ){ // alert(response);
														var dados = JSON.parse(response);
														var html = "";
														for( i=0;i<dados[ "value" ].length;i++ ){
																html += "<option value=\""+dados[ "value" ][ i ]+"\">"+dados[ "htmlc" ][ i ]+"</option>";
														}
														$( "#for_codigon" ).html( "<option value=''>Selecione</option>"+html );
														var html = "";
														for( i=0;i<dados[ "value" ].length;i++ ){
																html += "<option value=\""+dados[ "value" ][ i ]+"\">"+dados[ "html" ][ i ]+"</option>";
														}
														$( "#mostratipoD" ).show();
														$( "#mostraDados" ).show();
														$( "#for_codigo" ).html( "<option value=''>Selecione</option>"+html );
												}
										} );
								} else {
										$( "#mostratipoD" ).hide();
										$( "#mostraDados" ).hide();
								}
								//Trata da selecão de contas de créditos
								if( dados[ "c_tipo" ]=="C" ){
										$.ajax( {
												url: "../include/busca_base.php",
												type: "post",
												data: "busca=1033&cli_codigo="+$( "#cli_codigo" ).val()+"&c_tipo="+$( "#c_tipo" ).val(),
												success: function( response ){
														var dados = JSON.parse(response);
														var html = "";
														for( i=0;i<dados[ "value" ].length;i++ ){
																html += "<option value=\""+dados[ "value" ][ i ]+"\">"+dados[ "htmlc" ][ i ]+"</option>";
														}
														$( "#cli_codigon" ).html( "<option value=''>Selecione</option>"+html );
														var html = "";
														for( i=0;i<dados[ "value" ].length;i++ ){
																html += "<option value=\""+dados[ "value" ][ i ]+"\">"+dados[ "html" ][ i ]+"</option>";
														}
														$( "#mostratipoC" ).show();
														$( "#mostratipoDadosC" ).show();
														$( "#cli_codigo" ).html( "<option value=''>Selecione</option>"+html );
												}
										} );
								} else {
										$( "#mostratipoC" ).hide();
										$( "#mostratipoDadosC" ).hide();
								}
						}
				} );
		} else {
				return true;
		}
}

// //Busca dados de lan�amento na movimentacao do previsao de inclus�o, altera��o e exclus�o
// function busca_dados_movprevisao(id_pre){
// 	var _id = $(this).attr("id_pre");
// 	var base = $( "#basemv" ).val();
// 	var funcao = $( "#funcao" ).val();
// 	if(funcao!="rel"){
// 		if(id_pre!=""){
// 			$.ajax( {
// 				url: "../include/busca_base.php",
// 				type: "post",
// 				data: "busca=1003&base="+base+"&id_pre="+id_pre,
// 				success: function( response ){ //alert(response);
// 					var dados = JSON.parse(response);
// 					$( "#titulo").text("Formul�rio de Altera��o de Lan�amento de Previs�o ");
// 					$( "#funcao" ).val( "alt" );
// 					$( "#id_pre" ).val( dados["id_pre"] );
// 					$( "#fin_id" ).val( dados["fin_id"] );
// 					$( "#fin_conta" ).val( dados["fin_conta"] );
// 					$( "#fin_contan" ).val( dados["fin_conta"] );
// 					$( "#cli_codigo" ).val( dados["cli_codigo"] );
// 					$( "#cli_codigon" ).val( dados["cli_codigo"] );
// 					$( "#for_codigo" ).val( dados["for_codigo"] );
// 					$( "#for_codigon" ).val( dados["for_codigo"] );
// 					$( "#fin_documento" ).val( dados["fin_documento"] );
// 					$( "#fin_historico" ).val( dados["fin_historico"] );
// 					$( "#fin_complemento" ).val( dados["fin_complemento"] );
// 					$( "#fin_cheque" ).val( dados["fin_cheque"] );
// 					$( "#fin_documento" ).val( dados["fin_documento"] );
// 					$( "#fin_data" ).val( dados["fin_data"] );
// 					$( "#findbcant" ).val( dados["findbcant"] );
// 					$( "#fintotant" ).val( dados["fintotant"] );
// 					$( "#fin_total" ).val( dados["fin_total"] );
// 					$( "#crelac" ).val( dados["crelac"] );
// 					$( "#nparcp" ).val( dados["nparcp"] );
// 					$( "#nparce" ).val( dados["nparce"] );
// 					$( "#forma" ).val( dados["forma"] );
// 					$( "#c_tipo" ).val( dados["c_tipo"] );
// 					$( "#bt-excluir" ).show();
// 					$( "#mostracustas,#mostratipoD,#mostratipoC" ).hide();
// 					$( "#banc_idds,#basemvs,#cnscoda,#cnscodp" ).removeAttr( "required" );
// 				}
// 			} );
// 		} else {
// 			$( "#titulo").text("Formul�rio de Inclus�o de Lan�amento de Previs�o ");
// 			$( "#funcao" ).val( "inc" );
// 			$( "#id_mvf" ).val( "");
// 			$( "#fin_id" ).val( "" );
// 			$( "#fin_conta" ).val( "" );
// 			$( "#fin_contan" ).val( "" );
// 			$( "#cli_codigo" ).val( "" );
// 			$( "#cli_codigon" ).val( "" );
// 			$( "#for_codigo" ).val( "" );
// 			$( "#for_codigon" ).val( "" );
// 			$( "#fin_documento" ).val( "" );
// 			$( "#fin_historico" ).val( "" );
// 			$( "#fin_complemento" ).val( "" );
// 			$( "#fin_documento" ).val( "" );
// 			$( "#fin_cheque" ).val( "" );
// 			$( "#fin_data" ).val( "" );
// 			$( "#findbcant" ).val( "" );
// 			$( "#fintotant" ).val( "" );
// 			$( "#fin_total" ).val( "" );
// 			$( "#crelac" ).val( "" );
// 			$( "#nparcp" ).val( "" );
// 			$( "#nparce" ).val( "" );
// 			$( "#forma" ).val( "" );
// 			$( "#c_tipo" ).val( "" );
// 			$( "#bt-excluir" ).hide();
// 			$( "#mostracustas,#mostratipoD,#mostratipoC" ).hide();
// 			$( "#banc_idds,#basemvs,#cnscoda,#cnscodp" ).removeAttr( "required" );
// 		}
// 	}
// }
// function fin_conprevisao_load(){
// 	// ATRIBUI ONSUBMIT AOS FORMS DA MODAL
// 	$( "#adm_cadapre" ).on( "submit", function( event ){
// 		$( "#btn-salvar,#bt-excluir" ).attr( "disabled", true );
// 		event.preventDefault();
// 		//Receber os dados do formul�rio
// 		var dados = $("#adm_cadapre").serialize();
// 		$.post("../sys_sys/fin_forlanprevisao.php", dados, function ( retorna ){
// 			//alert(retorna);
// 			if( retorna ){
// 				//Alerta dos inputs
// 				if($("#funcao" ).val()=="inc"){ swal( "Sucesso!", msgs[ "reg_inc" ], "success" ); }else if( $( "#funcao" ).val()=="alt" ){ swal( "Sucesso!", msgs[ "reg_alt" ], "success" ); }
// 				if($("#funcex" ).val()=="exc"){ swal( "Aviso!", msgs[ "reg_exc" ], "warning" ); }
// 				//Limpar os campo
// 				$( "#adm_cadapre" )[ 0 ].reset();
// 				//Fechar a janela modal cadastrar
// 				$( "#modalPrevisao" ).modal( "hide" );
// 				//retorna pagina
// 				$.post( "../sys_sys/fin_conprevisao.php", dados , function( retorna ){
// 				//Subtitui o valor no seletor id="conteudo"
// 					$( "#conteudo" ).html( retorna );
// 					fin_conprevisao_load();
// 					init_gentelella_no_ajax();
// 				} );
// 			}else{
// 				//Limpar os campo
// 				$( "#adm_cadapre" )[ 0 ].reset();
// 			}
// 		} );
// 		return false;
// 	} );
//
// 	$( "#adm_prevtra" ).on( "submit", function( event ){
// 		$( "#btn-transferir" ).attr( "disabled", true );
// 		event.preventDefault();
// 		//Receber os dados do formul�rio
// 		var dados = $( "#adm_prevtra" ).serialize();
// 		$.post( "../sys_sys/fin_forlanprevisao.php", dados, function ( retorna ){
// 			//alert(retorna);
// 			if( retorna ){
// 				//Alerta dos inputs
// 				if( $( "#funcao" ).val()=="tra" ){ swal( "Sucesso!", msgs[ "reg_tra" ], "success" ); }
// 				//Limpar os campo
// 				$( "#adm_prevtra" )[ 0 ].reset();
// 				//Fechar a janela modal cadastrar
// 				$( "#modalPrevisaoTra" ).modal( "hide" );
//
// 				$.post( "../sys_sys/fin_conprevisao.php", dados , function( retorna ){
// 				//Subtitui o valor no seletor id="conteudo"
// 					$( "#conteudo" ).html( retorna );
// 					fin_conprevisao_load();
// 					init_gentelella_no_ajax();
// 				} );
// 			}else{
// 				//Limpar os campo
// 				$( "#adm_prevtra" )[ 0 ].reset();
// 			}
// 		} );
// 		return false;
// 	} );
//
// 	$( "#adm_relaprev" ).on( "submit", function( event ){
// 		event.preventDefault();
//
// 		//Fechar a janela modal cadastrar
// 		$( "#modalPrevisaoRel" ).modal( "hide" );
// 		fajax( "adm_relaprev", "../sys_sys/fin_conprevisao.php", "conteudo" );
// 		$( "#adm_relaprev" )[ 0 ].reset();
// 		return false;
// 	} );
// }

function busca_dadoscondominio( baseuni, comp = "" ) {
    var baseuni = $( "#baseuni" ).val();
		if( baseuni != "" ) {
				$.ajax( {
						type: "post",
						url: "../include/busca_base.php",
						data: "busca=1000&baseuni=" + baseuni,
						success: function( response ) { // console.log(response);
								var condominio = JSON.parse( response );
								var opt = "<option value=\"\">Unidade</option>\n";
								var temblocos = false;
								condominio.unidades.forEach( function( t, i ) {
										opt += "<option value=\"" + t + "\">" + t + "</option>\n";
								} );
								$( "#cnscoda" + comp ).html( opt );
								opt = "";
								condominio.blocos.forEach( function( t, i ) {
										if( t.trim() != "" ){
												opt += "<option value=\"" + t + "\">" + t + "</option>\n";
										}
								} );
								if( opt != "" ) {
										$( "#cnscodb" + comp ).prop( "disabled", false );
										opt = "<option value=\"\">Turma</option>\n" + opt;
										$( "#cnscodb" + comp ).html( opt );
										$( "#cnscodb" + comp ).attr( "required", true );
										temblocos = true;
								} else {
										$( "#cnscodb" + comp ).prop( "disabled", true );
								}
								opt = "<option value=\"\">Selecione um associado</option>\n";
								condominio.proprietarios.forEach( function( ar, i ) {
										var bloco = ( temblocos ) ? "-" + ar[ "bloco" ] : "";
										opt += "<option value=\"" + ar[ "cod" ] + "\" class=\"" + ar[ "unidade" ] + bloco + "\">" + ar[ "nome" ] + "</option>\n";
								} );
								$( "#cnscodp" + comp ).html( opt );
						}
				} );
		}
}

// Seleciona proprietário OKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKK
function sinc_dadoscondominio( tipo, comp = "" ){
		if( tipo == "ub" ) {
				var unidade = $( "#cnscoda" + comp + " option:selected" ).val();
				var bloco = $( "#cnscodb" + comp + " option:selected" ).val();
				if( $( "#cnscodb" + comp ).prop( "disabled" ) == false && unidade != "" && bloco != "" ) {
						if( $( "#cnscodp" + comp + " option." + unidade + "-" + bloco ).length > 0 ) {
								$( "#cnscodp" + comp + " option." + unidade + "-" + bloco ).prop( "selected", true );
						} else {
								$( "#cnscodp" + comp + " option:first" ).prop( "selected", true );
						}
				} else if( $( "#cnscodb" + comp ).prop( "disabled" ) == true && unidade != "" ) {
						$( "#cnscodp" + comp + " option." + unidade ).prop( "selected", true );
				}
		}
		if( tipo == "p" ) {
				if( $( "#cnscodp" + comp + " option:selected" ).attr( "class" ) != undefined ){
						var unidade = $( "#cnscodp" + comp + " option:selected" ).attr( "class" ).split( "-" );
						var bloco = ( unidade.length == 2 ) ? unidade[ 1 ] : "";
						unidade = unidade[ 0 ];
						$( "#cnscoda" + comp + " option" ).each( function( i, v ) {
								if( $( v ).val() == unidade ) {
										$( v ).prop( "selected", true );
								}
						} );
						if( bloco != "" ) {
								$( "#cnscodb" + comp + " option" ).each( function ( i, v ){
										if( $( v ).val() == bloco ) {
												$( v ).prop( "selected", true );
										}
								} );
						}
				}
		}
		var cod = $( "#cnscodp" + comp + " :selected" ).val();
		if( $( "#rec_caix" ).is( "form" ) && cod != "" ){
				busca_dadosproprietario( cod, "pendencias" );
		}
}
var pendencias; // OKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKK
function busca_dadosproprietario( cod, idcarregar = "" ){
		var baseuni = $( "#baseuni :selected" ).val(); //[ 0 ].options[ $( "#basecl" )[ 0 ].selectedIndex ].value;
		var datacal = $( "#datacal_02" ).val();
		if( idcarregar != "" ){ carregando.min.exibe( idcarregar ) }
		$.ajax( {
				type: "post",
				url: "../include/busca_base.php",
				data: "busca=1001&baseuni="+baseuni+"&cod="+cod+"&datacal="+datacal,
				success: function( response ){
					// alert( response );
					debug.returnedAJAX( response );
					pendencias = JSON.parse( response );
					var tabela =
						`<table class="table table-condensed table-striped table-bordered">
							<tr>
								<th class="alincenter">Mês Ref.</th>
								<th class="alincenter">Vecto.</th>
								<th class="alincenter">Valor</th>
								<th class="alincenter"><input type='checkbox' onclick='marcatodos( this, \"pendencia\" );somamarcados( \"pendencia\" );' /></th>
							</tr>`;
					pendencias.forEach( function( a, i ){
						tabela +=
							`<tr>
								<td class="alincenter">${ a[ "referencia" ] }</td>
								<td class="alincenter">${ a[ "vencimento" ] }</td>
								<td class="alincenter">${ a[ "valor" ] }</td>
								<td class="alincenter"><input type="checkbox" name="marcados" class="pendencia ${ i }" onclick="somamarcados( 'pendencia' );" value="${ a[ "id" ] }" /></td>
							</tr>`;
					} );
					if( pendencias.length == 0 ){
							tabela += "<tr><td colspan=\"4\" class=\"alincenter\">Sem pendências</td></tr>"
					}
					tabela += "</table>";
					$( "#pendencias" ).html( tabela );
					if( idcarregar != "" ){ carregando.min.esconde() }
				}
		} );
}





function busca_acord ( acor_do ){
	if(acor_do=="N"){
		acor_do="N";
	} else
	if(acor_do=="S"){
		acor_do="S";
		$( "#acor_do" ).val(acor_do);
	}
}

function funaco(classe){$( "#comentos" ).val( classe );}
function mudaacao(classe){$( "#geraco" ).val( classe );}
function fecbota(classe){$( "#imboac" ).val( classe );}
function mudasit(classe){$( "#situac" ).val( classe );}
function mudafunc(classe){$( "#funcex" ).val( classe );}
function mudaest(classe){$( "#mudatip" ).val( classe );}
function mudasita(classe){$( "#situac" ).val( classe );}
function mudasitnao(classe){$( "#situacnao" ).val( classe );}
function mudaclass(classe){$( "#forma" ).val( classe );}
function mudaclasse(classe){$( "#receb" ).val( classe ); $( "#canche" ).val( "" );}
function mudaclasses(classe){$( "#canche" ).val( classe );}
function mudaclassrat(classe){$( "#situac" ).val( classe ); $( "#rttipo" ).val( );}
function mudaclassratg(classe){$( "#situac" ).val( classe ); $( "#rttipo" ).val( );}
function mudaclassrati(classe){$( "#situac" ).val( classe ); $( "#rttipo" ).val( );}
function mudatiporat(classes){ $( "#calrat" ).val( "" ); $( "#rttipo" ).val( classes );}
function mudarel(classe){$( "#imprim" ).val( classe );}
function mudafun(classe){$( "#funacao" ).val( classe );}
function mudacob(classe){$( "#retarq" ).val( classe );}
function mudacobenv(classe){$( "#remarq" ).val( classe );}

function fin_forlanpendencia_validacao( sobre ){
	var situac = $.trim( $( "#situac" ).val() );
	var cnscod = $.trim( $( "#cnscod" ).val() );
	var cmesre = $.trim( $( "#cmesre" ).val() );
	var base = $.trim( $( "#base" ).val() );
	var acor_do = $.trim( $( "#acor_do" ).val() );
	if( situac=="INC" ){
		$.ajax( {
			url: "../include/busca_base.php",
			type: "post",
			data: "busca=1015&cnscod="+cnscod+"&base="+base+"&cmesre="+cmesre,
			success: function( json ){
				if( json!="" ){
					$( "#mesrec" ).val(json);
					 return false;
				} else {
					$( "#mesrec" ).val(json);
					return true;
				}
			}
		} );
		if( acor_do=="S" ){
			if( $.trim( $( "#nvlmul" ).val() )=="" && $.trim( $( "#nvljur" ).val() )=="" && $.trim( $( "#nvlcor" ).val() )=="" && $.trim( $( "#nvlhon" ).val() )=="" && $.trim( $( "#nvlcus" ).val() )=="" && $.trim( $( "#nvl475" ).val() )==""){
				exibe_alerta( "Informe o valor pelo menos uns dos valores abaixo. Campo obrigat�rio." );
				$( "#nvlmul" ).focus();
				return false;
			}
			if( $.trim( $( "#usu_codigo" ).val() )=="" ){
				exibe_alerta( "Indique um usu�rio. Campo obrigat�rio." );
				$( "#usu_codigo" ).focus();
				return false;
			}
		}
		return true;
	}
}

function busca_mesestalimp( vindo){
		var ccodig = $( "#ccodig" ).val();
		var cmesre = $( "#cmesre" ).val();
		if(vindo=="ccodig"){
				$.ajax( {
						url: "../include/busca_base.php",
						type: "post",
						data: "busca=1026&ccodig="+ccodig,
						success: function( json ){
								if( json=="err" ){
										exibe_alerta( "Não existe rateio para este condomínio." );
								} else {
										eval( "var itens="+json );
										var partes = "<option value=''>Selecione o mês</option>";
										itens.each( function( i, v ){
												partes += "<option value='"+v[ "valor" ]+"'>"+v[ "texto" ]+"</option>";
										} );
										$( "#cmesre" ).html( partes );
								}
						}
				} );
		}
		if(vindo=="cmesre"){
				$.ajax( {
						url: "../include/busca_base.php",
						type: "post",
						data: "busca=1027&cmesre="+cmesre,
						success: function( json ){
								if( json=="err" ){
										exibe_alerta( "Não existe rateio para este condomínio." );
								} else {
										eval( "var itens="+json );
										var partes = "<option value=''>Selecione o condomínio</option>";
										itens.each( function( i, v ){
												partes += "<option value='"+v[ "valor" ]+"'>"+v[ "texto" ]+"</option>";
										} );
										$( "#ccodig" ).html( partes );
								}
						}
				} );
		}
}

function ger_estatistica_load(){
		graph.pie( "#grafipizza" );
		graph.linejson( "#grafilinha", window.atob( ___jsndata ) );
		// MOSTRA ACORDO
		$( "a.md-mostraacordo" ).on( "click", function(){
				// alert( $( this ).attr( "data-ids" ) );
				$( "#exbdadoacordo" ).html( "" );
				$( "#tb-acordos" ).html( "" );
				$( "#tb-pendencia" ).html( "" );
				var json = JSON.parse( $( this ).attr( "data-ids" ) );
				carregando.exibe();
				$.ajax( {
						url: "../include/busca_base.php",
						type: "post",
						data: "busca=1009&basecl="+json[ "basecl" ]+"&ccodig="+json[ "ccodig" ]+"&cnscod="+json[ "cnscod" ]+"&crelmv="+json[ "crelmv" ],
						success: function( result ){
								var json = JSON.parse( result );
								var html = "";
								$( "#exbdadoacordo" ).html( json[ "cnumac" ]+" - Gerado por: "+json["cusuar"]+"<br> Condominio: "+json[ "cpredi" ]+"<br> Proprietario: "+json[ "unidade" ] );
								$( "#tot01" ).html( json[ "tot01" ] );
								$( "#tot02" ).html( json[ "tot02" ] );
								$( "#tot03" ).html( json[ "tot03" ] );
								$( "#tot04" ).html( json[ "tot04" ] );
								$( "#tot05" ).html( json[ "tot05" ] );
								$( "#tot06" ).html( json[ "tot06" ] );
								$( "#tot07" ).html( json[ "tot07" ] );
								$( "#tot08" ).html( json[ "tot08" ] );
								json[ "linhas1" ].each( function( i, v ){
										html +=
										"<tr class=\"even pointer\">"+
										"<td class=\"alincenter\"><strong>"+v["cnumac"]+"</strong></td>"+
										"<td class=\"alincenter\">"+v["ddtvco"]+"</td>"+
										"<td class=\"alinright\">"+v["nvalor"]+"</td>"+
										"<td class=\"alinright\">"+v["nvlmul"]+"</td>"+
										"<td class=\"alinright\">"+v["nvlcor"]+"</td>"+
										"<td class=\"alinright\">"+v["nvljur"]+"</td>"+
										"<td class=\"alinright\">"+v["nvlenc"]+"</td>"+
										"<td class=\"alinright\">"+v["nvldes"]+"</td>"+
										"<td class=\"alinright\">"+v["nvlcus"]+"</td>"+
										"<td class=\"alinright\">"+v["nvlace"]+"</td>"+
										"</tr>";
								} );
								$( "#tb-acordos" ).html( html );
								html = "";
								json[ "linhas2" ].each( function( i, v ){
										html +=
										"<tr class=\"even pointer\">"+
										"<td class=\"alincenter\"><strong>"+v["crelmv"]+"</strong></td>"+
										"<td class=\"alincenter\">"+v["ddtace"]+"</td>"+
										"<td class=\"alincenter\">"+v["ddtvco"]+"</td>"+
										"<td class=\"alinright\">"+v["nvalor"]+"</td>"+
										"<td class=\"alinright\">"+v["parcel"]+"</td>"+
										"<td class=\"alinright\">"+v["cnumbc"]+"</td>"+
										"<td class=\"alincenter\">"+v["c_movi"]+"</td>"+
										"</tr>";
								} );
								$( "#tb-pendencia" ).html( html );
								html = "";
								carregando.esconde();
						}
				} );
		} );
		// FIM DE MOSTRA ACORDO
}

// function fin_honorariopagacon_load(){
//
// 	// MOSTRA ACORDO
// 	$( "a.md-mostraacordo" ).on( "click", function(){
// 		// alert( $( this ).attr( "data-ids" ) );
// 		$( "#exbdadoacordo" ).html( "" );
// 		$( "#tb-acordos" ).html( "" );
// 		$( "#tb-pendencia" ).html( "" );
// 		var json = JSON.parse( $( this ).attr( "data-ids" ) );
// 		carregando.exibe();
// 		$.ajax( {
// 			url: "../include/busca_base.php",
// 			type: "post",
// 			data: "busca=1009&basecl="+json[ "basecl" ]+"&ccodig="+json[ "ccodig" ]+"&cnscod="+json[ "cnscod" ]+"&crelmv="+json[ "crelmv" ],
// 			success: function( result ){
// 				var json = JSON.parse( result );
// 				var html = "";
// 				$( "#exbdadoacordo" ).html( json[ "cnumac" ]+" - Gerado por: "+json["cusuar"]+"<br> Condominio: "+json[ "cpredi" ]+"<br> Proprietario: "+json[ "unidade" ] );
// 				$( "#tot01" ).html( json[ "tot01" ] );
// 				$( "#tot02" ).html( json[ "tot02" ] );
// 				$( "#tot03" ).html( json[ "tot03" ] );
// 				$( "#tot04" ).html( json[ "tot04" ] );
// 				$( "#tot05" ).html( json[ "tot05" ] );
// 				$( "#tot06" ).html( json[ "tot06" ] );
// 				$( "#tot07" ).html( json[ "tot07" ] );
// 				$( "#tot08" ).html( json[ "tot08" ] );
// 				json[ "linhas1" ].each( function( i, v ){
// 					html +=
// 					"<tr class=\"even pointer\">"+
// 					"<td class=\"alincenter\"><strong>"+v["cnumac"]+"</strong></td>"+
// 					"<td class=\"alincenter\">"+v["ddtvco"]+"</td>"+
// 					"<td class=\"alinright\">"+v["nvalor"]+"</td>"+
// 					"<td class=\"alinright\">"+v["nvlmul"]+"</td>"+
// 					"<td class=\"alinright\">"+v["nvlcor"]+"</td>"+
// 					"<td class=\"alinright\">"+v["nvljur"]+"</td>"+
// 					"<td class=\"alinright\">"+v["nvlenc"]+"</td>"+
// 					"<td class=\"alinright\">"+v["nvldes"]+"</td>"+
// 					"<td class=\"alinright\">"+v["nvlcus"]+"</td>"+
// 					"<td class=\"alinright\">"+v["nvlace"]+"</td>"+
// 					"</tr>";
// 				} );
// 				$( "#tb-acordos" ).html( html );
// 				html = "";
// 				json[ "linhas2" ].each( function( i, v ){
// 					html +=
// 					"<tr class=\"even pointer\">"+
// 					"<td class=\"alincenter\"><strong>"+v["crelmv"]+"</strong></td>"+
// 					"<td class=\"alincenter\">"+v["ddtace"]+"</td>"+
// 					"<td class=\"alincenter\">"+v["ddtvco"]+"</td>"+
// 					"<td class=\"alinright\">"+v["nvalor"]+"</td>"+
// 					"<td class=\"alinright\">"+v["parcel"]+"</td>"+
// 					"<td class=\"alinright\">"+v["cnumbc"]+"</td>"+
// 					"<td class=\"alincenter\">"+v["c_movi"]+"</td>"+
// 					"</tr>";
// 				} );
// 				$( "#tb-pendencia" ).html( html );
// 				html = "";
// 				carregando.esconde();
// 			}
// 		} );
// 	} );
// 	// FIM DE MOSTRA ACORDO
// }

var graph = {
	vals: [],
	line_maxlength: 6,
	theme: {
		color: [ "#26B99A", "#34495E", "#BDC3C7", "#3498DB", "#9B59B6", "#8abb6f", "#759c6a", "#bfd3b7" ],
		title: { itemGap: 8, textStyle: { fontWeight: "normal", color: "#408829" } },
		dataRange: { color: ["#1f610a", "#97b58d"] },
		toolbox: { color: ["#408829", "#408829", "#408829", "#408829"] },
		tooltip: { backgroundColor: "rgba(0,0,0,0.5)", axisPointer: { type: "line", lineStyle: { color: "#408829", type: "dashed" }, crossStyle: { color: "#408829" }, shadowStyle: { color: "rgba(200,200,200,0.3)" } } },
		dataZoom: { dataBackgroundColor: "#eee", fillerColor: "rgba(64,136,41,0.2)", handleColor: "#408829" },
		grid: { borderWidth: 0 },
		categoryAxis: { axisLine: { lineStyle: { color: "#408829" } }, splitLine: { lineStyle: { color: ["#eee"] } } },
		valueAxis: { axisLine: { lineStyle: { color: "#408829" } }, splitArea: { show: true, areaStyle: { color: ["rgba(250,250,250,0.1)", "rgba(200,200,200,0.1)"] } }, splitLine: { lineStyle: { color: ["#eee"] } } },
		timeline: { lineStyle: { color: "#408829" }, controlStyle: { normal: { color: "#408829" }, emphasis: { color: "#408829" } } },
		k: { itemStyle: { normal: { color: "#68a54a", color0: "#a9cba2", lineStyle: { width: 1, color: "#408829", color0: "#86b379" } } } },
		map: { itemStyle: { normal: { areaStyle: { color: "#ddd" }, label: { textStyle: { color: "#c12e34" } } }, emphasis: { areaStyle: { color: "#99d2dd" }, label: { textStyle: { color: "#c12e34" } } } } },
		force: { itemStyle: { normal: { linkStyle: { strokeColor: "#408829" } } } },
		chord: { padding: 4, itemStyle: { normal: { lineStyle: { width: 1, color: "rgba(128, 128, 128, 0.5)" }, chordStyle: { lineStyle: { width: 1, color: "rgba(128, 128, 128, 0.5)" } } }, emphasis: { lineStyle: { width: 1, color: "rgba(128, 128, 128, 0.5)" }, chordStyle: { lineStyle: { width: 1, color: "rgba(128, 128, 128, 0.5)" } } } } },
		gauge: { startAngle: 225, endAngle: -45, axisLine: { show: true, lineStyle: { color: [[0.2, "#86b379"], [0.8, "#68a54a"], [1, "#408829"]], width: 8 } }, axisTick: { splitNumber: 10, length: 12, lineStyle: { color: "auto" } }, axisLabel: { textStyle: { color: "auto" } }, splitLine: { length: 18, lineStyle: { color: "auto" } }, pointer: { length: "90%", color: "auto"}, title: { textStyle: { color: "#333" } }, detail: { textStyle: { color: "auto" } } },
		textStyle: { fontFamily: "Arial, Verdana, sans-serif" }
	},
	pie: function( id ){
		if( $( id ).length>0 && $( id ).attr( "data-echart" )!=undefined ){
			var jsonechart = JSON.parse( $( id ).attr( "data-echart" ).replaceall( "'", "\"" ) );
			var jsonlg = [];
			var jsondt = [];
			$.each( jsonechart[ "data" ], function( k, v ){
				jsonlg[ k ] = v[ 1 ];
				jsondt[ k ] = { "value": v[ 0 ], "name": v[ 1 ] };
			} );
			var echartPie = echarts.init( $( id )[ 0 ], graph.theme );
			echartPie.setOption( {
				tooltip: { trigger: "item", formatter: "{a} <br/>{b} : {c} ({d}%)" },
				legend: { x: "center", y: "bottom", data: jsonlg },
				toolbox: { show: true, feature: { magicType: { show: true, type: ["pie", "funnel"], option: { funnel: { x: "25%", width: "50%", funnelAlign: "left", max: 1548 } } }, restore: { show: true, title: "Restaurar" }, saveAsImage: { show: true, title: "Salvar Imagem" } } },
				calculable: true,
				series: [ { name: jsonechart[ "name" ], type: "pie", radius: "55%", center: ["50%", "48%"], data: jsondt } ]
			} );
			var dataStyle = { normal: { label: { show: false }, labelLine: { show: false } } };
			var placeHolderStyle = { normal: { color: "rgba(0,0,0,0)", label: { show: false }, labelLine: { show: false } }, emphasis: { color: "rgba(0,0,0,0)" } };
		}
	},
	line: function( id ){
		if( $( id ).length>0 && $( id ).attr( "data-echart" )!=undefined ){
			var jsonechart = JSON.parse( $( id ).attr( "data-echart" ).replaceall( "'", "\"" ) );
			var echartLine = echarts.init( $( id )[ 0 ], graph.theme );
			var jsonlines = [];
			var jsonlegs = [];
			$.each( jsonechart[ "lines" ], function( k, v ){
				jsonlegs[ k ] = v[ 0 ];
				jsonlines[ k ] = {
					name: v[ 0 ],
					type: 'line',
					smooth: true,
					itemStyle: {
						normal: {
							areaStyle: {
								type: 'default'
							}
						}
					},
					data: v[ 1 ]
			  	};
			} );
			echartLine.setOption( {
				title: {
					text: '',
					subtext: ''
				},
				tooltip: {
					trigger: 'axis'
				},
				legend: {
					x: 220,
					y: 40,
					data: jsonlegs
				},
				toolbox: {
					show: true,
					feature: {
						magicType: {
							show: true,
							title: {
								line: 'Linhas',
								bar: 'Barras',
								stack: 'Pilha',
								tiled: 'Lado a lado'
							},
							type: ['line', 'bar', 'stack', 'tiled']
						},
						restore: {
							show: true,
							title: "Restaurar"
						},
						saveAsImage: {
							show: true,
							title: "Salvar Imagem"
						}
					}
				},
				calculable: true,
				xAxis: [ {
					type: 'category',
					boundaryGap: false,
					data: jsonechart[ "cols" ]
				} ],
				yAxis: [ {
					type: 'value'
			  	} ],
				series: jsonlines
			} );
		}
	},
	linejson: function( id, json, nav ){
		// ATUALIZA QUADRO ACIMA
		var quadro = function( _jsn ){
			var tdr = _jsn[ "lines" ][ 0 ][ 1 ].sum();
			var rav = _jsn[ "lines" ][ 1 ][ 1 ].sum();
			var rac = _jsn[ "lines" ][ 2 ][ 1 ].sum();
			var ra3 = _jsn[ "lines" ][ 3 ][ 1 ].sum();
			var ra6 = _jsn[ "lines" ][ 4 ][ 1 ].sum();
			var vp = tdr-( rav+rac+ra3+ra6 );
			var vtr = ( rav+rac+ra3+ra6 );
			$( "#dadossemestrais div.tdr" ).html( "<strong>(+) Total de Receita:</strong> "+tdr.toCurrencyBRL()+" <i class=\"fa fa-long-arrow-right\"></i> 100,00%" );
			$( "#dadossemestrais div.rav" ).html( "<strong>(-) Recebido at� Vcto.:</strong> "+rav.toCurrencyBRL()+" <i class=\"fa fa-long-arrow-right\"></i> "+( rav/tdr*100 ).toFixed( 2 )+"%" );
			$( "#dadossemestrais div.rac" ).html( "<strong>(-) Recebido at� Car�ncia:</strong> "+rac.toCurrencyBRL()+" <i class=\"fa fa-long-arrow-right\"></i> "+( rac/tdr*100 ).toFixed( 2 )+"%" );
			$( "#dadossemestrais div.ra3" ).html( "<strong>(-) Recebido at� 30 dias:</strong> "+ra3.toCurrencyBRL()+" <i class=\"fa fa-long-arrow-right\"></i> "+( ra3/tdr*100 ).toFixed( 2 )+"%" );
			$( "#dadossemestrais div.ra6" ).html( "<strong>(-) Recebido ap�s 60 dias:</strong> "+ra6.toCurrencyBRL()+" <i class=\"fa fa-long-arrow-right\"></i> "+( ra6/tdr*100 ).toFixed( 2 )+"%" );
			$( "#dadossemestrais div.vp" ).html( "<strong>(=) Valor pendente:</strong> "+vp.toCurrencyBRL()+" <i class=\"fa fa-long-arrow-right\"></i> "+( vp/tdr*100 ).toFixed( 2 )+"%" );
			$( "#dadossemestrais div.vtr" ).html( "<strong>(+) Valor Total Recebido:</strong> "+vtr.toCurrencyBRL()+" <i class=\"fa fa-long-arrow-right\"></i> "+( vtr/tdr*100 ).toFixed( 2 )+"%" );
			$( "#dadossemestrais div.vtp" ).html( "<strong>(=) Valor Total Pendente R$</strong> "+vp.toCurrencyBRL()+" <i class=\"fa fa-long-arrow-right\"></i> "+( vp/tdr*100 ).toFixed( 2 )+"%" );
			$( "#dadossemestrais div.vtdr" ).html( "<strong>(=) Valor Total da Receita R$</strong> "+tdr.toCurrencyBRL()+" <i class=\"fa fa-long-arrow-right\"></i> 100,00%" );
		};

		var label = "l"+window.btoa( id ).replaceall( "=", "" );
		if( graph.vals[ label ]==undefined ){
			graph.vals[ label ] = { "index": 0 }
		}
		var jsn = JSON.parse( json );
		if( nav==-1 ){ graph.vals[ label ][ "index" ]--; }else if( nav==1 ){ graph.vals[ label ][ "index" ]++; }
		if( graph.vals[ label ][ "index" ]>=0 && jsn[ "cols" ].length>=( graph.vals[ label ][ "index" ]+graph.line_maxlength ) ){
			if( graph.vals[ label ][ "index" ]>0 ){
				jsn[ "cols" ].splice( 0, graph.vals[ label ][ "index" ] );
			}
			jsn[ "cols" ].splice( graph.line_maxlength, Number.MAX_VALUE );
			$.each( jsn[ "lines" ], function( i, v ){
				if( graph.vals[ label ][ "index" ]>0 ){
					jsn[ "lines" ][ i ][ 1 ].splice( 0, graph.vals[ label ][ "index" ] );
				}
				jsn[ "lines" ][ i ][ 1 ].splice( graph.line_maxlength, Number.MAX_VALUE );
			} );
			quadro( jsn );
			jsn[ "lines" ].splice( 0, 1 );
			$( id ).attr( "data-echart", JSON.stringify( jsn ).replaceall( "\"", "'" ) );
			graph.line( id );
		}
		else{
			graph.vals[ label ][ "index" ] = 0;
		}
	},
	linejson2: function( id, json, nav ){
		if( $( id ).length>0 && $( id ).attr( "data-echart" )!=undefined ){
			var json = JSON.parse( json );
			var jsonechart = ( !( $( id ).attr( "data-echart" )==undefined || $( id ).attr( "data-echart" )=="" ) )?JSON.parse( $( id ).attr( "data-echart" ).replaceall( "'", "\"" ) ):{"index":0};
			var index = 0;
			var refresh = false;
			if( nav==-1 ){
				if( jsonechart[ "index" ]>0 ){
					index = jsonechart[ "index" ]-1;
					refresh = true;
				}
			}
			else if( nav==1 ){
				if( jsonechart[ "index" ]<( json[ "cols" ].length-1 ) ){
					index = jsonechart[ "index" ]+1;
					refresh = true;
				}
				else{
					index = json[ "cols" ].length-1;
				}
			}
			var jsontxt = "{'cols':[";console.log( json[ "cols" ] );
			$.each( json[ "cols" ][ index ], function( k, v ){
				jsontxt += "'"+v+"',";
			} );
			jsontxt += "],'lines':[[";
			$.each( json[ "lines" ], function( k, v ){
				jsontxt += "]],['"+v[ 0 ]+"',[";
				$.each( v[ 1 ][ index ], function( _k, _v ){
					jsontxt += _v+",";
				} );
			} );
			jsontxt += "]]],'index':"+index+"}";
			jsontxt = jsontxt.replaceall( ",]", "]" );
			jsontxt = jsontxt.replace( "[[]],", "[" );
			if( nav==undefined || refresh==true ){
				$( id ).attr( "data-echart", jsontxt );
				graph.line( id );
			}
		}
	}
};
function ger_forestatistica_load( sobre ){
        if( sobre[ "origem" ].id=="rel_recal" ){
		exibe_alerta( "Rec�lculo efetuado com sucesso!" );
	}
}
function uti_servicodec_load(){
	$( "#modalServicoDec input.simnao" ).on( "click", function(){
		if( $( this ).val()=="S" ){
			$( "#modalServicoDec button.bt-recibo" ).attr( "disabled", false );
		}
		else{
			$( "#modalServicoDec button.bt-recibo" ).attr( "disabled", true );
		}
	} );
	$( "#modalServicoDec button.bt-declaracao" ).on( "click", function(){
		mudasit('dec');
		fajax('uti_cadadec','../sys_sys/uti_servicodec.php','relatorio');
		return false;
	} );
	$( "#modalServicoDec button.bt-recibo" ).on( "click", function(){
		if( $( "#ntotal" ).val().trim()!="" ){
			mudasit('rec');
			fajax('uti_cadadec','../sys_sys/uti_servicodec.php','relatorio', event);
		}
		else{
			swal( "Aviso", "Preencha o valor do recibo.", "warning" );
		}
		return false;
	} );
}
function uti_servicoenvema_load( r ){
		var qtdcb = qtd_marcados( "func" );
		var msg = ( qtdcb==1 )?"1 e-mail foi enviado com sucesso!":qtdcb+" e-mails foram enviados com sucesso!";
		swal( "Sucesso", msg, "success" );
}

function uti_servicoenvsms_load( r ){
		var qtdcb = qtd_marcados( "func" );
		var msg = ( qtdcb==1 )?"1 SMS/Whats foi enviado com sucesso!":qtdcb+" SMS/Whats foram enviados com sucesso!";
		swal( "Sucesso", msg, "success" );
}

// function fin_rateiopagacon_load(){
// 	$( "a.lk-visualizarrateio" ).on( "click", function(){
// 		ajax( "../include/busca_base.php?"+$( "#apagar" ).serialize()+"&id_rtg[]="+$( this ).attr( "data-id" ), "post", "" );
// 	} );
//
// 	$( "#fin_ratpagaant" ).on( "submit", function(){
// 		var calc = {
// 			"nvlpgo": $( "#nvlpgo" ).val().strToFloat(),
// 			"ntotal": $( "#ntotal" ).val().strToFloat(),
// 			"nvlant": $( "#nvlant" ).val().strToFloat()
// 		};
// 		if( ( calc[ "ntotal" ]+calc[ "nvlpgo" ] )<=calc[ "nvlant" ] ){
// 			carregando.exibe();
// 			$.ajax( {
// 				url: "../sys_sys/fin_rateiopagafor.php",
// 				type: "post",
// 				data: $( "#fin_ratpagaant" ).serialize(),
// 				success: function( response ){
// 					carregando.esconde();
// 					ajax( "../include/busca_base.php?"+$( "#apagar" ).serialize()+"&id_rtg[]="+$( "#id_rtg" ).val(), "post", "" );
// 				}
// 			} );
// 		}
// 		else{
// 			swal( "Aviso", "Insira um valor igual ou menor ao saldo a pagar.", "warning" );
// 		}
// 		return false;
// 	} );
//
// 	$( "#modalPagaRateio button.bt-recibo" ).on( "click", function(){
// 		var serial = $( "#fin_ratpagaant" ).serialize()
// 			.replace( "gravar=SIM&", "" )
// 			.replace( "funcao=inc&", "" )
// 			+"&situacnao=rec";
// 		console.log( serial );
// 		$.ajax( {
// 			url: "../sys_sys/fin_rateiopagacon.php?"+serial,
// 			type: "post",
// 			data: serial,
// 			success: function( response ){
// 				$( "#relatorio" ).html( response );
// 			}
// 		} );
// 	} );
//
// 	$( "#modalPagaRateio button.bt-relacao" ).on( "click", function(){
// 		var serial = $( "#fin_ratpagaant" ).serialize()
// 			.replace( "gravar=SIM&", "" )
// 			.replace( "funcao=inc&", "" )
// 			+"&situacnao=rel";
// 		$.ajax( {
// 			url: "../sys_sys/fin_rateiopagacon.php?"+serial,
// 			type: "post",
// 			data: serial,
// 			success: function( response ){
// 				$( "#relatorio" ).html( response );
// 			}
// 		} );
// 	} );
//
// 	$( "#modalPagaRateio button.bt-excluir" ).on( "click", function(){
// 		verificaEnviaCheckBox( "fin_ratpagaant", function(){
// 			verificaExcluir( function( msgsucesso ){
// 				carregando.exibe();
// 				$.ajax( {
// 					url: "../sys_sys/fin_rateiopagafor.php",
// 					type: "post",
// 					data: $( "#fin_ratpagaant" ).serialize().replace( "gravar=SIM&", "" ).replace( "funcao=inc&", "" )+"&exclui=SIM",
// 					success: function( response ){
// 						carregando.esconde();
// 						ajax( "../include/busca_base.php?"+$( "#apagar" ).serialize()+"&id_rtg[]="+$( "#id_rtg" ).val(), "post", "" );
// 						msgsucesso();
// 					}
// 				} );
// 			} );
// 		} );
// 		return false;
// 	} );
//
// 	$( "#modalPagaRateio button.bt-confirmar" ).on( "click", function(){
// 		$( "#sp-nvlant" ).html( $( "#totalpag" ).html() );
// 		$( "#nvlant" ).val( $( "#totalpag" ).html() );
// 		$( "#sp-nvlsdo" ).html( $( "#totalpag" ).html() );
// 		$( "#nvlsdo" ).val( $( "#totalpag" ).html() );
// 		$( "#nmulta_2" ).val( $( "#nmulta" ).val() );
// 		$( "#njuros_2" ).val( $( "#njuros" ).val() );
// 		$( "#ncorre_2" ).val( $( "#ncorre" ).val() );
// 		$( "#ncusta_2" ).val( $( "#ncusta" ).val() );
// 		$( "#nmu475_2" ).val( $( "#nmu475" ).val() );
// 		$( "#nhonos_2" ).val( $( "#nhonos" ).val() );
// 		$( "#subform" ).fadeIn();
// 	} );
// }

function verificaExcluir( func, funcElse = () => {} ){
		swal( {
				title: "Excluir?",
				text: "Você realmente deseja excluir este item?",
				icon: "warning",
				buttons: true,
				dangerMode: true,
		} )
		.then( ( willDelete ) => {
				if( willDelete ){
						func( function(){ swal( "Sucesso", "Item excluído com sucesso!", "success" ); } );
				} else {
						funcElse();
				}
		} );
}

function calc_valorhon( totalpri,totalrec,totalpago){ // OKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKK
		var n_totalpri = $( "#"+totalpri ).html().strToFloat();
		var n_totalrec = $( "#"+totalrec ).val().strToFloat();
		$( "#"+totalpago ).html( ( (n_totalpri*n_totalrec)/100 ).formatMoney() );
		// TOTAIS
		var n_cotapag = $( "#cotcota" ).html().strToFloat();
		var n_multpag = $( "#multpag" ).html().strToFloat();
		var n_jurpag  = $( "#jurpag" ).html().strToFloat();
		var n_corrpag = $( "#corrpag" ).html().strToFloat();
		var n_honpag  = $( "#honpag" ).html().strToFloat();
		var n_cuspag  = $( "#cuspag" ).html().strToFloat();
		var n_475pag  = $( "#475pag" ).html().strToFloat();
		var n_despag  = $( "#despag" ).html().strToFloat();
		$( "#totalpag" ).html( ( (n_multpag+n_jurpag+n_corrpag+n_honpag+n_cuspag+n_475pag) ).formatMoney() );
		$( "#totfinal" ).val( ( (n_multpag+n_jurpag+n_corrpag+n_honpag+n_cuspag+n_475pag) ).formatMoney() );
}
function calc_valor( totalpri,totalrec,totalpago){ // OKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKK
		var n_totalpri = $( "#"+totalpri ).html().strToFloat();
		var n_totalrec = $( "#"+totalrec ).val().strToFloat();
		$( "#"+totalpago ).html( ( (n_totalpri*n_totalrec)/100 ).formatMoney() );
		// TOTAIS
		var n_cotapag = $( "#cotcota" ).html().strToFloat();
		var n_perdpag = $( "#perdpag" ).html().strToFloat();
		var n_multpag = $( "#multpag" ).html().strToFloat();
		var n_corrpag = $( "#corrpag" ).html().strToFloat();
		var n_jurpag  = $( "#jurpag" ).html().strToFloat();
		var n_cuspag  = $( "#cuspag" ).html().strToFloat();
		var n_475pag  = $( "#475pag" ).html().strToFloat();
		var n_honpag  = $( "#honpag" ).html().strToFloat();
		$( "#totalpag" ).html( ( (n_cotapag-n_perdpag+n_multpag+n_corrpag+n_jurpag+n_cuspag+n_475pag+n_honpag) ).formatMoney() );
		$( "#totfinal" ).val( ( (n_cotapag-n_perdpag+n_multpag+n_corrpag+n_jurpag+n_cuspag+n_475pag+n_honpag) ).formatMoney() );
}







///////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////
/////////////// PARA BAIXO FUN��ES VELHAS
///////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////











































































// function adm_dadcondominio_load( sobre ){
// 	if( sobre[ "origem" ].tagName=="FORM" ){
// 		if( $( "#funcao" ).val()=="inc" ){
// 			$( "#ccodig" ).blur( function(){
// 				$.ajax( {
// 					url: "../include/busca_base.php",
// 					type: "post",
// 					data: "busca=008&ccodig="+$( "#ccodig" ).val(),
// 					success: function( result ){
// 						if( result=="1" ){
// 							exibe_alerta( msgs[ "cta_rep" ] );
// 							$( "#ccodig" ).focus();
// 						}
// 					}
// 				} );
// 			} );
// 		}
// 	}
// }

//// rotinas de FRA��O
// function adm_forfracao_load(){
// 	if( $( "input.nfrac" ).is( "input" ) ){
// 		$( "input.nfrac" ).blur( function(){
// 			var id_pro = $( this ).parents( "td" ).attr( "class" ).toString().split( "id-" )[ 1 ].split( " " )[ 0 ];
// 			var nfrac = $( this ).val();
// 			var base = $( "#base" ).val();
// 			var ntotct = $( "#ntotct" ).val();
// 			$.ajax( {
// 				url: "../include/busca_base.php",
// 				type: "post",
//
// 				data: "busca=009&id_pro="+id_pro+"&nfrac="+nfrac+"&ntotct="+ntotct+"&base="+base,
// 				success: function( json ){ //alert(json);
// 					if( json=="err" ){
// 						exibe_alerta( msgs[ "fra_err" ] );
// 					}
// 					else{
// 						json = json.split( "|" );
// 						totvl = json[ 0 ];
// 						totfr = json[ 1 ];
// 						$( ".total-fracao input").val( totfr );
// 						$( ".total-digitado input" ).val( totvl );
// 					}
// 				}
// 			} );
// 		} );
// 	}
// }















































//// rotinas de OCORRENCIA
function adm_conocorrencia_validacao( sobre ){
	if( sobre[ "origem" ].id=="apagar" ){
		if( qtd_marcados( "func" )==0 ){
			exibe_alerta( msgs[ "sel_reg" ] );
			return false;
		}
	}
	return true;
}

function adm_conocorrencia_load(){
	pagina_atual = 1;
	paginacao( 12, function( results ){
		var men_aceita = $( "#men_aceita" ).val();
		var html = "";
		results.each( function( i, v ){
			html += "<tr class='"+( ( i%2==0 )?"p":"i" )+" id-"+v[ "id" ]+"'"+( i==0 )?" style='border-top: 1px solid #999;'":""+">";
			html += "<td><a href='#' onclick='return ajax( \"adm_forocorrencia.php?funcao=alt&id_cod="+v[ "id" ]+"&men_aceita="+men_aceita+"\", \"post\", \"popup\" )'>"+v[ "nome" ]+"</a></td>";
			html += "<td>"+( v[ "ddtocos" ]==null?"":v[ "ddtocos" ] )+"</td>";
			html += "<td>"+( v[ "emiails" ]==null?"":v[ "emails" ] )+"</td>";
			html += "<td style='text-align: center;'><input type='checkbox' name='id_cod[]' class='func' />";
			html += "<input type='hidden' name='"+v[ "id" ]+"' id='"+v[ "id" ]+"' value='"+v[ "flag" ]+"' /></td></tr>";
		} );

		$( "table.registros" ).append( html );
	} );
}

function adm_forocorrencia_validacao( sobre ){
	if( sobre[ "origem" ].tagName=="FORM" ){
		if( $.trim( $( "#ddtoco" ).val() )=="" ){
			exibe_alerta( "Informe a data. Campo obrigat�rio." );
			$( "#ddtoco" ).focus();
			return false;
		}
		if( $.trim( $( "#cpropi" ).val() )=="" ){
			exibe_alerta( "Informe o nome do relator. Campo obrigat�rio." );
			$( "#cpropi" ).focus();
			return false;
		}
		if( $.trim( $( "#cemail" ).val() )=="" ){
			exibe_alerta( "Informe o e-mail do relator. Campo obrigat�rio." );
			$( "#cemail" ).focus();
			return false;
		}
		if( $.trim( $( "#cocorp" ).val() )=="" ){
			exibe_alerta( "Informe a ocorr�ncia. Campo obrigat�rio." );
			$( "#cocorp" ).focus();
			return false;
		}
		return true;
	}
	else{
		return true;
	}
}

function adm_forocorrencia_load( sobre ){
	if( sobre[ "origem" ].tagName=="FORM" ){
		var id = $( sobre[ "origem" ] ).find( "input[name=id_cod]" ).val();
		var fn = $( sobre[ "origem" ] ).find( "input[name=funcao]" ).val();
		if( fn=="inc" ){
			var men_aceita = $( "#men_aceita" ).val();
			ajax( "adm_conocorrencia.php?men_aceita="+men_aceita+"&socont=sim", "post", "!conteudo" );
		}
		else{
			var dados = [
				$( sobre[ "origem" ] ).find( "input[name=ddtoco]" ).val(),
				$( sobre[ "origem" ] ).find( "input[name=cpropi]" ).val(),
				$( sobre[ "origem" ] ).find( "input[name=cemail]" ).val()
			];
		}
		$( "tr.id-"+id+" td" ).each( function( i, v ){
			if( i<4 ){
				if( i==0 ){
					$( v ).find( "a" ).html( dados[ i ] );
				}
				else{
					v.innerHTML = dados[ i ];
				}
			}
		} );

		if( fn=="inc" ){
			exibe_alerta( msgs[ "reg_inc" ] );
		}
		else{
			exibe_alerta( msgs[ "reg_alt" ] );
		}
	}
}


//// rotinas de PROPRIETARIO
function adm_conproprietario_validacao( sobre ){
	if( sobre[ "origem" ].id=="apagar" ){
		if( qtd_marcados( "func" )==0 ){
			exibe_alerta( msgs[ "sel_reg" ] );
			return false;
		}
	}
	if( sobre[ "origem" ].className=="proprietarios" ){
		if( qtd_marcados( "func" )==0 ){
			exibe_alerta( msgs[ "sel_reg" ] );
			return false;
		}
		else if( qtd_marcados( "func" )>1 ){
			exibe_alerta( msgs[ "um_reg" ] );
			return false;
		}
		else{
			var cbox = $( "input.func" );
			for( var i=0;i<cbox.length;i++ ){
				if( cbox[ i ].checked==true ){
					var base = $( cbox[ i ] ).parents( "tr" ).find( "td" )[ 3 ].innerHTML;
					ajax_url_replace( "%#%", base );
					return true;
				}
			}
		}
	}

	return true;
}

function busca_basepropu (){
	var cnumap = $( "#cnumap" ).val();
	var cbloco = $( "#cbloco" ).val();
	var base = $( "#base" ).val();
	$.ajax( {
		url: "../include/busca_base.php",
		type: "post",
		data: "busca=031&base="+base+"&cnumap="+cnumap+"&cbloco="+cbloco,
		success: function( json ){
			if( json!="null" ){
				exibe_alerta( "Unidade j� cadastrada. Retifique!" );
				$( "#cnumap" ).focus();
			} else {
				return true;
			}
		}
	} );
}

function busca_basepropb (){
	var cnumap = $( "#cnumap" ).val();
	var cbloco = $( "#cbloco" ).val();
	var base = $( "#base" ).val();
	$.ajax( {
		url: "../include/busca_base.php",
		type: "post",
		data: "busca=032&base="+base+"&cnumap="+cnumap+"&cbloco="+cbloco,
		success: function( json ){
			if( json!="null" ){
				exibe_alerta( "Unidade e Bloco j� cadastrado. Retifique!" );
				$( "#cbloco" ).focus();
			} else {
				return true;
			}
		}
	} );
}

//function adm_conproprietario_load(){
//	pagina_atual = 1;
//	var filtro = $( "#filtro_atual" ).val();
//	filtro = ( filtro!="" )?( ( filtro.length==1 )?filtro+"*":"*"+filtro+"*" ):"";
//	var men_aceita = $( "#men_aceita" ).val();
//	var base = $( "#base" ).val();
//	var ccodig = $( "#ccodig" ).val();
//	var tembloc = $( "#tembloc" ).val();
//	var vars = "&men_aceita="+men_aceita+"&base="+base+"&ccodig="+ccodig+"&tembloc="+tembloc;
//	paginacao( 17, function( results ){
//		var men_aceita = $( "#men_aceita" ).val();
//		var base = $( "#base" ).val();
//		var ccodig = $( "#ccodig" ).val();
//		var tembloc = $( "#tembloc" ).val();
//		var html = "";
//		results.each( function( i, v ){
//			html += "<tr class='"+( ( i%2==0 )?"p":"i" )+" id-"+v[ "id" ]+"'"+( i==0?" style='border-top: 1px solid #999;'":"" )+">";
//			html += "<td>"+( v[ "cnscod" ]==null?"":v[ "cnscod" ] )+"</td>";
//			html += "<td class='alincenter'>"+( v[ "cnumap" ]==null?"":v[ "cnumap" ] )+"</td>";
//			html += "<td class='alinright'>"+( v[ "n_frac" ]==null?"":v[ "n_frac" ] )+"</td>";
//			html += "<td><a href='#' onclick='return ajax( \"adm_forproprietario.php?funcao=alt&id_pro="+v[ "id" ]+"&men_aceita="+men_aceita+"&base="+base+"&ccodig="+ccodig+"\", \"post\", \"popup\" )'>"+v[ "nome" ]+"</a></td>";
//			html += "<td>"+( v[ "cpfcnpj" ]==null?"":v[ "cpfcnpj" ] )+"</td>";
//			html += "<td>"+( v[ "ctelef" ]==null?"":v[ "ctelef" ] )+"</td>";
//			html += "<td style='text-align: center;'><input type='checkbox' name='id_pro[]' value='"+v[ "id" ]+"' class='func' />";
//			html += "<input type='hidden' name='"+v[ "id" ]+"' id='"+v[ "id" ]+"' value='"+v[ "flag" ]+"' /></td></tr>";
//		} );
//		$( "table.registros" ).append( html );
//	}, filtro, vars );
//}

function adm_forproprietario_validacao( sobre ){
	if( sobre[ "origem" ].tagName=="FORM" ){
		if( $.trim( $( "#cnomes" ).val() )=="" ){
			exibe_alerta( "Informe o nome do propriet�rio. Campo obrigat�rio." );
			$( "#cnomes" ).focus();
			return false;
		}
		if( $.trim( $( "#pro_sexo" ).val() )=="" ){
			exibe_alerta( "Informe o sexo do propriet�rio. Campo obrigat�rio." );
			$( "#pro_sexo" ).focus();
			return false;
		}
		if( $.trim( $( "#cnumap" ).val() )=="" ){
			exibe_alerta( "Informe a unidade do propriet�rio. Campo obrigat�rio." );
			$( "#cnumap" ).focus();
			return false;
		}
		if( $.trim( $( "#cli_cep" ).val() )=="" ){
			exibe_alerta( "Informe o cep. Campo obrigat�rio." );
			$( "#cli_cep" ).focus();
			return false;
		}
		if( $.trim( $( "#cidades" ).val() )=="" ){
			exibe_alerta( "Escolha a U.F. e a cidade. Campo obrigat�rio." );
			$( "#cidades" ).focus();
			return false;
		}
		if( $.trim( $( "#cender" ).val() )=="" ){
			exibe_alerta( "Informe o endere�o do funcion�rio. Campo obrigat�rio." );
			$( "#cender" ).focus();
			return false;
		}
		if( $.trim( $( "#cnumer" ).val() )=="" ){
			exibe_alerta( "Informe o n�mero. Campo obrigat�rio." );
			$( "#cnumer" ).focus();
			return false;
		}
		return true;
	}
	else if( sobre[ "origem" ].className=="incluir" ){
		if( $( "#nunida" ).val()==$( "#totuni" ).val() ){
			exibe_alerta( msgs[ "qtd_max" ] );
			return false;
		}
	}
	return true;
}

function adm_forproprietario_load( sobre ){
	if( sobre[ "origem" ].tagName=="FORM" ){
		var id = $( sobre[ "origem" ] ).find( "input[name=id_pro]" ).val();
		var fn = $( sobre[ "origem" ] ).find( "input[name=funcao]" ).val();
	        var base = $( "#base" ).val();
		var men_aceita = $( "#men_aceita" ).val();
		ajax( "adm_conproprietario.php?men_aceita="+men_aceita+"&base="+base+"&socont=sim", "post", "!conteudo" );
		//var diferenca = 0;
		//$( "tr.id-"+id+" td" ).each( function( i, v ){
		//	if( v.innerHTML.toString().indexOf( "checkbox" )==-1 ){
		//		if( i==2 ){
		//			if( dados[ 2 ]!="" ){
		//				v.innerHTML = dados[ 2 ];
		//			}
		//			else{
		//				diferenca = 1;
		//			}
		//		}
		//		else if( ( dados[ 2 ]=="" && i==3 ) || ( dados[ 2 ]!="" && i==4 ) ){
		//			$( v ).find( "a" ).html( dados[ i+diferenca ] );
		//		}
		//		else{
		//			v.innerHTML = dados[ i+diferenca ];
		//		}
		//	}
		//} );

		if( fn=="inc" ){
			exibe_alerta( msgs[ "reg_inc" ] );
		}
		else{
			exibe_alerta( msgs[ "reg_alt" ] );
		}
	}
}

//// rotinas de Custas
function fin_forcustas_validacao( sobre ){
	if( sobre[ "origem" ].id=="apagarar" ){
		if( qtd_marcados( "func" )==0 ){
			exibe_alerta( msgs[ "sel_reg" ] );
			return false;
		}
	}
	return true;
}


//// rotinas de MOVIMENTACAO DE BANCO
//function fin_movmosbanco_validacao( sobre ){
//	if( sobre[ "origem" ].id=="apagar" ){
//		if( qtd_marcados( "func" )==0 ){
//			exibe_alerta( msgs[ "sel_reg" ] );
//			return false;
//		}
//	}
//	return true;
//}

//function fin_movmosbanco_load(){
//	pagina_atual = 1;
//	var filtro = $( "#filtro_atual" ).val();
//	filtro = ( filtro!="" )?( ( filtro.length==1 )?filtro+"*":"*"+filtro+"*" ):"";
//	var men_aceita = $( "#men_aceita" ).val();
//	var ccodbc = $( "#ccodbc" ).val();
//	var id_ban = $( "#id_ban" ).val();
//	var vars = "&men_aceita="+men_aceita+"&ccodbc="+ccodbc+"&id_ban="+id_ban;
//	paginacao( 20, function( results ){
//		var men_aceita = $( "#men_aceita" ).val();
//	        var ccodbc = $( "#ccodbc" ).val();
//		var id_ban = $( "#id_ban" ).val();
//		var html = "";
//		results.each( function( i, v ){
//			html += "<tr class='"+( ( i%2==0 )?"p":"i" )+" id-"+v[ "id" ]+"'"+( i==0?" style='border-top: 1px solid #999;'":"" )+">";
//			html += "<td><a href='#' onclick='return ajax( \"fin_forlanbanco.php?funcao=alt&id_mvf="+v[ "id" ]+"&men_aceita="+men_aceita+"&id_ban="+id_ban+"\", \"post\", \"popup\" )'>"+v[ "nome" ]+"</a></td>";
//			html += "<td>"+( v[ "cconta" ]==null?"":v[ "cconta" ] )+"</td>";
//			html += "<td>"+( v[ "cdb_cr" ]==null?"":v[ "cdb_cr" ] )+"</td>";
//			html += "<td>"+( v[ "cchequ" ]==null?"":v[ "cchequ" ] )+"</td>";
//			html += "<td>"+( v[ "chisto" ]==null?"":v[ "chisto" ] )+"</td>";
//			html += "<td class='alinright'>"+( v[ "nvalor" ]==null?"":v[ "nvalor" ] )+"</td>";
//			html += "<td style='text-align: center;'><input type='checkbox' name='id_mvf[]' value='"+v[ "id" ]+"' class='func' />";
//			html += "<input type='hidden' name='"+v[ "id" ]+"' id='"+v[ "id" ]+"' value='"+v[ "flag" ]+"' /></td></tr>";
//		} );
//
//		$( "table.registros" ).append( html );
//	}, filtro, vars );
//}

//function fin_forlanbanco_validacao( sobre ){
//	if( sobre[ "origem" ].id=="apagarbco" ){
//		if( qtd_marcados( "funcbco" )==0 ){
//			exibe_alerta( msgs[ "sel_reg" ] );
//			return false;
//		}
//	}
//	if( sobre[ "origem" ].id=="rel_fin" ){
//		if( $.trim( $( "#filtr1" ).val() )=="" ){
//			exibe_alerta( "Informe uma data inicial. Campo obrigat�rio." );
//			$( "#filtr1" ).focus();
//			return false;
//		}
//		if( $.trim( $( "#filtr2" ).val() )=="" ){
//			exibe_alerta( "Informe uma data final. Campo obrigat�rio." );
//			$( "#filtr2" ).focus();
//			return false;
//		}
//	}
//	if( sobre[ "origem" ].id=="arq_cads" ){
//		if( $.trim( $( "#arquivo" ).val() )=="" ){
//			exibe_alerta( "Selecione o arquivo no seu computador. Campo obrigat�rio." );
//			$( "#arquivo" ).focus();
//			return false;
//		}
//	}
//	if( sobre[ "origem" ].id=="mov_fin" ){
//	        var moscusta = $( "#moscusta" ).val();
//		if( $.trim( $( "#fin_conta" ).val() )=="" ){
//			exibe_alerta( "Selecione uma conta. Campo obrigat�rio." );
//			$( "#fin_conta" ).focus();
//			return false;
//		}
//
//		if( $.trim( $( "#fin_historico" ).val() )=="" ){
//			exibe_alerta( "Informe um hist�rico. Campo obrigat�rio." );
//			$( "#fin_historico" ).focus();
//			return false;
//		}
//		if( $.trim( $( "#fin_data" ).val() )=="" ){
//			exibe_alerta( "Informe uma data. Campo obrigat�rio." );
//			$( "#fin_data" ).focus();
//			return false;
//		}
//		if( $.trim( $( "#fin_documento" ).val() )=="" ){
//			exibe_alerta( "Informe o n�mero do documento. Campo obrigat�rio." );
//			$( "#fin_documento" ).focus();
//			return false;
//		}
//		if( $.trim( $( "#fin_total" ).val() )=="" ){
//			exibe_alerta( "Informe o valor do lan�amento. Campo obrigat�rio." );
//			$( "#fin_total" ).focus();
//			return false;
//		}
//		if(moscusta==1){
//			if( $.trim( $( "#base" ).val() )=="" ){
//				exibe_alerta( "Selecione o condom�nio. Campo obrigat�rio." );
//				$( "#base" ).focus();
//				return false;
//			}
//			if( $.trim( $( "#cnscodp" ).val() )=="" ){
//				exibe_alerta( "Selecione um propriet�rio. Campo obrigat�rio." );
//				$( "#cnscodp" ).focus();
//				return false;
//			}
//		}
//		return true;
//	}
//	else{
//		return true;
//	}
//}

//function fin_forlanbanco_load( sobre ){
//	if( sobre[ "origem" ].tagName=="FORM" ){
//		var id = $( sobre[ "origem" ] ).find( "input[name=id_mvf]" ).val();
//		var fn = $( sobre[ "origem" ] ).find( "input[name=funcao]" ).val();
//		var men_aceita = $( "#men_aceita" ).val();
//		var ccodbc = $( "#ccodbc" ).val();
//		ajax( "fin_movmosbanco.php?men_aceita="+men_aceita+"&ccodbc="+ccodbc+"&socont=sim", "post", "!conteudo", "event");
//
//		if( fn=="inc" ){
//			exibe_alerta( msgs[ "reg_inc" ] );
//		}
//		else if( fn=="alt" ){
//			exibe_alerta( msgs[ "reg_alt" ] );
//		}
//	}
//
//	if( sobre[ "origem" ].id=="btexcluir" ){
//		var id = $( sobre[ "origem" ] ).find( "input[name=id_mvf]" ).val();
//		var fn = $( sobre[ "origem" ] ).find( "input[name=funcao]" ).val();
//		var men_aceita = $( "#men_aceita" ).val();
//		var ccodbc = $( "#ccodbc" ).val();
//		ajax( "fin_movmosbanco.php?men_aceita="+men_aceita+"&ccodbc="+ccodbc+"&socont=sim", "post", "!conteudo", "event" );
//		exibe_alerta( msgs[ "reg_exc" ] );
//	}
//
//
//	//if( sobre[ "origem" ].className.indexOf( "botao excluir" )!=-1 ){
//	//	var men_aceita = $( "#men_aceita" ).val();
//	//	var ccodbc = $( "#ccodbc" ).val();
//	//	ajax( "fin_movmosbanco.php?men_aceita="+men_aceita+"&ccodbc="+ccodbc+"&socont=sim", "post", "!conteudo", "event" );
//	//}
//}

//// rotinas de MOVIMENTACAO DE PREVISAO
//function fin_conprevisao_load(){
//	pagina_atual = 1;
//	var filtro = $( "#filtro_atual" ).val();
//	filtro = ( filtro!="" )?( ( filtro.length==1 )?filtro+"*":"*"+filtro+"*" ):"";
//	var men_aceita = $( "#men_aceita" ).val();
//	var ccodbc = $( "#ccodbc" ).val();
//	var base = $( "#base" ).val();
//	var dataagora = $( "#dataagora" ).val();
//	var vars = "&men_aceita="+men_aceita+"&ccodbc="+ccodbc+"&base="+base;
//	paginacao( 21, function( results ){
//		var men_aceita = $( "#men_aceita" ).val();
//		var ccodbc = $( "#ccodbc" ).val();
//		var base = $( "#base" ).val();
//	        var dataagora = $( "#dataagora" ).val();
//		var html = "";
//		results.each( function( i, v ){
			// html += "<tr class='"+( ( i%2==0 )?"p":"i" )+" id-"+v[ "id" ]+"'"+( i==0?" style='border-top: 1px solid #999;'":"" )+">";
      //                  if(v[ "nome" ]<dataagora){
			//    html += "<td><a href='#' onclick='return ajax( \"fin_forlanprevisao.php?funcao=alt&id_pre="+v[ "id" ]+"&men_aceita="+men_aceita+"&ccodbc="+ccodbc+"&base="+base+"\", \"post\", \"popup\" )'><font color='#ff0000'>"+v[ "nome" ]+"</a></td>";
			// } else {
			//    html += "<td><a href='#' onclick='return ajax( \"fin_forlanprevisao.php?funcao=alt&id_pre="+v[ "id" ]+"&men_aceita="+men_aceita+"&ccodbc="+ccodbc+"&base="+base+"\", \"post\", \"popup\" )'>"+v[ "nome" ]+"</a></td>";
			// }
//			html += "<td>"+( v[ "cconta" ]==null?"":v[ "cconta" ] )+"</td>";
//			html += "<td>"+( v[ "cdb_cr" ]==null?"":v[ "cdb_cr" ] )+"</td>";
//			html += "<td>"+( v[ "cchequ" ]==null?"":v[ "cchequ" ] )+"</td>";
//			html += "<td><a href='#' title=\"Hist�rico Completo "+v["chisto"]+"\">"+v["chisto"]+"</a></td>";
//			html += "<td class='alinright'>"+( v[ "nvalor" ]==null?"":v[ "nvalor" ] )+"</td>";
//			html += "<td style='text-align: center;'><input type='checkbox' name='id_pre[]' value='"+v[ "id" ]+"' class='func' />";
//			html += "<input type='hidden' name='"+v[ "id" ]+"' id='"+v[ "id" ]+"' value='"+v[ "flag" ]+"' /></td></tr>";
//		} );
//
//		$( "table.registros" ).append( html );
//	}, filtro, vars );
//}

//function fin_forlanprevisao_validacao( sobre ){
//	if( sobre[ "origem" ].id=="prev_rel" ){
//		if( $.trim( $( "#filtr1" ).val() )=="" ){
//			exibe_alerta( "Informe uma data inicial. Campo obrigat�rio." );
//			$( "#filtr1" ).focus();
//			return false;
//		}
//		if( $.trim( $( "#filtr2" ).val() )=="" ){
//			exibe_alerta( "Informe uma data final. Campo obrigat�rio." );
//			$( "#filtr2" ).focus();
//			return false;
//		}
//	}
//
//	if( sobre[ "origem" ].id=="cad_tra" ){
//		if( $.trim( $( "#banc_idd" ).val() )=="" ){
//			exibe_alerta( "Selecione um banco para transfer�ncia. Campo obrigat�rio." );
//			$( "#banc_idd" ).focus();
//			return false;
//		}
//	}
//	if( sobre[ "origem" ].id=="apagar" ){
//		if( sobre[ "origem" ].id=="apagar" ){
//			if( qtd_marcados( "func" )==0 ){
//				exibe_alerta( msgs[ "sel_reg" ] );
//				return false;
//			}
//		}
//		return true;
//	}
//	else if( sobre[ "origem" ].id=="mov_fin" ){
//		if( $.trim( $( "#fin_conta" ).val() )=="" ){
//			exibe_alerta( "Selecione uma conta. Campo obrigat�rio." );
//			$( "#fin_conta" ).focus();
//			return false;
//		}
//		if( $.trim( $( "#fin_historico" ).val() )=="" ){
//			exibe_alerta( "Informe um hist�rico. Campo obrigat�rio." );
//			$( "#fin_historico" ).focus();
//			return false;
//		}
//		if( $.trim( $( "#forma" ).val() )=="" ){
//			exibe_alerta( "Indique a forma de pagamento. Campo obrigat�rio." );
//			$( "#forma" ).focus();
//			return false;
//		}
//		if( $.trim( $( "#fin_data" ).val() )=="" ){
//			exibe_alerta( "Informe uma data. Campo obrigat�rio." );
//			$( "#fin_data" ).focus();
//			return false;
//		}
//		if( $.trim( $( "#fin_documento" ).val() )=="" ){
//			exibe_alerta( "Informe o n�mero do documento. Campo obrigat�rio." );
//			$( "#fin_documento" ).focus();
//			return false;
//		}
//		if( $.trim( $( "#fin_total" ).val() )=="" ){
//			exibe_alerta( "Informe o valor do lan�amento. Campo obrigat�rio." );
//			$( "#fin_total" ).focus();
//			return false;
//		}
//		return true;
//	}
//	else{
//		return true;
//	}
//}
//
//function fin_forlanprevisao_load( sobre ){
//	if( sobre[ "origem" ].tagName=="FORM" ){
//		var id = $( sobre[ "origem" ] ).find( "input[name=id_pre]" ).val();
//		var fn = $( sobre[ "origem" ] ).find( "input[name=funcao]" ).val();
//		var men_aceita = $( "#men_aceita" ).val();
//		var ccodbc = $( "#ccodbc" ).val();
//		var base = $( "#base" ).val();
//		ajax( "fin_conprevisao.php?men_aceita="+men_aceita+"&ccodbc="+ccodbc+"&base="+base+"&socont=sim", "post", "!conteudo" );
//
//		if( fn=="inc" ){
//			exibe_alerta( msgs[ "reg_inc" ] );
//		}
//		else if( fn=="alt" ){
//			exibe_alerta( msgs[ "reg_alt" ] );
//		}
//		else {
//			exibe_alerta( msgs[ "reg_tra" ] );
//		}
//	}
//
//	if( sobre[ "origem" ].id=="btexcluir" ){
//		var id = $( sobre[ "origem" ] ).find( "input[name=id_pre]" ).val();
//		var fn = $( sobre[ "origem" ] ).find( "input[name=funcao]" ).val();
//		var men_aceita = $( "#men_aceita" ).val();
//		var ccodbc = $( "#ccodbc" ).val();
//		var base = $( "#base" ).val();
//		ajax( "fin_conprevisao.php?men_aceita="+men_aceita+"&ccodbc="+ccodbc+"&base="+base+"&socont=sim", "post", "!conteudo" );
//		exibe_alerta( msgs[ "reg_exc" ] );
//	}
//}
//// rotinas de MOVIMENTACAO DE PREVISAO e REALIZ�VEL
function fin_conprevmovreal_load(){
	pagina_atual = 1;
	var filtro = $( "#filtro_atual" ).val();
	filtro = ( filtro!="" )?( ( filtro.length==1 )?filtro+"*":"*"+filtro+"*" ):"";
	var men_aceita = $( "#men_aceita" ).val();
	var ccodbc = $( "#ccodbc" ).val();
	var base = $( "#base" ).val();
	var dataagora = $( "#dataagora" ).val();
	var vars = "&men_aceita="+men_aceita+"&ccodbc="+ccodbc+"&base="+base;
	paginacao( 21, function( results ){
		var men_aceita = $( "#men_aceita" ).val();
		var ccodbc = $( "#ccodbc" ).val();
		var base = $( "#base" ).val();
	        var dataagora = $( "#dataagora" ).val();
		var html = "";
		results.each( function( i, v ){
			html += "<tr class='"+( ( i%2==0 )?"p":"i" )+" id-"+v[ "id" ]+"'"+( i==0?" style='border-top: 1px solid #999;'":"" )+">";
                        if(v[ "nome" ]<dataagora){
			   html += "<td><a href='#' onclick='return ajax( \"fin_forlanprevrel.php?funcao=alt&id_pre="+v[ "id" ]+"&men_aceita="+men_aceita+"&ccodbc="+ccodbc+"&base="+base+"\", \"post\", \"popup\", \"event\" )'><font color='#ff0000'>"+v[ "nome" ]+"</a></td>";
			} else {
			   html += "<td><a href='#' onclick='return ajax( \"fin_forlanprevrel.php?funcao=alt&id_pre="+v[ "id" ]+"&men_aceita="+men_aceita+"&ccodbc="+ccodbc+"&base="+base+"\", \"post\", \"popup\", \"event\" )'>"+v[ "nome" ]+"</a></td>";
			}
			html += "<td>"+( v[ "cconta" ]==null?"":v[ "cconta" ] )+"</td>";
			html += "<td>"+( v[ "cdb_cr" ]==null?"":v[ "cdb_cr" ] )+"</td>";
			html += "<td>"+( v[ "cchequ" ]==null?"":v[ "cchequ" ] )+"</td>";
			html += "<td><a href='#' title=\"Hist�rico Completo "+v["chisto"]+"\">"+v["chisto"]+"</a></td>";
			html += "<td class='alinright'>"+( v[ "nvalor" ]==null?"":v[ "nvalor" ] )+"</td>";
			html += "<td style='text-align: center;'><input type='checkbox' name='id_pre[]' value='"+v[ "id" ]+"' class='func' />";
			html += "<input type='hidden' name='"+v[ "id" ]+"' id='"+v[ "id" ]+"' value='"+v[ "flag" ]+"' /></td></tr>";
		} );

		$( "table.registros" ).append( html );
	}, filtro, vars );
}
function fin_forlanprevrel_validacao( sobre ){
	if( sobre[ "origem" ].id=="prev_rel" ){
		if( $.trim( $( "#filtr1" ).val() )=="" ){
			exibe_alerta( "Informe uma data inicial. Campo obrigat�rio." );
			$( "#filtr1" ).focus();
			return false;
		}
		if( $.trim( $( "#filtr2" ).val() )=="" ){
			exibe_alerta( "Informe uma data final. Campo obrigat�rio." );
			$( "#filtr2" ).focus();
			return false;
		}
	}

	if( sobre[ "origem" ].id=="cad_tra" ){
		if( $.trim( $( "#banc_idd" ).val() )=="" ){
			exibe_alerta( "Selecione um banco para transfer�ncia. Campo obrigat�rio." );
			$( "#banc_idd" ).focus();
			return false;
		}
	}
	if( sobre[ "origem" ].id=="apagar" ){
		if( sobre[ "origem" ].id=="apagar" ){
			if( qtd_marcados( "func" )==0 ){
				exibe_alerta( msgs[ "sel_reg" ] );
				return false;
			}
		}
		return true;
	}
	else if( sobre[ "origem" ].id=="mov_fin" ){
		if( $.trim( $( "#fin_conta" ).val() )=="" ){
			exibe_alerta( "Selecione uma conta. Campo obrigat�rio." );
			$( "#fin_conta" ).focus();
			return false;
		}
		if( $.trim( $( "#fin_historico" ).val() )=="" ){
			exibe_alerta( "Informe um hist�rico. Campo obrigat�rio." );
			$( "#fin_historico" ).focus();
			return false;
		}
		if( $.trim( $( "#forma" ).val() )=="" ){
			exibe_alerta( "Indique a forma de pagamento. Campo obrigat�rio." );
			$( "#forma" ).focus();
			return false;
		}
		if( $.trim( $( "#fin_data" ).val() )=="" ){
			exibe_alerta( "Informe uma data. Campo obrigat�rio." );
			$( "#fin_data" ).focus();
			return false;
		}
		if( $.trim( $( "#fin_documento" ).val() )=="" ){
			exibe_alerta( "Informe o n�mero do documento. Campo obrigat�rio." );
			$( "#fin_documento" ).focus();
			return false;
		}
		if( $.trim( $( "#fin_total" ).val() )=="" ){
			exibe_alerta( "Informe o valor do lan�amento. Campo obrigat�rio." );
			$( "#fin_total" ).focus();
			return false;
		}
		return true;
	}
	else{
		return true;
	}
}
function fin_forlanprevrel_load( sobre ){
	if( sobre[ "origem" ].tagName=="FORM" ){
		var id = $( sobre[ "origem" ] ).find( "input[name=id_pre]" ).val();
		var fn = $( sobre[ "origem" ] ).find( "input[name=funcao]" ).val();
		var men_aceita = $( "#men_aceita" ).val();
		var ccodbc = $( "#ccodbc" ).val();
		var base = $( "#base" ).val();
		ajax( "fin_conprevmovreal.php?men_aceita="+men_aceita+"&ccodbc="+ccodbc+"&base="+base+"&socont=sim", "post", "!conteudo", "event" );
		if( fn=="inc" ){
			exibe_alerta( msgs[ "reg_inc" ] );
		}
		else if( fn=="alt" ){
			exibe_alerta( msgs[ "reg_alt" ] );
		}
		//else {
		//	exibe_alerta( msgs[ "reg_tra" ] );
		//}
	}

	//if( sobre[ "origem" ].id=="btexcluir" ){
	//	var id = $( sobre[ "origem" ] ).find( "input[name=id_pre]" ).val();
	//	var fn = $( sobre[ "origem" ] ).find( "input[name=funcao]" ).val();
	//	var men_aceita = $( "#men_aceita" ).val();
	//	var ccodbc = $( "#ccodbc" ).val();
	//	var base = $( "#base" ).val();
	//	ajax( "fin_conprevmovreal.php?men_aceita="+men_aceita+"&ccodbc="+ccodbc+"&base="+base+"&socont=sim", "post", "!conteudo", "event" );
	//	exibe_alerta( msgs[ "reg_exc" ] );
	//}
}

//// rotinas de MOVIMENTACAO DE CAIXA

// function fin_concaixa_validacao( sobre ){
// 	if( sobre[ "origem" ].id=="cad_cxa" ){
// 		if( $.trim( $( "#ccodbc" ).val() )=="" ){
// 			exibe_alerta( "Selecione um caixa. Campo obrigat�rio." );
// 			$( "#ccodbc" ).focus();
// 			return false;
// 		}
// 		if( $.trim( $( "#usus_senha" ).val() )=="" ){
// 			exibe_alerta( "Informe sua senha. Campo obrigat�rio." );
// 			$( "#usus_senha" ).focus();
// 			return false;
// 		}
// 		return true;
// 	}
// 	else{
// 		return true;
// 	}
// }

// function fin_concaixa_load(){
// 	pagina_atual = 1;
// //	var filtro = $( "#filtro_atual" ).val();
// 	var filtro = "";
// 	filtro = ( filtro!="" )?( ( filtro.length==1 )?filtro+"*":"*"+filtro+"*" ):"";
// 	var men_aceita = $( "#men_aceita" ).val();
// 	var ccodbc = $( "#ccodbc" ).val();
// 	var vars = "&men_aceita="+men_aceita+"&ccodbc="+ccodbc;
// 	paginacao( 22, function( results ){
// 		var men_aceita = $( "#men_aceita" ).val();
// 	        var ccodbc = $( "#ccodbc" ).val();
// 		var html = "";
// 		results.each( function( i, v ){
// 			html += "<tr class='"+( ( i%2==0 )?"p":"i" )+" id-"+v[ "id" ]+"'"+( i==0?" style='border-top: 1px solid #999;'":"" )+">";
// 			html += "<td>"+( v[ "cconta" ]==null?"":v[ "cconta" ] )+"</td>";
// 			html += "<td>"+( v[ "ccondo" ]==null?"":v[ "ccondo" ] )+"</td>";
// 			html += "<td>"+( v[ "chisto" ]==null?"":v[ "chisto" ] )+"</td>";
// 			html += "<td class=alinright>"+( v[ "nvalor" ]==null?"":v[ "nvalor" ] )+"</td>";
// 			html += "<td class=alinright>"+( v[ "ndiver" ]==null?"":v[ "ndiver" ] )+"</td>";
// 			html += "<td class=alinright>"+( v[ "ndesco" ]==null?"":v[ "ndesco" ] )+"</td>";
// 			html += "<td class=alinright>"+( v[ "ntotal" ]==null?"":v[ "ntotal" ] )+"</td>";
// 			html += "<td class=alinright>"+( v[ "nvltrc" ]==null?"":v[ "nvltrc" ] )+"</td></tr>";
// 		} );
//
// 		$( "table.registros" ).append( html );
// 	}, filtro, vars);
// }

function calculacheque( func ){
			var ntotdi = parseFloat( $( "#ntotdi" ).val().replace( ".", "" ).replace( ",", "." ) );
			var nvlrch = parseFloat( $( "#nvlrch" ).val().replace( ".", "" ).replace( ",", "." ) );
			var cnscodp = $.trim( $( "#cnscodp" ).val() );
			var base = $.trim( $( "#base" ).val() );

			$.ajax( {
				url: "../include/busca_base.php",
				type: "post",
				data: "busca=014&cnscodp="+cnscodp+"&base="+base,
				success: function( json ){
					totche = json;
					totche = parseFloat( totche )+parseFloat( nvlrch );
					if(totche>ntotdi){
						exibe_alerta( "Total de cheque digitado � maior que valor a receber. Verifique os valores e corrija!" );
					} else {
					  func();
					}
				}
			} );

}

function calculachequedin( func ){
			var ntotdi = parseFloat( $( "#ntotdi" ).val().replace( ".", "" ).replace( ",", "." ) );
			var nvlrch = parseFloat( $( "#nvlrch" ).val().replace( ".", "" ).replace( ",", "." ) );
			var dinchq = parseFloat( $( "#dinchq" ).val().replace( ".", "" ).replace( ",", "." ) );
			var cnscodp = $.trim( $( "#cnscodp" ).val() );
			var base = $.trim( $( "#base" ).val() );
			$.ajax( {
				url: "../include/busca_base.php",
				type: "post",
				data: "busca=014&cnscodp="+cnscodp+"&base="+base,
				success: function( json ){ //alert(json);
					totche = json;
					totche = parseFloat( totche )+parseFloat( nvlrch )+parseFloat( dinchq );
					if(totche>ntotdi){
						exibe_alerta( "Total de cheque digitado � maior que valor a receber. Verifique os valores e corrija!" );
					} else {
					  func();
					}
				}
			} );

}

// function fin_forcaixa_validacao( sobre ){
// 	if( sobre[ "origem" ].id=="apagarbco" ){
// 		if( qtd_marcados( "funcbco" )==0 ){
// 			exibe_alerta( msgs[ "sel_reg" ] );
// 			return false;
// 		} else {
// 			return true;
// 		}
// 	}
// 	if( sobre[ "origem" ].className=="multa" ){
// 		if( $.trim( $( "#ccodbc" ).val() )==""){
// 			exibe_alerta( msgs[ "cxa_reg" ] );
// 			return false;
// 		}
// 	}
// 	if( sobre[ "origem" ].className=="pagar" ){
// 		if( $.trim( $( "#ccodbc" ).val() )==""){
// 			exibe_alerta( msgs[ "cxa_reg" ] );
// 			return false;
// 		}
// 	}
// 	if( sobre[ "origem" ].className=="transferir" ){
// 		if( $.trim( $( "#ccodbc" ).val() )==""){
// 			exibe_alerta( msgs[ "cxa_reg" ] );
// 			return false;
// 		}
// 	}
//
// 	if( sobre[ "origem" ].tagName=="FORM" ){
// 		if( sobre[ "origem" ].id=="mov_din" ){
// 			return true;
// 		}
//
// 		if( sobre[ "origem" ].id=="rel_fin" ){
// 			if( $.trim( $( "#filtr1" ).val() )=="" ){
// 				exibe_alerta( "Informe uma data inicial. Campo obrigat�rio." );
// 				$( "#filtr1" ).focus();
// 				return false;
// 			}
// 			if( $.trim( $( "#filtr2" ).val() )=="" ){
// 				exibe_alerta( "Informe uma data final. Campo obrigat�rio." );
// 				$( "#filtr2" ).focus();
// 				return false;
// 			}
// 			return true;
// 		}
//
// 		if( sobre[ "origem" ].id=="exc_dch" ){
// 			var canche = $( "#canche" ).val();
// 			var receb = $( "#receb" ).val();
// 			if(canche!=""){
// 				if( qtd_marcados( "chfunc" )==0 ){
// 					exibe_alerta( msgs[ "sel_reg" ] );
// 					return false;
// 				}
// 			}
// 			return true;
// 		}
//
// 		if( sobre[ "origem" ].id=="exc_che" ){
// 			var canche = $( "#canche" ).val();
// 			var receb = $( "#receb" ).val();
// 			if(canche!=""){
// 				if( qtd_marcados( "chfunc" )==0 ){
// 					exibe_alerta( msgs[ "sel_reg" ] );
// 					return false;
// 				}
// 			}
// 			return true;
// 		}
//
// 		if( sobre[ "origem" ].id=="mov_dch" ){
// 			if( $.trim( $( "#dinchq" ).val() )=="" ){
// 				exibe_alerta( "Informe o valor do dinheiro. Campo obrigat�rio." );
// 				$( "#dinchq" ).focus();
// 				return false;
// 			}
// 			if( $.trim( $( "#numchq" ).val() )=="" ){
// 				exibe_alerta( "Informe o n�mero do cheque. Campo obrigat�rio." );
// 				$( "#numchq" ).focus();
// 				return false;
// 			}
// 			if( $.trim( $( "#nvlrch" ).val() )=="" ){
// 				exibe_alerta( "Informe o valor do cheque. Campo obrigat�rio." );
// 				$( "#nvlrch" ).focus();
// 				return false;
// 			}
// 			if( $.trim( $( "#dtachq" ).val() )=="" ){
// 				exibe_alerta( "Informe a data do cheque. Campo obrigat�rio." );
// 				$( "#dtachq" ).focus();
// 				return false;
// 			}
// 			if( $.trim( $( "#ccodigs" ).val() )=="" ){
// 				exibe_alerta( "Informe o banco do cheque. Campo obrigat�rio." );
// 				$( "#ccodigs" ).focus();
// 				return false;
// 			}
// 			return true;
// 		}
//
// 		if( sobre[ "origem" ].id=="mov_che" ){
// 			if( $.trim( $( "#numchq" ).val() )=="" ){
// 				exibe_alerta( "Informe o n�mero do cheque. Campo obrigat�rio." );
// 				$( "#numchq" ).focus();
// 				return false;
// 			}
// 			if( $.trim( $( "#nvlrch" ).val() )=="" ){
// 				exibe_alerta( "Informe o valor do cheque. Campo obrigat�rio." );
// 				$( "#nvlrch" ).focus();
// 				return false;
// 			}
// 			if( $.trim( $( "#dtachq" ).val() )=="" ){
// 				exibe_alerta( "Informe a data do cheque. Campo obrigat�rio." );
// 				$( "#dtachq" ).focus();
// 				return false;
// 			}
// 			if( $.trim( $( "#ccodigs" ).val() )=="" ){
// 				exibe_alerta( "Informe o banco do cheque. Campo obrigat�rio." );
// 				$( "#ccodigs" ).focus();
// 				return false;
// 			}
// 			return true;
// 		}
//
// 		if( sobre[ "origem" ].id=="mov_car" ){
//
// 			if( $.trim( $( "#tpcard" ).val() )=="" ){
// 				exibe_alerta( "Selecione um cart�o. Campo obrigat�rio." );
// 				$( "#tpcard" ).focus();
// 				return false;
// 			}
// 			return true;
// 		}
//
//
// 		if( sobre[ "origem" ].id=="rec_caix" ){
// 			var forma = $.trim( $( "#forma" ).val() );
// 			var ntotge = parseFloat( $( "#ntotge" ).val().replace( ".", "" ).replace( ",", "." ) );
// 			var ntotdi = parseFloat( $( "#ntotdi" ).val().replace( ".", "" ).replace( ",", "." ) );
// 			if( $.trim( $( "#base" ).val() )=="" ){
// 				exibe_alerta( "Voc� tem que selecionar um condom�nio. Campo obrigat�rio." );
// 				$( "#base" ).focus();
// 				return false;
// 			}
// 			if( $.trim( $( "#ntotge" ).val() )=="" ){
// 				exibe_alerta( "Voc� tem que selecionar uma pend�ncia. Campo obrigat�rio." );
// 				$( "#ntotge" ).focus();
// 				return false;
// 			}
//
// 			if( $.trim( $( "#ntotdi" ).val() )=="" ){
// 				exibe_alerta( "Indique o valor a receber. Campo obrigat�rio." );
// 				$( "#ntotdi" ).focus();
// 				return false;
// 			}
// 			if(forma=='dinhei'){
// 				if(ntotge>ntotdi){
// 					exibe_alerta( "Recebimento com Desconto." );
// 					return true;
// 				} else
// 				     if(ntotge<ntotdi){
// 					 exibe_alerta ( "Recebimento com Troco." );
// 					return true;
// 				}
// 			}
// 			else if(forma=='dinche'){
// 				if(ntotge>ntotdi){
// 					exibe_alerta( "Recebimento com Desconto em Dinheiro/Cheque." );
// 					return true;
// 				} else
// 				     if(ntotge<ntotdi){
// 					 exibe_alerta ( "Recebimento com Troco em Dinheiro/Cheque." );
// 					return true;
// 				}
// 			}
// 			else if(forma=='cheque'){
// 				if(ntotge>ntotdi){
// 					exibe_alerta( "Recebimento com Desconto em Cheque." );
// 					return true;
// 				} else
// 				     if(ntotge<ntotdi){
// 					exibe_alerta ( "Recebimento com Cheque n�o pode haver Troco." );
// 					return false;
// 				}
// 			}
// 			else if(forma=='cartao'){
// 				if(ntotge>ntotdi){
// 					exibe_alerta( "Recebimento com Desconto em Cart�o." );
// 					return true;
// 				} else
// 				     if(ntotge<ntotdi){
// 					exibe_alerta ( "Recebimento com Cart�o n�o pode haver Troco." );
// 					return false;
// 				}
// 			}
// 			return true;
//
// 		}
//
// 		if( sobre[ "origem" ].id=="mov_pag" ){
// 			var pagar = parseFloat( $( "#fin_total" ).val().replace( ".", "" ).replace( ",", "." ) );
// 			var limit = parseFloat( $( "#sis_valorpagamento" ).val().replace( ".", "" ).replace( ",", "." ) );
// 			var vamai = parseFloat( $( "#saldodin" ).val().replace( ".", "" ).replace( ",", "." ) );
// 			if( $.trim( $( "#fin_conta" ).val() )=="" ){
// 				exibe_alerta( "Selecione uma conta. Campo obrigat�rio." );
// 				$( "#fin_conta" ).focus();
// 				return false;
// 			}
// 			if( $.trim( $( "#fin_historico" ).val() )=="" ){
// 				exibe_alerta( "Informe um hist�rico. Campo obrigat�rio." );
// 				$( "#fin_historico" ).focus();
// 				return false;
// 			}
// 			if( $.trim( $( "#fin_data" ).val() )=="" ){
// 				exibe_alerta( "Informe uma data. Campo obrigat�rio." );
// 				$( "#fin_data" ).focus();
// 				return false;
// 			}
// 			if( $.trim( $( "#fin_documento" ).val() )=="" ){
// 				exibe_alerta( "Informe o n�mero do documento. Campo obrigat�rio." );
// 				$( "#fin_documento" ).focus();
// 				return false;
// 			}
// 			if( $.trim( $( "#fin_total" ).val() )=="" ){
// 				exibe_alerta( "Informe o valor do lan�amento. Campo obrigat�rio." );
// 				$( "#fin_total" ).focus();
// 				return false;
// 			}
// 			else {
// 				if(pagar>limit){
// 					exibe_alerta("Pagamento � maior que o limite para o caixa.");
// 					$( "#fin_total" ).focus();
// 					return false;
//
// 				} else if(pagar>vamai){
// 					exibe_alerta("Pagamento � maior que o saldo de dinheiro em caixa.");
// 					$( "#fin_total" ).focus();
// 					return false;
// 				}
// 		        }
// 			return true;
// 		}
//
// 		if( sobre[ "origem" ].id=="mov_tra" ){
// 			if( $.trim( $( "#dinheiro" ).val() )==0.00 && $.trim( $( "#cheque" ).val() )==0.00 && $.trim( $( "#chequepre" ).val() )==0.00 && $.trim( $( "#cartao" ).val() )==0.00){
// 				exibe_alerta( "Para transfer�ncia tem que indicar um valor." );
// 				$( "#dinheiro" ).focus();
// 				return false;
// 			}
// 			else {
// 				var banc_sdocr1 = parseFloat( $( "#banc_sdocr1" ).val().replace( ".", "" ).replace( ",", "." ) );
// 				var dinheiro = parseFloat( $( "#dinheiro" ).val().replace( ".", "" ).replace( ",", "." ) );
// 				var banc_sdocr2 = parseFloat( $( "#banc_sdocr2" ).val().replace( ".", "" ).replace( ",", "." ) );
// 				var cheque = parseFloat( $( "#cheque" ).val().replace( ".", "" ).replace( ",", "." ) );
// 				var banc_sdochp = parseFloat( $( "#banc_sdochp" ).val().replace( ".", "" ).replace( ",", "." ) );
// 				var chequepre = parseFloat( $( "#chequepre" ).val().replace( ".", "" ).replace( ",", "." ) );
// 				var banc_sdobco = parseFloat( $( "#banc_sdobco" ).val().replace( ".", "" ).replace( ",", "." ) );
// 				var cartao = parseFloat( $( "#cartao" ).val().replace( ".", "" ).replace( ",", "." ) );
// 				if( banc_sdocr1 > 0.00 ){
// 					if( dinheiro > banc_sdocr1 ){
// 						exibe_alerta( "Valor � maior que saldo de dinheiro em caixa." );
// 						$( "#dinheiro" ).focus();
// 						return false;
// 					}
// 				} else if( banc_sdocr1 < dinheiro ){
// 					exibe_alerta( "N�o existe valor de dinheiro em caixa para transferir." );
// 					$( "#dinheiro" ).focus();
// 					return false;
// 				}
// 				if( banc_sdocr2 > 0.00){
// 				        if( cheque > banc_sdocr2 ){
// 						exibe_alerta( "Valor � maior que saldo de cheque em caixa." );
// 						$( "#cheque" ).focus();
// 						return false;
// 				        }
// 				        else if( cheque < banc_sdocr2 ){
// 						exibe_alerta( "Valor � menor que saldo de cheque em caixa." );
// 						$( "#cheque" ).focus();
// 						return false;
// 				        }
// 				} else if( banc_sdocr2 < cheque ){
// 					exibe_alerta( "N�o existe valor de cheque em caixa para transferir." );
// 					$( "#cheque" ).focus();
// 					return false;
// 				}
// 				if( banc_sdochp > 0.00 ){
// 				        if( chequepre > banc_sdochp){
// 						exibe_alerta( "Valor � maior que saldo de cheque-pr� em caixa." );
// 						$( "#chequepre" ).focus();
// 						return false;
// 				        }
// 				        else if( chequepre < banc_sdochp ){
// 						exibe_alerta( "Valor � menor que saldo de cheque-pr� em caixa." );
// 						$( "#chequepre" ).focus();
// 						return false;
// 				        }
// 				} else if( banc_sdochp < chequepre ){
// 					exibe_alerta( "N�o existe valor de cheque-pr� em caixa para transferir." );
// 					$( "#chequepre" ).focus();
// 					return false;
// 				}
// 				if( banc_sdobco > 0.00 ){
// 				        if( cartao >  banc_sdobco ){
// 						exibe_alerta( "Valor � maior que saldo de cart�o em caixa." );
// 						$( "#cartao" ).focus();
// 						return false;
// 				        }
// 				        else if( cartao <  banc_sdobco ){
// 						exibe_alerta( "Valor � menor que saldo de cart�o em caixa." );
// 						$( "#cartao" ).focus();
// 						return false;
// 				        }
// 				} else if( banc_sdobco < cartao ){
// 					exibe_alerta( "N�o existe valor de cart�o em caixa para transferir." );
// 					$( "#cartao" ).focus();
// 					return false;
// 				}
// 			}
// 			return true;
// 		}
// 	}
// 	else{
// 		return true;
// 	}
// }
//
// function fin_forcaixa_load( sobre ){
// 	if( sobre[ "origem" ].tagName=="FORM" ){
// 		var id = $( sobre[ "origem" ] ).find( "input[name=id_mvf]" ).val();
// 		var fn = $( sobre[ "origem" ] ).find( "input[name=funcao]" ).val();
// 		var re = $( sobre[ "origem" ] ).find( "input[name=rec]" ).val();
// 		var men_aceita = $( "#men_aceita" ).val();
// 		var ccodbc = $( "#ccodbc" ).val();
// 		var senha = $( "#senha" ).val();
// 		ajax( "fin_concaixa.php?men_aceita="+men_aceita+"&ccodbc="+ccodbc+"&usus_senha="+senha+"&socont=sim", "post", "!conteudo" );
// 		if( fn=="inc" ){
// 			if( re=="REC"){
// 				exibe_alerta( msgs[ "reg_rec" ] );
// 			} else if( re=="PAG"){
// 				exibe_alerta( msgs[ "reg_pag" ] );
// 			} else if( re=="FEC"){
// 				exibe_alerta( msgs[ "reg_fec" ] );
// 			} else if( re=="TRA"){
// 				exibe_alerta( msgs[ "reg_tra" ] );
// 			}
// 			else {
// 				exibe_alerta( msgs[ "reg_inc" ] );
// 			}
// 		}
// 		else{
// 			exibe_alerta( msgs[ "reg_alt" ] );
// 		}
// 	}
// }

//// ROTINA DE GERAÇÃO DE RATEIO

function msit( el ){
		if( $( el ).hasClass( "sit-inc" ) ){ $( el ).parents( "form" ).find( "input[name=situac]" ).val( "inc" ); }
		if( $( el ).hasClass( "sit-alt" ) ){ $( el ).parents( "form" ).find( "input[name=situac]" ).val( "alt" ); }
		if( $( el ).hasClass( "sit-exc" ) ){ $( el ).parents( "form" ).find( "input[name=situac]" ).val( "exc" ); }
		if( $( el ).hasClass( "sit-busc" ) ){ $( el ).parents( "form" ).find( "input[name=situac]" ).val( "busc" ); }
		if( $( el ).hasClass( "sit-exci" ) ){ $( el ).parents( "form" ).find( "input[name=situac]" ).val( "exci" ); }
}

function busca_mes( el, ell ) { // OKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKK
		var cmesre = $( el ).val();
		var baseuni = $( "#baseuni" ).val();
		var tiposal = $( ell ).val();

		if(cmesre!=""){
				$.ajax( {
						url: "../include/busca_base.php",
						type: "post",
						data: "busca=2019&cmesre="+cmesre+"&baseuni="+baseuni+"&tiposal="+tiposal,
						success: function( json ){
								if( json=="err" ){
										semrateio = true;
								} else {
										semrateio = false;
								}
						}
				} );
				$.ajax( {
						url: "../include/busca_base.php",
						type: "post",
						data: "busca=2013&cmesre="+cmesre+"&baseuni="+baseuni+"&tiposal="+tiposal,
						success: function( json ){
								$( "#sal_dtvcto" ).val( json );
						}
				} );
		}
}

function busca_mes2(cmesre2,tiposal){ // OKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKK
		var baseuni = $( "#baseuni" ).val();
		var cmesre = $( "#cmesre2" ).val();
		var tiposal = $( "[name=tiposal]" ).val();
		if(cmesre!=""){
				$.ajax( {
						url: "../include/busca_base.php",
						type: "post",
						data: "busca=2019&cmesre="+cmesre+"&baseuni="+baseuni+"&tiposal="+tiposal,
						success: function( json ){
								if( json=="err" ){
										semrateio = true;
								} else {
										semrateio = false;
								}
						}
				} );
				$.ajax( {
						url: "../include/busca_base.php",
						type: "post",
						data: "busca=2013&cmesre="+cmesre+"&baseuni="+baseuni+"&tiposal="+tiposal,
						success: function( json ){
								$( "#sal_dtvcto" ).val( json );
						}
				} );
		} else {
				$( "#sal_dtvcto" ).val( "" );
		}
}

function uti_concapturagas_load(){
		msg.ex();
		$( "#lk-leva-lancamento" ).on( "click", function(){
				verificaEnviaCheckBoxUni( "apagar", function(){
						fajax( 'apagar','../sys_sys/uti_concapturagas.php', 'conteudo', event );
				} );
		} );
}
// CONERSAO DE GAS
function uti_uploadconvergas(){
	msg.ex();
	if( $.trim( $( "#cmesre_cv1" ).val() )=="" ){
			swal( "warning", "Informe o mês Referência", "warning" );
	} else if( $.trim( $( "#arquivo_cv1" ).val() )=="" ){
			swal( "warning", "Selecione o arquivo no seu computador", "warning" );
	} else {
		carregando.exibe();
		var basecl = $( "#basecl_cv1" ).val();
		var ccodig = $( "#ccodig_cv1" ).val();
		var cmesre = $( "#cmesre_cv1" ).val();
		var men_aceita = $( "#men_aceita_cv1" ).val();
		ajaxupload( {
			url: "../sys_sys/uti_uploadexcelgas.php?basecl="+basecl+"&ccodig="+ccodig+"&cmesre="+cmesre,
			fileField: "arquivo_cv1",
			onComplete: function( retorno ){
				carregando.esconde();
				if( retorno.indexOf( "Por favor, renvie" ) != -1 ){
					msg.ex( [ retorno, "error" ] );
				}
				else{
					msg.ex( [ "Arquivo importado com sucesso!", "success" ] );
				}
				debug.returnedAJAX( retorno );
				var html = "";
				retorno = JSON.parse( retorno );
				retorno.forEach( ( v, i ) => {
					html +=
					`<tr>
						<td class="alinleft">${ v[ "unid" ] }</td>
						<td class="alinright">${ v[ "leitan" ] }</td>
						<td class="alinright">${ v[ "leitme" ] }</td>
						<td class="alinright">${ v[ "leitat" ] }</td>
						<td class="alinright">${ v[ "natgas" ] }</td>
					</tr>`;
				} );
				$( "#tbl-gas" ).html( html );
			}
		} );
	}
    return true;
}
// CONVERSAO DE AGUA
function uti_uploadconveragu(){
	msg.ex();
	if( $.trim( $( "#cmesre_cv3" ).val() )=="" ){
		swal( "warning", "Informe o mês Referência", "warning" );
	} else if( $.trim( $( "#arquivo_cv3" ).val() )=="" ){
		swal( "warning", "Selecione o arquivo no seu computador", "warning" );
	} else {
		carregando.exibe();
		var basecl = $( "#basecl_cv3" ).val();
		var ccodig = $( "#ccodig_cv3" ).val();
		var cmesre = $( "#cmesre_cv3" ).val();
		var men_aceita = $( "#men_aceita_cv3" ).val();
		ajaxupload( {
			url: "../sys_sys/uti_uploadexcelagu.php?basecl="+basecl+"&ccodig="+ccodig+"&cmesre="+cmesre,
			fileField: "arquivo_cv3",
			onComplete: function( retorno ){
				// alert(retorno);
				carregando.esconde();
				if( retorno.indexOf( "Por favor, envie" ) != -1 ){
					msg.ex( [ retorno, "error" ] );
				}
				else{
					msg.ex( [ "Arquivo importado com sucesso!", "success" ] );
				}
				debug.returnedAJAX( retorno );
				var html = "";
				retorno = JSON.parse( retorno );
				retorno.forEach( ( v, i ) => {
					html +=
					`<tr>
						<td class="alinleft">${ v[ "unid" ] }</td>
						<td class="alinright">${ v[ "leagan" ] }</td>
						<td class="alinright">${ v[ "leagme" ] }</td>
						<td class="alinright">${ v[ "leagat" ] }</td>
						<td class="alinright">${ v[ "natagu" ] }</td>
					</tr>`;
				} );
				$( "#tbl-agua" ).html( html );
			}
		} );
	}
    return true;
}
function uti_concapturagas_load(){
		msg.ex();
		$( "#lk-leva-lancamento" ).on( "click", function(){
				verificaEnviaCheckBoxUni( "apagar", function(){
						fajax( 'apagar','../sys_sys/uti_concapturagas.php', 'conteudo', event );
				} );
		} );
}
// CONVERSAO DE FRAÇÃO
function uti_uploadconverfra(){
	msg.ex();
	if( $.trim( $( "#arquivo_fra" ).val() )=="" ){
			swal( "warning", "Selecione o arquivo no seu computador", "warning" );
	} else {
		carregando.exibe();
		var basecl = $( "#basecl_fra" ).val();
		var ccodig = $( "#ccodig_fra" ).val();
		var men_aceita = $( "#men_aceita_fra" ).val();
		ajaxupload( {
			url: "../sys_sys/uti_uploadexcelfracao_21.php?basecl="+basecl+"&ccodig="+ccodig,
			fileField: "arquivo_fra",
			onComplete: function( retorno ){
				carregando.esconde();
				if( retorno.indexOf( "Por favor, renvie" ) != -1 ){
					msg.ex( [ retorno, "error" ] );
				}
				else{
					// alert(retorno);
					msg.ex( [ "Arquivo importado com sucesso!", "success" ] );
				}
				debug.returnedAJAX( retorno );
				var html = "";
				retorno = JSON.parse( retorno );
				retorno.forEach( ( v, i ) => {
					html +=
					`<tr>
						<td class="alinleft">${ v[ "unid" ] }</td>
						<td>${ v[ "cnomes" ] }</td>
						<td class="alinright">${ v[ "n_frac" ] }</td>
						<td class="alinright">${ v[ "n_fraf" ] }</td>
					</tr>`;
				} );
				$( "#tbl-fra" ).html( html );
			}
		} );
	}
    return true;
}
function uti_uploadconverfra_se(){
	msg.ex();
	if( $.trim( $( "#arquivo_fra" ).val() )=="" ){
			swal( "warning", "Selecione o arquivo no seu computador", "warning" );
	} else {
		carregando.exibe();
		var basecl = $( "#basecl_fra" ).val();
		var ccodig = $( "#ccodig_fra" ).val();
		var men_aceita = $( "#men_aceita_fra" ).val();
		ajaxupload( {
			url: "../sys_sys/uti_uploadexcelfracao_se.php?basecl="+basecl+"&ccodig="+ccodig,
			fileField: "arquivo_fra",
			onComplete: function( retorno ){
				carregando.esconde();
				if( retorno.indexOf( "Por favor, renvie" ) != -1 ){
					msg.ex( [ retorno, "error" ] );
				}
				else{
					 // alert(retorno);
					msg.ex( [ "Arquivo importado com sucesso!", "success" ] );
				}

				debug.returnedAJAX( retorno );
				//eval( "var resultado="+retorno );
				ajax( "../sys_sys/uti_concapturafra_se.php?men_aceita="+men_aceita+"&basecl="+basecl+"&ccodig="+ccodig+"&mostget=NAO", "post", "conteudo");
			}
		} );
	}
    return true;
}


function busca_escolha ( escolh ){
		var base = $( "#basecl" ).val();
		var escolha = $( "#escolha" ).val();
		if(escolh=="n"){
				escolha="n";
		} else
		if(escolh=="e"){
				escolha="e";
		}
		$( "#escolha" ).html( escolha );
		$.ajax( {
				url: "../include/busca_base.php",
				type: "post",
				data: "busca=2020&escolha="+escolha+"&base="+base,
				success: function( json ){ //alert(json);
						if( json=="err" ){
								exibe_alerta( "Não existe rateio extra para este condomínio." );
						}
						else{
								var itens = JSON.parse( json );
								var partes = "<option value=''>Selecione o mês</option>";
								itens.each( function( i, v ){
									partes += "<option value='"+v[ "valor" ]+"'>"+v[ "texto" ]+"</option>";
								} );
								$( "#cmesre1" ).html( partes );
								$( "#escolh" ).val( escolha );
						}
				}
		} );
}

function busca_escolharat ( escolh ){
		var escolha = $( "#escolha" ).val();
		var men_aceita = $( "#men_aceita" ).val();
		if(escolh=="n"){
			escolha="n";
		} else
		if(escolh=="e"){
			escolha="e";
		}
		$( "#escolha" ).html( escolha );
		$.ajax( {
				url: "../include/busca_base.php",
				type: "post",
				data: "busca=2023&escolha="+escolha,
				success: function( json ){
						if( json=="err" ){
								exibe_alerta( "Não existe rateio extra para este condomínio." );
						}
						else{
								eval( "var itens="+json );
								var partes = "<option value=''>Selecione o mês</option>";
								itens.each( function( i, v ){
									partes += "<option value='"+v[ "valor" ]+"'>"+v[ "texto" ]+"</option>";
								} );

								$( "#cmesre" ).html( partes );
						}
						ajax( "fin_conrateiopag.php?men_aceita="+men_aceita+"&escolha="+escolha+"&socont=", "post", "meio" );
				}
		} );
}

function busca_escolharatn ( escolh ){
		var escolha = $( "#escolha" ).val();
		if(escolh=="n"){
			escolha="n";
		} else
		if(escolh=="e"){
			escolha="e";
		}
		$( "#escolha" ).html( escolha );
		$.ajax( {
				url: "../include/busca_base.php",
				type: "post",
				data: "busca=2023&escolha="+escolha,
				success: function( json ){
						if( json=="err" ){
								exibe_alerta( "Não existe rateio extra para este condomínio." );
						}
						else{
								eval( "var itens="+json );
								var partes = "<option value=''>Selecione o mês</option>";
								itens.each( function( i, v ){
									partes += "<option value='"+v[ "valor" ]+"'>"+v[ "texto" ]+"</option>";
								} );

								$( "#cmesre" ).html( partes );
						}
						ajax( "fin_conrateionao.php?men_aceita="+men_aceita+"&escolha="+escolha+"&socont=", "post", "meio" );
				}
		} );
}

function busca_escolhajur ( escolh ){
	var escolha = $( "#escolha" ).val();
	var base = $( "#basecl" ).val();
	var men_aceita = $( "#men_aceita" ).val();
	if(escolh=="n"){
		escolha="n";
	} else
	if(escolh=="e"){
		escolha="e";
	}
	$( "#escolha" ).html( escolha );
	$.ajax( {
		url: "../include/busca_base.php",
		type: "post",
		data: "busca=2024&escolha="+escolha+"&base="+base,
		success: function( json ){
			if( json=="" && escolha=="e" ){
				exibe_alerta( "Não existe pendência no jurúdico para este condomínio." );
			} else {
				ajax( "fin_movmospendencia.php?men_aceita="+men_aceita+"&base="+base+"&escolha="+escolha+"&escolh="+escolh+"&socont=", "post", "meio" );
			}
		}
	} );
}

function fin_gerarateio_validacao( sobre ){
	if( sobre[ "origem" ].tagName=="FORM" ){
		if( sobre[ "origem" ].className=="boleto_bol" ||  sobre[ "origem" ].className=="boleto_ema" ){
			var cmesre = $( "#cmesre" ).val();
			var base = $( "#base" ).val();
			var escolha = $( "#escolha" ).val();
			$.ajax( {
				url: "../include/busca_base.php",
				type: "post",
				data: "busca=016&cmesre="+cmesre+"&base="+base+"&escolha="+escolha,
				success: function( json ){
					if( json=="err" ){
						exibe_alerta( "Rateio n�o finalizado para emiss�o e envio de boleto." );
					}
				}
			} );
		}

		if( sobre[ "origem" ].className=="finalizar" ){
			return true;
		}

		if( sobre[ "origem" ].id=="rat_habil" ){
			if( $.trim( $( "#cmesre1" ).val() )=="" && $.trim( $( "#cmesre2" ).val() )=="" ){
				exibe_alerta( "Selecione ou indique um m�s refer�ncia. Campo obrigat�rio." );
				$( "#cmesre1" ).focus();
				return false;
			}
			if( $.trim( $( "#ddtvco" ).val() )=="" ){
				exibe_alerta( "Informe ou confirme o vencimento. Campo obrigat�rio." );
				$( "#ddtvco" ).focus();
				return false;
			}
			else{
				if( semrateio ){
					exibe_alerta( "Rateio do m�s anterior ainda n�o finalizado. Finalize primeiro" );
					//semrateio = false;
					return false;
				}
			}
		}
	return true;
	}
}


function fin_forrateio_validacao( sobre ){
	var tprate = $( "#tprate" ).val();
	var calrat = $( "#calrat" ).val();
	var situac = $( "#situac" ).val();
	var base = $( "#base" ).val();

	if( sobre[ "origem" ].tagName=="FORM" ){
		if( situac=="bus"){
			if( $.trim( $( "#cnscodp" ).val() )==""){
				exibe_alerta( "Selecione um propriet�rio. Campo obrigat�rio." );
				$( "#cnscodp" ).focus();
				return false;
			}
		} else
		if( situac=="exci"){
			if( sobre[ "origem" ].id=="apagarat" ){
				if( qtd_marcados( "mfunc" )==0 ){
					exibe_alerta( "Selecione um ou mais lan�amento para exclus�o. Campo obrigat�rio." );
					return false;
				}
				return true;
			}
		}
		else{
			if( sobre[ "origem" ].id=="rat_sele" ){
				$( "#tprate" )[ 0 ].selectedIndex = 0;
				if( tprate=="" ){
					return false;
				}
			}

			if ( calrat=="FRA"){
				if( $.trim( $( "#ntotct" ).val() )==""){
					exibe_alerta( "Total da cota comum n�o pode ser vazia. Campo obrigat�rio." );
					$( "#ntotct" ).focus();
					return false;
				}

			}

			if ( calrat=="DESG"){
				if( situac=="exc"){
					if( $.trim( $( "#ctades" ).val() )==""){
						exibe_alerta( "Selecione uma conta para exclus�o. Campo obrigat�rio." );
						$( "#ctades" ).focus();
						return false;
					}
				}
				if( situac=="busc"){
					if( $.trim( $( "#ctades" ).val() )==""){
						exibe_alerta( "Selecione uma conta para pesquisa. Campo obrigat�rio." );
						$( "#ctades" ).focus();
						return false;
					}
				}
				if( situac=="inc"){
					if( $.trim( $( "#ctades" ).val() )=="" && $.trim( $( "#cdescr" ).val() )!=""){
						if( $.trim( $( "#tipo" ).val() )==""){
							exibe_alerta( "Indique o tipo da conta. Campo obrigat�rio." );
							$( "#tipo" ).focus();
							return false;
						}
					} else
					if( $.trim( $( "#ctades" ).val() )=="" && $.trim( $( "#cdescr" ).val() )==""){
						exibe_alerta( "Selecione uma conta ou inclua uma para rateio. Campo obrigat�rio." );
						$( "#ctades" ).focus();
						return false;
					}
					if( $.trim( $( "#nvalor" ).val() )==""){
						exibe_alerta( "Indique o valor para rateio. Campo obrigat�rio." );
						$( "#nvalor" ).focus();
						return false;
					}
				}

			}

			if ( calrat=="DESI"){
				if( situac=="exc"){
					if( $.trim( $( "#ctades" ).val() )==""){
						exibe_alerta( "Selecione uma conta para exclus�o. Campo obrigat�rio." );
						$( "#ctades" ).focus();
						return false;
					}
				}
				else if( situac=="inc"){
					if( $.trim( $( "#cnscodp" ).val() )==""){
						exibe_alerta( "Selecione um propriet�rio. Campo obrigat�rio." );
						$( "#cnscodp" ).focus();
						return false;
					}
					if( $.trim( $( "#ctades" ).val() )=="" && $.trim( $( "#cdescr" ).val() )!=""){
						if( $.trim( $( "#tipo" ).val() )==""){
							exibe_alerta( "Indique o tipo da conta. Campo obrigat�rio." );
							$( "#tipo" ).focus();
							return false;
						}
					} else
					if( $.trim( $( "#ctades" ).val() )=="" && $.trim( $( "#cdescr" ).val() )==""){
						exibe_alerta( "Selecione uma conta ou inclua uma para rateio. Campo obrigat�rio." );
						$( "#ctades" ).focus();
						return false;
					}

					if( $.trim( $( "#nvalor" ).val() )==""){
						exibe_alerta( "Indique o valor para rateio. Campo obrigat�rio." );
						$( "#nvalor" ).focus();
						return false;
					}
				}

			}

			if ( calrat=="DESB"){
				if( situac=="exc"){
					if( $.trim( $( "#ctades" ).val() )==""){
						exibe_alerta( "Selecione uma conta para exclus�o. Campo obrigat�rio." );
						$( "#ctades" ).focus();
						return false;
					}
				} else
				if( situac=="busb"){
					if( $.trim( $( "#ctablc" ).val() )==""){
						exibe_alerta( "Selecione um bloco. Campo obrigat�rio." );
						$( "#ctablc" ).focus();
						return false;
					}
				}
				if( situac=="inc"){
					if( $.trim( $( "#ctablc" ).val() )==""){
						exibe_alerta( "Selecione um bloco. Campo obrigat�rio." );
						$( "#ctablc" ).focus();
						return false;
					}

					if( $.trim( $( "#ctades" ).val() )=="" && $.trim( $( "#cdescr" ).val() )!=""){
						if( $.trim( $( "#tipo" ).val() )==""){
							exibe_alerta( "Indique o tipo da conta. Campo obrigat�rio." );
							$( "#tipo" ).focus();
							return false;
						}
					} else
					if( $.trim( $( "#ctades" ).val() )=="" && $.trim( $( "#cdescr" ).val() )==""){
						exibe_alerta( "Selecione uma conta ou inclua uma para rateio. Campo obrigat�rio." );
						$( "#ctades" ).focus();
						return false;
					}

					if( $.trim( $( "#nvalor" ).val() )==""){
						exibe_alerta( "Indique o valor para rateio. Campo obrigat�rio." );
						$( "#nvalor" ).focus();
						return false;
					}
				}
			}

			if ( calrat=="DESF"){
				if( situac=="exc"){
					if( $.trim( $( "#ctades" ).val() )==""){
						exibe_alerta( "Selecione uma conta para exclus�o. Campo obrigat�rio." );
						$( "#ctades" ).focus();
						return false;
					}
				} else
				if( situac=="busc"){
					if( $.trim( $( "#ctades" ).val() )==""){
						exibe_alerta( "Selecione uma conta para pesquisa. Campo obrigat�rio." );
						$( "#ctades" ).focus();
						return false;
					}
				}
				if( situac=="inc"){
					if( $.trim( $( "#ctades" ).val() )=="" && $.trim( $( "#cdescr" ).val() )!=""){
						if( $.trim( $( "#tipo" ).val() )==""){
							exibe_alerta( "Indique o tipo da conta. Campo obrigat�rio." );
							$( "#tipo" ).focus();
							return false;
						}
					} else
					if( $.trim( $( "#ctades" ).val() )=="" && $.trim( $( "#cdescr" ).val() )==""){
						exibe_alerta( "Selecione uma conta ou inclua uma para rateio. Campo obrigat�rio." );
						$( "#ctades" ).focus();
						return false;
					}

					if( $.trim( $( "#nvalor" ).val() )==""){
						exibe_alerta( "Indique o valor para rateio. Campo obrigat�rio." );
						$( "#nvalor" ).focus();
						return false;
					}
				}
			}

			if ( calrat=="DESP"){
				if( situac=="exc"){
					if( $.trim( $( "#ctades" ).val() )==""){
						exibe_alerta( "Selecione uma conta para exclus�o. Campo obrigat�rio." );
						$( "#ctades" ).focus();
						return false;
					}
				} else
				if( situac=="busc"){
					if( $.trim( $( "#ctades" ).val() )==""){
						exibe_alerta( "Selecione uma conta para pesquisa. Campo obrigat�rio." );
						$( "#ctades" ).focus();
						return false;
					}
				}
				if( situac=="inc"){
					if( $.trim( $( "#ctades" ).val() )=="" && $.trim( $( "#cdescr" ).val() )!=""){
						if( $.trim( $( "#tipo" ).val() )==""){
							exibe_alerta( "Indique o tipo da conta. Campo obrigat�rio." );
							$( "#tipo" ).focus();
							return false;
						}
					} else
					if( $.trim( $( "#ctades" ).val() )=="" && $.trim( $( "#cdescr" ).val() )==""){
						exibe_alerta( "Selecione uma conta ou inclua uma para rateio. Campo obrigat�rio." );
						$( "#ctades" ).focus();
						return false;
					}

					if( $.trim( $( "#nvalor" ).val() )==""){
						exibe_alerta( "Indique o valor para rateio. Campo obrigat�rio." );
						$( "#nvalor" ).focus();
						return false;
					}
				}
			}

			if ( calrat=="GAS"){
				if( $.trim( $( "#ntotkg" ).val() )==""){
					exibe_alerta( "O valor do Kg do g�s n�o pode ser vazio. Campo obrigat�rio." );
					$( "#ntotkg" ).focus();
					return false;
				}

				if( $.trim( $( "#ntotmt" ).val() )==""){
					exibe_alerta( "O valor do Metro do g�s n�o pode ser vazio. Campo obrigat�rio." );
					$( "#ntotmt" ).focus();
					return false;
				}

				if( $.trim( $( "#ntotga" ).val() )==""){
					exibe_alerta( "O total do g�s nao pode ser vazio. Campo obrigat�rio." );
					$( "#ntotga" ).focus();
					return false;
				}
			}

			if ( calrat=="AGU"){
				if( $.trim( $( "#ntotag" ).val() )==""){
					exibe_alerta( "O total da �gua nao pode ser vazio. Campo obrigat�rio." );
					$( "#ntotag" ).focus();
					return false;
				}
			}

			if ( calrat=="LUZ"){
				if( $.trim( $( "#ntotlu" ).val() )==""){
					exibe_alerta( "O total da luz nao pode ser vazio. Campo obrigat�rio." );
					$( "#ntotlu" ).focus();
					return false;
				}
			}
		}

		return true;
	}
	else{
		return true;
	}
}

function busca_kg ( ele ){
	var ntotkg = $( "#ntotkg" ).val();
	var ntotmt = $( "#ntotmt" ).val();
	var sele = $( "#ele" ).val();
	$( "#ntotkg" ).blur( function(){
		var valor1 = parseFloat( $( "#ntotkg" ).val().replace( ".", "" ).replace( ",", "." ) );
		var valor2 = parseFloat( $( this ).val().replace( ".", "" ).replace( ",", "." ) );
		$( "#ntotmt" ).val( ( valor1*2.3 ).formatMoneyy() );
	} );
	$( "#ntotmt" ).blur( function(){
		var valor1 = parseFloat( $( "#ntotmt" ).val().replace( ".", "" ).replace( ",", "." ) );
		var valor2 = parseFloat( $( this ).val().replace( ".", "" ).replace( ",", "." ) );
		$( "#ntotkg" ).val( ( valor1/2.3 ).formatMoneyy() );
	} );
}


function fin_forrateio_load( sobre ){
	busca_dadoscond();
	if( sobre[ "origem" ].tagName=="FORM" ){
		var calrat = $( "#calrat" ).val();
		if(calrat=="FRA"){
			if( $( "input.nv_cta" ).is( "input" ) ){
				$( "input.nv_cta" ).blur( function(){
					var id_rat = $( this ).parents( "tr" ).attr( "class" ).split( "id-" )[ 1 ].split( " " )[ 0 ];
					var nv_cta = $( this ).val();
					var base = $( "#base" ).val();
					$.ajax( {
						url: "../include/busca_base.php",
						type: "post",
						data: "busca=034&id_rat="+id_rat+"&nv_cta="+nv_cta+"&base="+base,
						success: function( json ){
						}
					} );
				} );
			}

			if( $( "input.nv_fdr" ).is( "input" ) ){
				$( "input.nv_fdr" ).blur( function(){
					var id_rat = $( this ).parents( "tr" ).attr( "class" ).split( "id-" )[ 1 ].split( " " )[ 0 ];
					var nv_fdr = $( this ).val();
					var base = $( "#base" ).val();
					$.ajax( {
						url: "../include/busca_base.php",
						type: "post",
						data: "busca=035&id_rat="+id_rat+"&nv_fdr="+nv_fdr+"&base="+base,
						success: function( json ){
						}
					} );
				} );
			}

			var id = $( sobre[ "origem" ] ).find( "input[name=id_rat]" ).val();
			var fn = $( sobre[ "origem" ] ).find( "input[name=funcao]" ).val();
			if( fn=="inc" ){
				var men_aceita = $( "#men_aceita" ).val();
				var cmesre = $( sobre[ "origem" ] ).find( "input[name=cmesre]" ).val();
				var ddtvco = $( sobre[ "origem" ] ).find( "input[name=ddtvco]" ).val();
				var escolha = $( sobre[ "origem" ] ).find( "input[name=escolha]" ).val();
				var base = $( sobre[ "origem" ] ).find( "input[name=base]" ).val();
				ajax( "fin_gerarateio.php?men_aceita="+men_aceita+"&cmesre="+cmesre+"&ddtvco="+ddtvco+"&escolha="+escolha+"&base="+base+"&socont=sim", "post", "!conteudo_int" );
			}
			else{
				var dados = [
					$( sobre[ "origem" ] ).find( "input[name=cnumap]" ).val(),
					$( sobre[ "origem" ] ).find( "input[name=cbloco]" ).val(),
					$( sobre[ "origem" ] ).find( "input[name=cmesre]" ).val(),
					$( sobre[ "origem" ] ).find( "input[name=ddtvco]" ).val(),
					$( sobre[ "origem" ] ).find( "input[name=natgas]" ).val(),
					$( sobre[ "origem" ] ).find( "input[name=natagu]" ).val(),
					$( sobre[ "origem" ] ).find( "input[name=n_cota]" ).val(),
					$( sobre[ "origem" ] ).find( "input[name=n_fdre]" ).val(),
					$( sobre[ "origem" ] ).find( "input[name=noutde]" ).val(),
					$( sobre[ "origem" ] ).find( "input[name=nsercb]" ).val(),
					$( sobre[ "origem" ] ).find( "input[name=ntotal]" ).val()
				];
			}
			$( "tr.id-"+id+" td" ).each( function( i, v ){
				v.innerHTML = dados[ i ];
			} );
			if( fn=="inc" ){
				exibe_alerta( msgs[ "rat_inc" ] );
			}
			else{
				exibe_alerta( msgs[ "rat_alt" ] );
			}
		}

		if(calrat=="DESG" || calrat=="DESI" || calrat=="DESB" || calrat=="DESF" || calrat=="DESP"){
			if( $( "input.nv_vlr" ).is( "input" ) ){
				$( "input.nv_vlr" ).blur( function(){
					var id_pro = $( this ).parents( "tr" ).attr( "class" ).split( "id-" )[ 1 ].split( " " )[ 0 ];
					var nv_vlr = $( this ).val();
					var base = $( "#base" ).val();
					$.ajax( {
						url: "../include/busca_base.php",
						type: "post",
						data: "busca=033&id_pro="+id_pro+"&nv_vlr="+nv_vlr+"&base="+base,
						success: function( json ){
						}
					} );
				} );
			}

			var fn = $( sobre[ "origem" ] ).find( "input[name=situac]" ).val();
			if( fn=="inc" ){
				exibe_alerta( msgs[ "rat_inc" ] );
			}
			else if( fn=="exc" ){
				exibe_alerta( msgs[ "rat_exc" ] );
			}
		}

		if(calrat=="GAS"){
			if( $( "input.ngasant" ).is( "input" )){
				$( "input.ngasant" ).blur( function(){
					var id_rat = $( this ).parents( "tr" ).attr( "class" ).split( "id-" )[ 1 ].split( " " )[ 0 ];
					var ngasant = $( "tr.id-"+id_rat+" input[name=ngasant]" ).val();
					var escolha = $ ( "#escolha" ).val();
					var campo1 = $ ( "#campo1" ).val();
					var base = $( "#base" ).val();
					$.ajax( {
						url: "../include/busca_base.php",
						type: "post",
						data: "busca=0103&id_rat="+id_rat+"&ngasant="+ngasant+"&ngasto="+ngasto+"&ngasco="+ngasco+"&ngasvl="+ngasvl+"&escolha="+escolha+"&base="+base,
						success: function( json ){ //alert (json);
							if( json=="err" ){
								exibe_alerta( "Leitura atual � menor que leitura anterior. Verifique pois n�o ser� gravado." );
								return false;
							}
							else{
								json = json.split( "|" );
								$( "tr.id-"+json[ 4 ]+" td input[type=text]" )[ 0 ].value = parseFloat( json[ 0 ] ).formatMoneyy();
								var valores = json[5];
								$( "strong.totalgas-digitado" ).html( valores );
							}
						}
					} );
				} );
			}
			if( $( "input.ngasto" ).is( "input" )){
				$( "input.ngasto" ).blur( function(){
					var id_rat = $( this ).parents( "tr" ).attr( "class" ).split( "id-" )[ 1 ].split( " " )[ 0 ];
					var ngasto = $( "tr.id-"+id_rat+" input[name=ngasto]" ).val();
					var escolha = $ ( "#escolha" ).val();
					var campo1 = $ ( "#campo1" ).val();
					var base = $( "#base" ).val();
					$.ajax( {
						url: "../include/busca_base.php",
						type: "post",
						data: "busca=010&id_rat="+id_rat+"&ngasto="+ngasto+"&ngasco="+ngasco+"&ngasvl="+ngasvl+"&escolha="+escolha+"&base="+base,
						success: function( json ){ //alert (json);
							if( json=="err" ){
								exibe_alerta( "Leitura atual � menor que leitura anterior. Verifique pois n�o ser� gravado." );
								return false;
							}
							else{
								json = json.split( "|" );
								$( "tr.id-"+json[ 4 ]+" td input[type=text]" )[ 0 ].value = parseFloat( json[ 0 ] ).formatMoneyy();
								$( "tr.id-"+json[ 4 ]+" td input[type=text]" )[ 1 ].value = parseFloat( json[ 1 ] ).formatMoneyy();
								$( "tr.id-"+json[ 4 ]+" td input[type=text]" )[ 2 ].value = parseFloat( json[ 2 ] ).formatMoneyy();
								$( "tr.id-"+json[ 4 ]+" td input[type=text]" )[ 3 ].value = parseFloat( json[ 3 ] ).formatMoney();
								var valores = json[5];
								$( "strong.totalgas-digitado" ).html( valores );
							}
						}
					} );
				} );
			}
			if( $( "input.ngasco" ).is( "input" )){
				$( "input.ngasco" ).blur( function(){
					var id_rat = $( this ).parents( "tr" ).attr( "class" ).split( "id-" )[ 1 ].split( " " )[ 0 ];
					var ngasco = $( "tr.id-"+id_rat+" input[name=ngasco]" ).val();
					var escolha = $ ( "#escolha" ).val();
					var campo1 = $ ( "#campo1" ).val();
					var base = $( "#base" ).val();
					$.ajax( {
						url: "../include/busca_base.php",
						type: "post",
						data: "busca=0101&id_rat="+id_rat+"&ngasto="+ngasto+"&ngasco="+ngasco+"&ngasvl="+ngasvl+"&escolha="+escolha+"&base="+base,
						success: function( json ){ //alert (json);
							if( json=="err" ){
								exibe_alerta( "Leitura atual � menor que leitura anterior. Verifique pois n�o ser� gravado." );
							}
							else{
								json = json.split( "|" );
								$( "tr.id-"+json[ 4 ]+" td input[type=text]" )[ 0 ].value = parseFloat( json[ 0 ] ).formatMoneyy();
								$( "tr.id-"+json[ 4 ]+" td input[type=text]" )[ 1 ].value = parseFloat( json[ 1 ] ).formatMoneyy();
								$( "tr.id-"+json[ 4 ]+" td input[type=text]" )[ 2 ].value = parseFloat( json[ 2 ] ).formatMoneyy();
								$( "tr.id-"+json[ 4 ]+" td input[type=text]" )[ 3 ].value = parseFloat( json[ 3 ] ).formatMoney();
								var valores = json[5];
								$( "strong.totalgas-digitado" ).html( valores );
							}
						}
					} );
				} );
			}
			if( $( "input.ngasvl" ).is( "input" )){
				$( "input.ngasvl" ).blur( function(){
					var id_rat = $( this ).parents( "tr" ).attr( "class" ).split( "id-" )[ 1 ].split( " " )[ 0 ];
					var ngasvl = $( "tr.id-"+id_rat+" input[name=ngasvl]" ).val();
					var escolha = $ ( "#escolha" ).val();
					var campo1 = $ ( "#campo1" ).val();
					var base = $( "#base" ).val();
					$.ajax( {
						url: "../include/busca_base.php",
						type: "post",
						data: "busca=0102&id_rat="+id_rat+"&ngasto="+ngasto+"&ngasco="+ngasco+"&ngasvl="+ngasvl+"&escolha="+escolha+"&base="+base,
						success: function( json ){ //alert (json);
							if( json=="err" ){
								exibe_alerta( "Leitura atual � menor que leitura anterior. Verifique pois n�o ser� gravado." );
							}
							else{
								json = json.split( "|" );
								$( "tr.id-"+json[ 4 ]+" td input[type=text]" )[ 0 ].value = parseFloat( json[ 0 ] ).formatMoneyy();
								$( "tr.id-"+json[ 4 ]+" td input[type=text]" )[ 1 ].value = parseFloat( json[ 1 ] ).formatMoneyy();
								$( "tr.id-"+json[ 4 ]+" td input[type=text]" )[ 2 ].value = parseFloat( json[ 2 ] ).formatMoneyy();
								$( "tr.id-"+json[ 4 ]+" td input[type=text]" )[ 3 ].value = parseFloat( json[ 3 ] ).formatMoney();
								var valores = json[5];
								$( "strong.totalgas-digitado" ).html( valores );
							}
						}
					} );
				} );
			}
		}

		if(calrat=="AGU"){
			if( $( "input.ngasant" ).is( "input" )){
				$( "input.ngasant" ).blur( function(){
					var id_rat = $( this ).parents( "tr" ).attr( "class" ).split( "id-" )[ 1 ].split( " " )[ 0 ];
					var ngasant = $( "tr.id-"+id_rat+" input[name=ngasant]" ).val();
					var escolha = $ ( "#escolha" ).val();
					var base = $( "#base" ).val();
					var campo2 = $ ( "#campo2" ).val();
					$.ajax( {
						url: "../include/busca_base.php",
						type: "post",
						data: "busca=0113&id_rat="+id_rat+"&ngasant="+ngasant+"&ngasto="+ngasto+"&ngasco="+ngasco+"&ngasvl="+ngasvl+"&escolha="+escolha+"&base="+base,
						success: function( json ){ //alert (json);
							if( json=="err" ){
								exibe_alerta( "Leitura atual � menor que leitura anterior. Verifique pois n�o ser� gravado." );
							}
							else{
								json = json.split( "|" );
								$( "tr.id-"+json[ 4 ]+" td input[type=text]" )[ 0 ].value = parseFloat( json[ 0 ] ).formatMoneyy();
								var valores = json[5];
								$( "strong.totalagua-digitado" ).html( valores );
							}
						}
					} );
				} );
			}

			if( $( "input.ngasto" ).is( "input" )){
				$( "input.ngasto" ).blur( function(){
					var id_rat = $( this ).parents( "tr" ).attr( "class" ).split( "id-" )[ 1 ].split( " " )[ 0 ];
					var ngasto = $( "tr.id-"+id_rat+" input[name=ngasto]" ).val();
					var escolha = $ ( "#escolha" ).val();
					var base = $( "#base" ).val();
					var campo2 = $ ( "#campo2" ).val();
					$.ajax( {
						url: "../include/busca_base.php",
						type: "post",
						data: "busca=011&id_rat="+id_rat+"&ngasto="+ngasto+"&ngasco="+ngasco+"&ngasvl="+ngasvl+"&escolha="+escolha+"&base="+base,
						success: function( json ){ //alert(json);
							if( json=="err" ){
								exibe_alerta( "Leitura atual � menor que leitura anterior. Verifique pois n�o ser� gravado." );
							}
							else{
								json = json.split( "|" );
								$( "tr.id-"+json[ 4 ]+" td input[type=text]" )[ 0 ].value = parseFloat( json[ 0 ] ).formatMoneyy();
								$( "tr.id-"+json[ 4 ]+" td input[type=text]" )[ 1 ].value = parseFloat( json[ 1 ] ).formatMoneyy();
								$( "tr.id-"+json[ 4 ]+" td input[type=text]" )[ 2 ].value = parseFloat( json[ 2 ] ).formatMoneyy();
								$( "tr.id-"+json[ 4 ]+" td input[type=text]" )[ 3 ].value = parseFloat( json[ 3 ] ).formatMoney();
								var valores = json[5];
								$( "strong.totalagua-digitado" ).html( valores );
							}
						}
					} );
				} );
			}
			if( $( "input.ngasco" ).is( "input" )){
				$( "input.ngasco" ).blur( function(){
					var id_rat = $( this ).parents( "tr" ).attr( "class" ).split( "id-" )[ 1 ].split( " " )[ 0 ];
					var ngasco = $( "tr.id-"+id_rat+" input[name=ngasco]" ).val();
					var escolha = $ ( "#escolha" ).val();
					var base = $( "#base" ).val();
					var campo2 = $ ( "#campo2" ).val();
					$.ajax( {
						url: "../include/busca_base.php",
						type: "post",
						data: "busca=0111&id_rat="+id_rat+"&ngasto="+ngasto+"&ngasco="+ngasco+"&ngasvl="+ngasvl+"&escolha="+escolha+"&base="+base,
						success: function( json ){ //alert(json);
							if( json=="err" ){
								exibe_alerta( "Leitura atual � menor que leitura anterior. Verifique pois n�o ser� gravado." );
							}
							else{
								json = json.split( "|" );
								$( "tr.id-"+json[ 4 ]+" td input[type=text]" )[ 0 ].value = parseFloat( json[ 0 ] ).formatMoneyy();
								$( "tr.id-"+json[ 4 ]+" td input[type=text]" )[ 1 ].value = parseFloat( json[ 1 ] ).formatMoneyy();
								$( "tr.id-"+json[ 4 ]+" td input[type=text]" )[ 2 ].value = parseFloat( json[ 2 ] ).formatMoneyy();
								$( "tr.id-"+json[ 4 ]+" td input[type=text]" )[ 3 ].value = parseFloat( json[ 3 ] ).formatMoney();
								var valores = json[5];
								$( "strong.totalagua-digitado" ).html( valores );
							}
						}
					} );
				} );
			}
			if( $( "input.ngasvl" ).is( "input" )){
				$( "input.ngasvl" ).blur( function(){
					var id_rat = $( this ).parents( "tr" ).attr( "class" ).split( "id-" )[ 1 ].split( " " )[ 0 ];
					var ngasvl = $( "tr.id-"+id_rat+" input[name=ngasvl]" ).val();
					var escolha = $ ( "#escolha" ).val();
					var base = $( "#base" ).val();
					var campo2 = $ ( "#campo2" ).val();
					$.ajax( {
						url: "../include/busca_base.php",
						type: "post",
						data: "busca=0112&id_rat="+id_rat+"&ngasto="+ngasto+"&ngasco="+ngasco+"&ngasvl="+ngasvl+"&escolha="+escolha+"&base="+base,
						success: function( json ){ //alert(json);
							if( json=="err" ){
								exibe_alerta( "Leitura atual � menor que leitura anterior. Verifique pois n�o ser� gravado." );
							}
							else{
								json = json.split( "|" );
								$( "tr.id-"+json[ 4 ]+" td input[type=text]" )[ 0 ].value = parseFloat( json[ 0 ] ).formatMoneyy();
								$( "tr.id-"+json[ 4 ]+" td input[type=text]" )[ 1 ].value = parseFloat( json[ 1 ] ).formatMoneyy();
								$( "tr.id-"+json[ 4 ]+" td input[type=text]" )[ 2 ].value = parseFloat( json[ 2 ] ).formatMoneyy();
								$( "tr.id-"+json[ 4 ]+" td input[type=text]" )[ 3 ].value = parseFloat( json[ 3 ] ).formatMoney();
								var valores = json[5];
								$( "strong.totalagua-digitado" ).html( valores );
							}
						}
					} );
				} );
			}
		}

		if(calrat=="LUZ"){
			if( $( "input.ngasant" ).is( "input" )){
				$( "input.ngasant" ).blur( function(){
					var id_rat = $( this ).parents( "tr" ).attr( "class" ).split( "id-" )[ 1 ].split( " " )[ 0 ];
					var ngasant = $( "tr.id-"+id_rat+" input[name=ngasant]" ).val();
					var escolha = $ ( "#escolha" ).val();
					var base = $( "#base" ).val();
					var campo2 = $ ( "#campo2" ).val();
					$.ajax( {
						url: "../include/busca_base.php",
						type: "post",
						data: "busca=0114&id_rat="+id_rat+"&ngasant="+ngasant+"&ngasto="+ngasto+"&ngasco="+ngasco+"&ngasvl="+ngasvl+"&escolha="+escolha+"&base="+base,
						success: function( json ){ //alert (json);
							if( json=="err" ){
								exibe_alerta( "Leitura atual � menor que leitura anterior. Verifique pois n�o ser� gravado." );
							}
							else{
								json = json.split( "|" );
								$( "tr.id-"+json[ 4 ]+" td input[type=text]" )[ 0 ].value = parseFloat( json[ 0 ] ).formatMoneyy();
								var valores = json[5];
								$( "strong.totalluz-digitado" ).html( valores );
							}
						}
					} );
				} );
			}
			if( $( "input.ngasto" ).is( "input" )){
				$( "input.ngasto" ).blur( function(){
					var id_rat = $( this ).parents( "tr" ).attr( "class" ).split( "id-" )[ 1 ].split( " " )[ 0 ];
					var ngasto = $( "tr.id-"+id_rat+" input[name=ngasto]" ).val();
					var escolha = $ ( "#escolha" ).val();
					var base = $( "#base" ).val();
					var campo2 = $ ( "#campo2" ).val();
					$.ajax( {
						url: "../include/busca_base.php",
						type: "post",
						data: "busca=211&id_rat="+id_rat+"&ngasto="+ngasto+"&ngasco="+ngasco+"&ngasvl="+ngasvl+"&escolha="+escolha+"&base="+base,
						success: function( json ){ //alert(json);
							if( json=="err" ){
								exibe_alerta( "Leitura atual � menor que leitura anterior. Verifique pois n�o ser� gravado." );
							}
							else{
								json = json.split( "|" );
								$( "tr.id-"+json[ 4 ]+" td input[type=text]" )[ 0 ].value = parseFloat( json[ 0 ] ).formatMoneyy();
								$( "tr.id-"+json[ 4 ]+" td input[type=text]" )[ 1 ].value = parseFloat( json[ 1 ] ).formatMoneyy();
								$( "tr.id-"+json[ 4 ]+" td input[type=text]" )[ 2 ].value = parseFloat( json[ 2 ] ).formatMoneyy();
								$( "tr.id-"+json[ 4 ]+" td input[type=text]" )[ 3 ].value = parseFloat( json[ 3 ] ).formatMoney();
								var valores = json[5];
								$( "strong.totalluz-digitado" ).html( valores );
							}
						}
					} );
				} );
			}
			if( $( "input.ngasco" ).is( "input" )){
				$( "input.ngasco" ).blur( function(){
					var id_rat = $( this ).parents( "tr" ).attr( "class" ).split( "id-" )[ 1 ].split( " " )[ 0 ];
					var ngasco = $( "tr.id-"+id_rat+" input[name=ngasco]" ).val();
					var escolha = $ ( "#escolha" ).val();
					var base = $( "#base" ).val();
					var campo2 = $ ( "#campo2" ).val();
					$.ajax( {
						url: "../include/busca_base.php",
						type: "post",
						data: "busca=2111&id_rat="+id_rat+"&ngasto="+ngasto+"&ngasco="+ngasco+"&ngasvl="+ngasvl+"&escolha="+escolha+"&base="+base,
						success: function( json ){ //alert(json);
							if( json=="err" ){
								exibe_alerta( "Leitura atual � menor que leitura anterior. Verifique pois n�o ser� gravado." );
							}
							else{
								json = json.split( "|" );
								$( "tr.id-"+json[ 4 ]+" td input[type=text]" )[ 0 ].value = parseFloat( json[ 0 ] ).formatMoneyy();
								$( "tr.id-"+json[ 4 ]+" td input[type=text]" )[ 1 ].value = parseFloat( json[ 1 ] ).formatMoneyy();
								$( "tr.id-"+json[ 4 ]+" td input[type=text]" )[ 2 ].value = parseFloat( json[ 2 ] ).formatMoneyy();
								$( "tr.id-"+json[ 4 ]+" td input[type=text]" )[ 3 ].value = parseFloat( json[ 3 ] ).formatMoney();
								var valores = json[5];
								$( "strong.totalluz-digitado" ).html( valores );
							}
						}
					} );
				} );
			}
			if( $( "input.ngasvl" ).is( "input" )){
				$( "input.ngasvl" ).blur( function(){
					var id_rat = $( this ).parents( "tr" ).attr( "class" ).split( "id-" )[ 1 ].split( " " )[ 0 ];
					var ngasvl = $( "tr.id-"+id_rat+" input[name=ngasvl]" ).val();
					var escolha = $ ( "#escolha" ).val();
					var base = $( "#base" ).val();
					var campo2 = $ ( "#campo2" ).val();
					$.ajax( {
						url: "../include/busca_base.php",
						type: "post",
						data: "busca=2112&id_rat="+id_rat+"&ngasto="+ngasto+"&ngasco="+ngasco+"&ngasvl="+ngasvl+"&escolha="+escolha+"&base="+base,
						success: function( json ){ //alert(json);
							if( json=="err" ){
								exibe_alerta( "Leitura atual � menor que leitura anterior. Verifique pois n�o ser� gravado." );
							}
							else{
								json = json.split( "|" );
								$( "tr.id-"+json[ 4 ]+" td input[type=text]" )[ 0 ].value = parseFloat( json[ 0 ] ).formatMoneyy();
								$( "tr.id-"+json[ 4 ]+" td input[type=text]" )[ 1 ].value = parseFloat( json[ 1 ] ).formatMoneyy();
								$( "tr.id-"+json[ 4 ]+" td input[type=text]" )[ 2 ].value = parseFloat( json[ 2 ] ).formatMoneyy();
								$( "tr.id-"+json[ 4 ]+" td input[type=text]" )[ 3 ].value = parseFloat( json[ 3 ] ).formatMoney();
								var valores = json[5];
								$( "strong.totalluz-digitado" ).html( valores );
							}
						}
					} );
				} );
			}
		}
	}
}

function fin_forrateiofim_validacao( sobre ){
	if( sobre[ "origem" ].className=="boleto_bol" || sobre[ "origem" ].className=="boleto_ema" ){
		var cmesre = $( "#cmesre" ).val();
		var base = $( "#base" ).val();
		var escolha = $( "#escolha" ).val();
		if( semrateio ){
			exibe_alerta( "Rateio n�o finalizado para emiss�o e envio de boleto." );
			return false;
		}
	}
	return true;
}
function fin_forrateiofim_load( sobre ){
	busca_dadoscond();
	busca_dadoscond( 'u' );
	if( sobre[ "origem" ].className=="finalizar" ){
		fajax('rat_habil','fin_gerarateio.php', 'meio' );
	}
}
function index_sys_validacao( sobre ){
	if( sobre[ "origem" ].tagName=="FORM" ){
		if( $.trim( $( "#crespo" ).val() )=="" ){
			exibe_alerta( "Informe o nome do usu�rio. Campo obrigat�rio." );
			$( "#crespo" ).focus();
			return false;
		}
		if( $.trim( $( "#cemail" ).val() ).length < 10 || $.trim( $( "#cemail" ).val() ).indexOf( "@" ) < 0 || $.trim( $( "#cemail" ).val() ).indexOf( "." ) < 0 ){
			exibe_alerta( "Informe um e-mail v�lido. Campo obrigat�rio.");
			$( "#cemail" ).focus();
			return false;
		}
		if( $.trim( $( "#ddtnas" ).val() )=="" ){
			exibe_alerta( "Informe a data de nascimento. Campo obrigat�rio." );
			$( "#ddtnas" ).focus();
			return false;
		}
		if( $.trim( $( "#cusuar" ).val() )=="" ){
			exibe_alerta( "Informe um login de usu�rio. Campo obrigat�rio." );
			$( "#cusuar" ).focus();
			return false;
		}
		if( $.trim( $( "#csenha" ).val() )=="" ){
			exibe_alerta( "Informe uma senha de usu�rio. Campo obrigat�rio." );
			$( "#csenha" ).focus();
			return false;
		}
		if( $.trim( $( "#ddtcad" ).val() )=="" ){
			exibe_alerta( "Informe a data de expira��o. Campo obrigat�rio." );
			$( "#ddtcad" ).focus();
			return false;
		}
		if( $.trim( $( "#cnivel" ).val() )=="" ){
			exibe_alerta( "Informe o tipo de usu�rio . Campo obrigat�rio." );
			$( "#cnivel" ).focus();
			return false;
		}

		return true;
	}
	else{
		return true;
	}
}

//// rotinas de PERMISS�O
function uti_forpermissao_validacao( sobre ){
	if( sobre[ "origem" ].className=="permite" ){
		if( qtd_marcados( "func" )==0 ){
			exibe_alerta( msgs[ "sel_reg" ] );
			return false;
		}
		else if( qtd_marcados( "func" )>1 ){
			exibe_alerta( msgs[ "um_reg" ] );
			return false;
		}
		else{
			var cbox = $( "input.func" );
			for( var i=0;i<cbox.length;i++ ){
				if( cbox[ i ].checked==true ){
					var id = $( cbox[ i ] ).parents( "tr" ).attr( "class" ).split( "id-" )[ 1 ].split( " " )[ 0 ];
					var ccodig = $.trim( $( "#ccodig-"+id ).val() );
					ajax_url_replace( "%#%", ccodig );
					return true;
				}
			}
		}
	}

	return true;
}

//// rotinas de GERA��O DE SENHA
function uti_gerasenha_validacao( sobre ){
	if( sobre[ "origem" ].id=="apagar" ){
		if( qtd_marcados( "func" )==0 ){
			exibe_alerta( msgs[ "sel_reg" ] );
			return false;
		}
	}

	if( sobre[ "origem" ].className=="transferir" ){
		if( qtd_marcados( "func" )==0 ){
			exibe_alerta( msgs[ "sel_reg" ] );
			return false;
		}
		else if( qtd_marcados( "func" )>1 ){
			exibe_alerta( msgs[ "um_reg" ] );
			return false;
		}
		else{
			var cbox = $( "input.func" );
			for( var i=0;i<cbox.length;i++ ){
				if( cbox[ i ].checked==true ){
					var id = $( cbox[ i ] ).parents( "tr" ).attr( "class" ).split( "id-" )[ 1 ].split( " " )[ 0 ];
					var ccodig = $.trim( $( "#ccodig-"+id ).val() );
					ajax_url_replace( "%#%", ccodig );
					return true;
				}
			}
			return false;
		}

	}
	return true;
}

function uti_gerasenha_load(){
	pagina_atual = 1;
	var filtro = $( "#filtro_atual" ).val();
	var filtro1 = $( "#filtro1" ).val();
	var filtro2 = $( "#filtro2" ).val();
	var base = $( "#base" ).val();
	filtro = ( filtro!="" )?( ( filtro.length==1 )?filtro+"*":"*"+filtro+"*" ):"";
	var vars = "&men_aceita="+men_aceita+"&base="+base+"&filtro1="+filtro1+"&filtro2="+filtro2;
	paginacao( 25, function( results ){
		var men_aceita = $( "#men_aceita" ).val();
	        var base = $( "#base" ).val();
		var filtro1 = $( "#filtro1" ).val();
		var filtro2 = $( "#filtro2" ).val();
		var html = "";
		results.each( function( i, v ){
			html += "<tr class='"+( ( i%2==0 )?"p":"i" )+" id-"+v[ "id" ]+"'"+( i==0?" style='border-top: 1px solid #999;'":"" )+">";
			html += "<td><a href='#' title=\" "+v["nome"]+"\">"+v["nome"]+"</a></td>";
			html += "<td>"+( v[ "cemail" ]==null?"":v[ "cemail" ] )+"</td>";
			html += "<td>"+( v[ "cusuar" ]==null?"":v[ "cusuar" ] )+"</td>";
			html += "<td>"+( v[ "csenha" ]==null?"":v[ "csenha" ] )+"</td>";
			html += "<td>"+v[ "status" ]+"</td>";
			html += "<td class='alincenter'>"+( v[ "cacess" ]==null?"":v[ "cacess" ] )+"</td>";
			html += "<td style='text-align: center;'><input type='checkbox' name=ccodig[]' value='"+v[ "ccodig" ]+"' class='func' />";
			html += "<input type='hidden' name='"+v[ "ccodig" ]+"' id='"+v[ "ccodig" ]+"' value='"+v[ "ccodig" ]+"' /><input type='hidden' name='ccodig-"+v[ "id" ]+"' id='ccodig-"+v[ "id" ]+"' value='"+v[ "id" ]+"' /></td></tr>";
		} );
		$( "table.registros" ).append( html );
	},filtro, vars );
}

//// rotinas de CONTA CORRENTE
function uti_contacorrente_validacao( sobre ){
	var imprim = $( "#imprim" ).val();
	var cnscod = $( "#cnscodp" ).val();

	if(imprim=="BOL"){
		if( sobre[ "origem" ].id=="apagar" ){
			if( qtd_marcados( "func" )==0 ){
				exibe_alerta( msgs[ "sel_reg" ] );
				return false;
			}
			else if( qtd_marcados( "func" )>1 ){
				exibe_alerta( msgs[ "um_reg" ] );
				return false;
			}
		}
	}
        if( sobre[ "origem" ].className=="relatorio"){
		var cnscod = $( "#cnscod").val();
		var base = $( "#base").val();
		if(base==""){
			exibe_alerta( "Selecione um condom�nio. Sele��o obrigat�ria." );
			return false;

		}
		else {
			if(cnscod==""){
				exibe_alerta( "Selecione um propriet�rio. Sele��o obrigat�ria." );
				return false;
			}
			else {
				ajax_url_replace( "%#%", cnscod );
				return true;
			}
		}
	}
        return true;
}

function uti_contacorrente_load(){
	busca_dadoscond();
	pagina_atual = 1;
	var filtro = $( "#filtro_atual" ).val();
	var base = $( "#base" ).val();
	var cnscod = $( "#cnscod" ).val();
	var cmesre = $( "#cmesre" ).val();
	var tembloc = $( "#tembloc" ).val();
	var ccodig = $( "#ccodig" ).val();
	filtro = ( filtro!="" )?( ( filtro.length==1 )?filtro+"*":"*"+filtro+"*" ):"";
	var vars = "&men_aceita="+men_aceita+"&base="+base+"&cnscod="+cnscod+"&cmesre="+cmesre+"&tembloc="+tembloc+"&ccodig="+ccodig;
	paginacao( 26, function( results ){
		var men_aceita = $( "#men_aceita" ).val();
	        var base = $( "#base" ).val();
		var cnscod = $( "#cnscod" ).val();
		var cmesre = $( "#cmesre" ).val();
		var tembloc = $( "#tembloc" ).val();
	        var ccodig = $( "#ccodig" ).val();
		var html = "";
		results.each( function( i, v ){
			html += "<tr class='"+( ( i%2==0 )?"p":"i" )+" id-"+v[ "id" ]+"'"+( i==0?" style='border-top: 1px solid #999;'":"" )+">";
			html += "<td>"+( v[ "cnumap" ]==null?"":v[ "cnumap" ] )+"</td>";
			if(v["usus_tipo"]=="M" && v["csitua"]=="ACO"){
				html += "<td>"+( v[ "nome" ]==null?"":v[ "nome" ] )+"</td>";
			} else {
				if(v["csitua"]=="ACO" || v["csitua"]=="TER"){
					html += "<td><a href='#' onclick='return ajax( \"uti_mosacordo.php?cnscod="+v[ "cnscod" ]+"&men_aceita="+men_aceita+"&base="+base+"&cnumac="+v[ "cnumac" ]+"&ccodig="+ccodig+"\", \"post\", \"popup\" )'>"+v[ "nome" ]+"</a></td>";
				} else {
					html += "<td><a href='#' onclick='return ajax( \"uti_forcontacorrente.php?funcao=alt&id_pro="+v[ "id" ]+"&men_aceita="+men_aceita+"&base="+base+"&cnscod="+v[ "cnscod" ]+"&cmesre="+v[ "cmesre" ]+"&tembloc="+tembloc+"&ccodig="+ccodig+"\", \"post\", \"popup\" )'>"+v[ "nome" ]+"</a></td>";
				}
			}
			html += "<td class=alincenter>"+( v[ "cmesre" ]==null?"":v[ "cmesre" ] )+"</td>";
			html += "<td class=alincenter>"+( v[ "ddtvco" ]==null?"":v[ "ddtvco" ] )+"</td>";
			html += "<td class=alincenter>"+( v[ "titulo" ]==null?"":v[ "titulo" ] )+"</td>";
			html += "<td class=alinright>"+( v[ "nvalor" ]==null?"":v[ "nvalor" ] )+"</td>";
			html += "<td class=alincenter>"+( v[ "ddtbai" ]==null?"":v[ "ddtbai" ] )+"</td>";
			html += "<td class=alinright>"+( v[ "nvlace" ]==null?"":v[ "nvlace" ] )+"</td>";


			if(v[ "stat" ]=="p"){
			    html += "<td style='text-align: center;'>"+( "<img src=../images/xxxx.gif>" )+"</td>";
			} else if (v[ "stat" ]=="t"){
			    html += "<td style='text-align: center;'>"+( "<img src=../images/tique.gif>" )+"</td>";
			} else if (v[ "stat" ]=="c"){
			    html += "<td style='text-align: center;'>"+( "<img src=../images/cancelado.gif>" )+"</td>";
			} else if (v[ "stat" ]=="v"){
			    html += "<td style='text-align: center;'><input type='checkbox' name='id_pro[]' value='"+v[ "id" ]+"' class='func' />";
			    html += "<input type='hidden' name='"+v[ "id" ]+"' id='"+v[ "id" ]+"' value='"+v[ "flag" ]+"' /></td>";
			}
			html += "</tr>";

		} );
		$( "table.registros" ).append( html );
	},filtro, vars );
}

//// rotinas de HISTORICO DE DESPESAS
function uti_histdespesa_load(){
	busca_dadoscond();
	pagina_atual = 1;
	var filtro = $( "#filtro_atual" ).val();
	var base = $( "#base" ).val();
	var cnscod = $( "#cnscod" ).val();
	var tembloc = $( "#tembloc" ).val();
	var ccodig = $( "#ccodig" ).val();
	var despesa = $( "#despesa" ).val();
	var id_cod = $( "#id_cod" ).val();
	filtro = ( filtro!="" )?( ( filtro.length==1 )?filtro+"*":"*"+filtro+"*" ):"";
	var vars = "&men_aceita="+men_aceita+"&base="+base+"&cnscod="+cnscod+"&tembloc="+tembloc+"&ccodig="+ccodig+"&despesa="+despesa+"&id_cod="+id_cod;
	paginacao( 27, function( results ){
		var men_aceita = $( "#men_aceita" ).val();
	        var base = $( "#base" ).val();
		var cnscod = $( "#cnscod" ).val();
		var tembloc = $( "#tembloc" ).val();
	        var ccodig = $( "#ccodig" ).val();
		var despesa = $( "#despesa" ).val();
		var id_cod = $( "#id_cod" ).val();
		var html = "";
		results.each( function( i, v ){ alert (despesa);
			html += "<tr class='"+( ( i%2==0 )?"p":"i" )+" id-"+v[ "id" ]+"'"+( i==0?" style='border-top: 1px solid #999;'":"" )+">";
			html += "<td>"+( v[ "cnscod" ]==null?"":v[ "cnscod" ] )+"</td>";
			html += "<td>"+( v[ "cnumap" ]==null?"":v[ "cnumap" ] )+"</td>";
			if(tembloc=="S"){html += "<td>"+( v[ "cbloco" ]==null?"":v[ "cbloco" ] )+"</td>";}
			html += "<td>"+( v[ "nome" ]==null?"":v[ "nome" ] )+"</td>";
			html += "<td>"+( v[ "cmesre" ]==null?"":v[ "cmesre" ] )+"</td>";
			html += "<td>"+( v[ "ddtvco" ]==null?"":v[ "ddtvco" ] )+"</td>";
			if(despesa=="semgas"){
				html += "<td>"+( v[ "leitan" ]==null?"":v[ "leitan" ] )+"</td>";
				html += "<td>"+( v[ "leitat" ]==null?"":v[ "leitat" ] )+"</td>";
				html += "<td>"+( v[ "leitme" ]==null?"":v[ "leitme" ] )+"</td>";
				html += "<td>"+( v[ "natgas" ]==null?"":v[ "natgas" ] )+"</td>";
			}
			if(despesa=="semagua"){
				html += "<td>"+( v[ "leagan" ]==null?"":v[ "leagan" ] )+"</td>";
				html += "<td>"+( v[ "leagat" ]==null?"":v[ "leagat" ] )+"</td>";
				html += "<td>"+( v[ "leagme" ]==null?"":v[ "leagme" ] )+"</td>";
				html += "<td>"+( v[ "natagu" ]==null?"":v[ "natagu" ] )+"</td>";
			}
			if(despesa=="semfundo"){
				html += "<td>"+( v[ "n_fdre" ]==null?"":v[ "n_fdre" ] )+"</td>";
			}
		} );
		$( "table.registros" ).append( html );
	},filtro, vars );
}

function uti_rateioindiv_validacao( sobre ){
	var cnscod = $( "#cnscodp" ).val();
        if( sobre[ "origem" ].id=="apagar"){
		var cnscod = $( "#cnscod").val();
		if(cnscod==""){
			exibe_alerta( "Selecione um propriet�rio. Sele��o obrigat�ria." );
			return false;
		}
	}
        return true;
}

//// rotinas de RATEIO INDIVIDUAL
function uti_rateioindiv_load(){
	busca_dadoscond();
	pagina_atual = 1;
	var filtro = $( "#filtro_atual" ).val();
	filtro = ( filtro!="" )?( ( filtro.length==1 )?filtro+"*":"*"+filtro+"*" ):"";
	var men_aceita = $( "#men_aceita" ).val();
	var base = $( "#base" ).val();
	var tembloc = $( "#tembloc" ).val();
	var comgas = $( "#comgas" ).val();
	var comagua = $( "#comagua" ).val();
	var cnscod = $( "#cnscodp" ).val();
	var vars = "&men_aceita="+men_aceita+"&base="+base+"&tembloc="+tembloc+"&comgas="+comgas+"&comagua="+comagua+"&cnscod="+cnscod;
	paginacao( 31, function( results ){
		var men_aceita = $( "#men_aceita" ).val();
	        var base = $( "#base" ).val();
		var tembloc = $( "#tembloc" ).val();
		var comgas = $( "#comgas" ).val();
		var comagua = $( "#comagua" ).val();
		var cnscod = $( "#cnscodp" ).val();
		var html = "";
		results.each( function( i, v ){
			html += "<tr class='"+( ( i%2==0 )?"p":"i" )+" id-"+v[ "id" ]+"'"+( i==0?" style='border-top: 1px solid #999;'":"" )+">";
			html += "<td>"+( v[ "cnumap" ]==null?"":v[ "cnumap" ] )+"</td>";
			if( tembloc=="S" ){html += "<td>"+( v[ "cbloco" ]==null?"":v[ "cbloco" ] )+"</td>";}
			html += "<td class='alincenter'>"+( v[ "cmesre" ]==null?"":v[ "cmesre" ] )+"</td>";
			html += "<td class='alincenter'>"+( v[ "ddtvco" ]==null?"":v[ "ddtvco" ] )+"</td>";
			if( comgas=="S" ){html += "<td class='alinright'>"+( v[ "natgas" ]==null?"":v[ "natgas" ] )+"</td>";}
			if( comagua=="S" ){html += "<td class='alinright'>"+( v[ "natagu" ]==null?"":v[ "natagu" ] )+"</td>";}
			html += "<td class='alinright'>"+( v[ "n_cota" ]==null?"":v[ "n_cota" ] )+"</td>";
			html += "<td class='alinright'>"+( v[ "n_fdre" ]==null?"":v[ "n_fdre" ] )+"</td>";
			html += "<td class='alinright'>"+( v[ "noutde" ]==null?"":v[ "noutde" ] )+"</td>";
			html += "<td class='alinright'>"+( v[ "nsercb" ]==null?"":v[ "nsercb" ] )+"</td>";
			html += "<td class='alinright'><a href='#' onclick='return ajax( \"fin_gerarateio.php?funcao=alt&id_rat="+v[ "id" ]+"&men_aceita="+men_aceita+"&base="+base+"&cmesre="+v[ "cmesre" ]+"&tembloc="+tembloc+"\", \"post\", \"popup\" )'>"+v[ "nome" ]+"</a></td></tr>";
		} );

		$( "table.registros" ).append( html );
	}, filtro, vars);
}

//// rotinas de Esqueci Minha Senha
function index_envsenhasys_load( sobre ){
	if( sobre[ "origem" ].tagName=="FORM" ){

		if( fn=="inc" ){
			exibe_alerta( msgs[ "reg_inc" ] );
		}
		else{
			exibe_alerta( msgs[ "reg_alt" ] );
		}
	}
}

function index_envsenhasys_validacao( sobre ){
  if( sobre[ "origem" ].id=="usu_cad" ){
    if( $.trim( $( "#usus_email" ).val() ).length < 10 || $.trim( $( "#usus_email" ).val() ).indexOf( "@" ) < 0 || $.trim( $( "#usus_email" ).val() ).indexOf( "." ) < 0 ){
	exibe_alerta( "Informe um e-mail v�lido. Campo obrigat�rio.");
	$( "#usus_email" ).focus();
	return false;
    }
  }
  return true;
}

//// rotinas de MOVIMENTACAO RATEIO PAGAR
function fin_conrateiopag_load(){
	pagina_atual = 1;
	var filtro = $( "#filtro_atual" ).val();
	filtro = ( filtro!="" )?( ( filtro.length==1 )?filtro+"*":"*"+filtro+"*" ):"";
	var men_aceita = $( "#men_aceita" ).val();
	var ccodig = $( "#ccodig" ).val();
	var ccod = $( "#ccod" ).val();
	var cmesre = $( "#cmesre" ).val();
	var escolha = $( "#escolha" ).val();
	var crelac = $( "#crelac" ).val();
	var vars = "&men_aceita="+men_aceita+"&ccodig="+ccodig+"&ccod="+ccod+"&cmesre="+cmesre+"&escolha="+escolha+"&crelac="+crelac;
	paginacao( 28, function( results ){
		var men_aceita = $( "#men_aceita" ).val();
	        var ccodig = $( "#ccodig" ).val();
		var ccod = $( "#ccod" ).val();
		var cmesre = $( "#cmesre" ).val();
		var escolha = $( "#escolha" ).val();
		var crelac = $( "#crelac" ).val();
		var html = "";
		results.each( function( i, v ){
			html += "<tr class='"+( ( i%2==0 )?"p":"i" )+" id-"+v[ "id" ]+"'"+( i==0?" style='border-top: 1px solid #999;'":"" )+">";
			html += "<td><a href='#' onclick='return ajax( \"fin_forrateiopag.php?funcao=inc&id_rtg="+v[ "id" ]+"&men_aceita="+men_aceita+"&base="+base+"&crelac="+v[ "crelac" ]+"&ccodig="+ccodig+"&ccod="+ccod+"&cmesre="+cmesre+"\", \"post\", \"popup\" )'>"+v[ "capeli" ]+"</a></td>";
			if( ccodig!="" ){html += "<td class=alincenter>"+( v[ "cmesre" ]==null?"":v[ "cmesre" ] )+"</td>";}
			html += "<td class=alincenter>"+( v[ "ddtvco" ]==null?"":v[ "ddtvco" ] )+"</td>";
			html += "<td class='alinright'>"+( v[ "ntotal" ]==null?"":v[ "ntotal" ] )+"</td>";
			html += "<td class='alinright'>"+( v[ "nvlant" ]==null?"":v[ "nvlant" ] )+"</td>";
			html += "<td class='alinright'>"+( v[ "nvlper" ]==null?"":v[ "nvlper" ] )+"</td>";
			html += "<td class='alinright'>"+( v[ "nvlnat" ]==null?"":v[ "nvlnat" ] )+"</td>";
			html += "<td class='alinright'>"+( v[ "qtnant" ]==null?"":v[ "qtnant" ] )+"</td>";
                        if(v[ "crelac" ]==null){
				html += "<td style='text-align: center;'><input type='checkbox' name='id_rtg[]' value='"+v[ "id" ]+"' class='func' />";
				html += "<input type='hidden' name='"+v[ "id" ]+"' id='"+v[ "id" ]+"' value='"+v[ "flag" ]+"' /></td></tr>";
			} else {
				html += "<td style='text-align: center;'><img src='../images/tique.gif' border='0'></td>";
			}

		} );

		$( "table.registros" ).append( html );
	}, filtro, vars);
}

//// rotinas de RATEIO PAGAMENTO
function fin_forrateiopag_validacao( sobre ){
	if( sobre[ "origem" ].id=="popapagar" ){
		if( qtd_marcados( "popfunc" )==0 ){
			exibe_alerta( msgs[ "sel_reg" ] );
			return false;
		}
	}
	if( sobre[ "origem" ].className=="relatorio" ){
		if( $.trim( $( "#cmesre" ).val() )=="" && $.trim( $( "#ccodig" ).val() )=="" ){
			exibe_alerta( "Selecione um m�s refer�ncia ou condom�nio. Campo obrigat�rio." );
			$( "#cmesre" ).focus();
			return false;
		}
	}
	if( sobre[ "origem" ].className=="pagar" ){
		//if( $.trim( $( "#cmesre" ).val() )=="" ){
		//	exibe_alerta( "Selecione um m�s refer�ncia. Campo obrigat�rio." );
		//	$( "#cmesre" ).focus();
		//	return false;
		//}
		if( qtd_marcados( "func" )==0 ){
			exibe_alerta( msgs[ "sel_reg" ] );
			return false;
		}
		else if( qtd_marcados( "func" )>1 ){
			exibe_alerta( msgs[ "um_reg" ] );
			return false;
		}
		else{
			var cbox = $( "input.func" );
			for( var i=0;i<cbox.length;i++ ){
				if( cbox[ i ].checked==true ){
					var id = $( cbox[ i ] ).parents( "tr" ).attr( "class" ).split( "id-" )[ 1 ].split( " " )[ 0 ];
					var id_rtg = $.trim( $( "#id_rtg-"+id ).val() );
					ajax_url_replace( "%#%", id_rtg );
					return true;
				}
			}
		}
	}

	if( sobre[ "origem" ].id=="popimpr" ){
		var nvlsdo = parseFloat( $( "#nvlsdo" ).val().replace( ".", "" ).replace( ",", "." ) );
                if(nvlsdo!=0.00){
			exibe_alerta( msgs[ "rat_pgo" ] );
			return false;
		}
	}

	if( sobre[ "origem" ].id=="popimprrel" ){
		var nvlsdo = parseFloat( $( "#nvlsdo" ).val().replace( ".", "" ).replace( ",", "." ) );
                if(nvlsdo!=0.00){
			exibe_alerta( msgs[ "rat_pgo" ] );
			return false;
		}
	}

	if( sobre[ "origem" ].id=="cad_rata" ){
		var nvlant = parseFloat( $( "#nvlant" ).val().replace( ".", "" ).replace( ",", "." ) );
		var nvlpgo = parseFloat( $( "#nvlpgo" ).val().replace( ".", "" ).replace( ",", "." ) );
		var ntotal = parseFloat( $( "#ntotal" ).val().replace( ".", "" ).replace( ",", "." ) );
		if( $.trim( $( "#ddtmov" ).val() )=="" ){
			exibe_alerta( "A data de movimenta��o n�o pode ser vazia. Campo obrigat�rio." );
			$( "#ddtmov" ).focus();
			return false;
		}
		if( $.trim( $( "#cchequ" ).val() )=="" ){
			exibe_alerta( "Informe o n�mero do cheque ou doc. Campo obrigat�rio." );
			$( "#cchequ" ).focus();
			return false;
		}
		if( $.trim( $( "#cbanco" ).val() )=="" ){
			exibe_alerta( "Informe o banco ou caixa. Campo obrigat�rio." );
			$( "#cbanco" ).focus();
			return false;
		}
		if( $.trim( $( "#forma" ).val() )=="" ){
			exibe_alerta( "Informe a forma de pagamento. Campo obrigat�rio." );
			$( "#forma" ).focus();
			return false;
		}
		if( $.trim( $( "#forma" ).val() )!="" ){
			if( $.trim( $( "#ctades" ).val() )!="" ){
				if( $.trim( $( "#forma" ).val() )!="DES" ){
					exibe_alerta( "Informe a forma como (-)desconto. Existe conta selecionada." );
					$( "#forma" ).focus();
					return false;
				}
			}
		}
		if( $.trim( $( "#forma" ).val() )=="DES" ){
			if( $.trim( $( "#ctades" ).val() )=="" ){
				exibe_alerta( "Informe uma conta de desconto. Campo obrigat�rio." );
				$( "#forma" ).focus();
				return false;
			}
		}
		if( $.trim( $( "#ntotal" ).val() )=="" ){
			exibe_alerta( "Informe o valor a pagar. Campo obrigat�rio." );
			$( "#ntotal" ).focus();
			return false;
		}


		if( $.trim( $( "#ddtpre" ).val() )=="" ){
			exibe_alerta( "A data de previs�o n�o pode ser vazia. Campo obrigat�rio." );
			$( "#ddtpre" ).focus();
			return false;
		}
		if(nvlpgo==nvlant){
			exibe_alerta( msgs[ "rat_tot" ] );
			$( "#ntotal" ).focus();
			return false;
		}

		if((nvlpgo+ntotal)>nvlant){
			exibe_alerta( msgs[ "rat_mai" ] );
			$( "#ntotal" ).focus();
			return false;
		}
		return true;
	}
	else{
		return true;
	}
}

//// rotinas de MOVIMENTACAO RATEIO NAO ANTECIPADO
function fin_conrateionao_load(){
	pagina_atual = 1;
	var filtro = $( "#filtro_atual" ).val();
	filtro = ( filtro!="" )?( ( filtro.length==1 )?filtro+"*":"*"+filtro+"*" ):"";
	var men_aceita = $( "#men_aceita" ).val();
	var ccodig = $( "#ccodig" ).val();
	var cmesre = $( "#cmesre" ).val();
	var escolha = $( "#escolha" ).val();
	var crelac = $( "#crelac" ).val();
	var vars = "&men_aceita="+men_aceita+"&ccodig="+ccodig+"&cmesre="+cmesre+"&escolha="+escolha+"&crelac="+crelac;
	paginacao( 29, function( results ){
		var men_aceita = $( "#men_aceita" ).val();
	        var ccodig = $( "#ccodig" ).val();
		var cmesre = $( "#cmesre" ).val();
		var escolha = $( "#escolha" ).val();
		var crelac = $( "#crelac" ).val();
		var html = "";
		results.each( function( i, v ){
			html += "<tr class='"+( ( i%2==0 )?"p":"i" )+" id-"+v[ "id" ]+"'"+( i==0?" style='border-top: 1px solid #999;'":"" )+">";
			html += "<td>"+( v[ "capeli" ]==null?"":v[ "capeli" ] )+"</td>";
			if( ccodig!="" ){html += "<td class=alincenter>"+( v[ "cmesre" ]==null?"":v[ "cmesre" ] )+"</td>";}
			html += "<td class=alincenter>"+( v[ "ddtvco" ]==null?"":v[ "ddtvco" ] )+"</td>";
			html += "<td class='alincenter'>"+( v[ "qtnant" ]==null?"":v[ "qtnant" ] )+"</td>";
			html += "<td class='alinright'>"+( v[ "nvlant" ]==null?"":v[ "nvlant" ] )+"</td>";
			html += "<td class='alincenter'>"+( v[ "qtder" ]==null?"":v[ "qtder" ] )+"</td>";
			html += "<td class='alinright'>"+( v[ "totvlr" ]==null?"":v[ "totvlr" ] )+"</td>";
			html += "<td class='alinright'>"+( v[ "acerto" ]==null?"":v[ "acerto" ] )+"</td>";
			html += "<td class='alinright'>"+( v[ "recpgo" ]==null?"":v[ "recpgo" ] )+"</td>";
			if(v[ "acerto" ]==null || v[ "recnat" ]!=v[ "acerto" ]){
				html += "<td style='text-align: center;'><input type='checkbox' name='id_rtg[]' value='"+v[ "id" ]+"' class='func' />";
				html += "<input type='hidden' name='"+v[ "id" ]+"' id='"+v[ "id" ]+"' value='"+v[ "flag" ]+"' /></td></tr>";
			} else {
				html += "<td style='text-align: center;'><img src='../images/tique.gif' border='0'></td>";
			}

		} );

		$( "table.registros" ).append( html );
	}, filtro, vars);
}

//// rotinas de RATEIO PAGAMENTO
function fin_forrateionao_validacao( sobre ){
	if( sobre[ "origem" ].id=="popapagar" ){
		if( qtd_marcados( "popfunc" )==0 ){
			exibe_alerta( msgs[ "sel_reg" ] );
			return false;
		}
	}
	if( sobre[ "origem" ].className=="visualizar" ){
		if( qtd_marcados( "func" )==0 ){
			exibe_alerta( msgs[ "sel_reg" ] );
			return false;
		}
		else if( qtd_marcados( "func" )>1 ){
			exibe_alerta( msgs[ "um_reg" ] );
			return false;
		}
		else{
			var cbox = $( "input.func" );
			for( var i=0;i<cbox.length;i++ ){
				if( cbox[ i ].checked==true ){
					var id = $( cbox[ i ] ).parents( "tr" ).attr( "class" ).split( "id-" )[ 1 ].split( " " )[ 0 ];
					var id_rtg = $.trim( $( "#id_rtg-"+id ).val() );
					ajax_url_replace( "%#%", id_rtg );
					return true;
				}
			}
		}
	}
	if( sobre[ "origem" ].className=="recibo" ){
		if( qtd_marcados( "func" )==0 ){
			exibe_alerta( msgs[ "sel_reg" ] );
			return false;
		}
		else if( qtd_marcados( "func" )>1 ){
			exibe_alerta( msgs[ "um_reg" ] );
			return false;
		}
		else{
			var cbox = $( "input.func" );
			for( var i=0;i<cbox.length;i++ ){
				if( cbox[ i ].checked==true ){
					var id = $( cbox[ i ] ).parents( "tr" ).attr( "class" ).split( "id-" )[ 1 ].split( " " )[ 0 ];
					var id_rtg = $.trim( $( "#id_rtg-"+id ).val() );
					ajax_url_replace( "%#%", id_rtg );
					return true;
				}
			}
		}
	}
	if( sobre[ "origem" ].id=="cad_rat" ){
		var nvlant = parseFloat( $( "#nvlant" ).val().replace( ".", "" ).replace( ",", "." ) );
		var nvlpgo = parseFloat( $( "#nvlpgo" ).val().replace( ".", "" ).replace( ",", "." ) );
		var ntotal = parseFloat( $( "#ntotal" ).val().replace( ".", "" ).replace( ",", "." ) );

		if( $.trim( $( "#ddtmov" ).val() )=="" ){
			exibe_alerta( "A data de movimenta��o n�o pode ser vazia. Campo obrigat�rio." );
			$( "#ddtmov" ).focus();
			return false;
		}
		if( $.trim( $( "#cchequ" ).val() )=="" ){
			exibe_alerta( "Informe o n�mero do cheque ou doc. Campo obrigat�rio." );
			$( "#cchequ" ).focus();
			return false;
		}
		if( $.trim( $( "#cbanco" ).val() )=="" ){
			exibe_alerta( "Informe o banco ou caixa. Campo obrigat�rio." );
			$( "#cbanco" ).focus();
			return false;
		}
		if( $.trim( $( "#ntotal" ).val() )=="" ){
			exibe_alerta( "Informe o valor a pagar. Campo obrigat�rio." );
			$( "#ntotal" ).focus();
			return false;
		}
		if( $.trim( $( "#ddtpre" ).val() )=="" ){
			exibe_alerta( "A data de previs�o n�o pode ser vazia. Campo obrigat�rio." );
			$( "#ddtpre" ).focus();
			return false;
		}
		if(nvlpgo==nvlant){
			exibe_alerta( msgs[ "rat_tot" ] );
			$( "#ntotal" ).focus();
			return false;
		}

		if((nvlpgo+ntotal)>nvlant){
			exibe_alerta( msgs[ "rat_mai" ] );
			$( "#ntotal" ).focus();
			return false;
		}


		return true;
	}
	else{
		return true;
	}
}


//// rotinas de RATEIO PAGAMENTO NAO ANTECIPAFDO
function fin_conrateioind_validacao( sobre ){
	if( sobre[ "origem" ].id=="papagar" ){
		if( qtd_marcados( "pfunc" )==0 ){
			exibe_alerta( msgs[ "sel_reg" ] );
			return false;
		}
	}
	if( sobre[ "origem" ].className=="visualizar" ){
		var situacnao = $( "#situacnao" ).val();
		if(situacnao!="TOD" && situacnao!="IND"){
			if( $.trim( $( "#cmesre" ).val() )=="" ){
				exibe_alerta( "Selecione um m�s ref. ou condom�nio. Campo obrigat�rio." );
				$( "#cmesre" ).focus();
				return false;
			}
		} else if(situacnao=="IND"){
			if( qtd_marcados( "func" )==0 ){
				exibe_alerta( msgs[ "sel_reg" ] );
				return false;
			}
			else if( qtd_marcados( "func" )>1 ){
				exibe_alerta( msgs[ "um_reg" ] );
				return false;
			}
			else{
				var cbox = $( "input.func" );
				for( var i=0;i<cbox.length;i++ ){
					if( cbox[ i ].checked==true ){
						var id = $( cbox[ i ] ).parents( "tr" ).attr( "class" ).split( "id-" )[ 1 ].split( " " )[ 0 ];
						var id_rtg = $.trim( $( "#id_rtg-"+id ).val() );
						ajax_url_replace( "%#%", id_rtg );
						return true;
					}
				}
			}
		}
	}
	return true;
}

function fin_forrateioind_validacao( sobre ){
	if( sobre[ "origem" ].id=="popapagar" ){
		if( qtd_marcados( "popfunc" )==0 ){
			exibe_alerta( msgs[ "sel_reg" ] );
			return false;
		}
	}

	if( sobre[ "origem" ].id=="papagari" ){
		if( qtd_marcados( "ppfunc" )==0 ){
			exibe_alerta( msgs[ "sel_reg" ] );
			return false;
		}
	}

	if( sobre[ "origem" ].className=="pagar" ){
		if( qtd_marcados( "func" )==0 ){
			exibe_alerta( msgs[ "sel_reg" ] );
			return false;
		}
		else if( qtd_marcados( "func" )>1 ){
			exibe_alerta( msgs[ "um_reg" ] );
			return false;
		}
		else{
			var cbox = $( "input.func" );
			for( var i=0;i<cbox.length;i++ ){
				if( cbox[ i ].checked==true ){
					var id = $( cbox[ i ] ).parents( "tr" ).attr( "class" ).split( "id-" )[ 1 ].split( " " )[ 0 ];
					var id_rtg = $.trim( $( "#id_rtg-"+id ).val() );
					ajax_url_replace( "%#%", id_rtg );
					return true;
				}
			}
		}
	}

	if( sobre[ "origem" ].className=="relatorio" ){
		if( $.trim( $( "#cmesre" ).val() )=="" && $.trim( $( "#ccodig" ).val() )=="" ){
			exibe_alerta( "Selecione um m�s refer�ncia ou condom�nio. Campo obrigat�rio." );
			$( "#cmesre" ).focus();
			return false;
		}
	}

	if( sobre[ "origem" ].id=="popimpr" ){
		var nvlant = parseFloat( $( "#nvlant" ).val().replace( ".", "" ).replace( ",", "." ) );
		var nvlpgo = parseFloat( $( "#nvlpgo" ).val().replace( ".", "" ).replace( ",", "." ) );
		var ntotal = parseFloat( $( "#ntotal" ).val().replace( ".", "" ).replace( ",", "." ) );
		if(nvlpgo<nvlant){
			exibe_alerta( msgs[ "rat_nao" ] );
			$( "#ntotal" ).focus();
			return false;
		}
	}
	if( sobre[ "origem" ].id=="popimprrel" ){
		var nvlant = parseFloat( $( "#nvlant" ).val().replace( ".", "" ).replace( ",", "." ) );
		var nvlpgo = parseFloat( $( "#nvlpgo" ).val().replace( ".", "" ).replace( ",", "." ) );
		var ntotal = parseFloat( $( "#ntotal" ).val().replace( ".", "" ).replace( ",", "." ) );
		if(nvlpgo<nvlant){
			exibe_alerta( msgs[ "rat_nao" ] );
			$( "#ntotal" ).focus();
			return false;
		}
	}
	if( sobre[ "origem" ].id=="cad_ratn" ){
		var nvlant = parseFloat( $( "#nvlant" ).val().replace( ".", "" ).replace( ",", "." ) );
		var nvlpgo = parseFloat( $( "#nvlpgo" ).val().replace( ".", "" ).replace( ",", "." ) );
		var ntotal = parseFloat( $( "#ntotal" ).val().replace( ".", "" ).replace( ",", "." ) );
                var funcao = $( "#funcao" ).val();
		var nvlant = parseFloat( $( "#nvlant" ).val().replace( ".", "" ).replace( ",", "." ) );
		var nvlpgo = parseFloat( $( "#nvlpgo" ).val().replace( ".", "" ).replace( ",", "." ) );
		var ntotal = parseFloat( $( "#ntotal" ).val().replace( ".", "" ).replace( ",", "." ) );

		if( $.trim( $( "#ddtmov" ).val() )=="" ){
			exibe_alerta( "A data de movimenta��o n�o pode ser vazia. Campo obrigat�rio." );
			$( "#ddtmov" ).focus();
			return false;
		}
		if( $.trim( $( "#cchequ" ).val() )=="" ){
			exibe_alerta( "Informe o n�mero do cheque ou doc. Campo obrigat�rio." );
			$( "#cchequ" ).focus();
			return false;
		}
		if( $.trim( $( "#cbanco" ).val() )=="" ){
			exibe_alerta( "Informe o banco ou caixa. Campo obrigat�rio." );
			$( "#cbanco" ).focus();
			return false;
		}
		if( $.trim( $( "#forma" ).val() )!="" ){
			if( $.trim( $( "#ctades" ).val() )!="" ){
				if( $.trim( $( "#forma" ).val() )!="DES" ){
					exibe_alerta( "Informe a forma como (-)desconto. Existe conta selecionada." );
					$( "#forma" ).focus();
					return false;
				}
			}
		}
		if( $.trim( $( "#forma" ).val() )=="DES" ){
			if( $.trim( $( "#ctades" ).val() )=="" ){
				exibe_alerta( "Informe uma conta de desconto. Campo obrigat�rio." );
				$( "#forma" ).focus();
				return false;
			}
		}
		if( $.trim( $( "#ntotal" ).val() )=="" ){
			exibe_alerta( "Informe o valor a pagar. Campo obrigat�rio." );
			$( "#ntotal" ).focus();
			return false;
		}
		if( $.trim( $( "#ddtpre" ).val() )=="" ){
			exibe_alerta( "A data de previs�o n�o pode ser vazia. Campo obrigat�rio." );
			$( "#ddtpre" ).focus();
			return false;
		}

                $( "#ntotal" ).val( ( nvlpgo+ntotal ).formatMoney() );
		if(nvlpgo==nvlant){
			exibe_alerta( msgs[ "rat_tot" ] );
			$( "#ntotal" ).focus();
			return false;
		}

		if(ntotal>nvlant){
			exibe_alerta( msgs[ "rat_mai" ] );
			$( "#ntotal" ).focus();
			return false;
		}
		return true;
	}
	else{
		return true;
	}
}

// rotinas de PENDENCIA
//function fin_movmospendencia_load(){
//	var escolh = $( "#escolh" ).val();
//	if(escolh=="e"){busca_dadoscondjur();} else {busca_dadoscond();}
//	pagina_atual = 1;
//	var filtro = $( "#filtro_atual" ).val();
//	filtro = ( filtro!="" )?( ( filtro.length==1 )?filtro+"*":"*"+filtro+"*" ):"";
//	var men_aceita = $( "#men_aceita" ).val();
//	var base = $( "#base" ).val();
//	var cnscod = $( "#cnscod" ).val();
//	var tembloc = $( "#tembloc" ).val();
//	var vars = "&men_aceita="+men_aceita+"&base="+base+"&cnscod="+cnscod+"&tembloc="+tembloc;
//	paginacao( 30, function( results ){
//		var men_aceita = $( "#men_aceita" ).val();
//	        var base = $( "#base" ).val();
//		var cnscod = $( "#cnscod" ).val();
//		var tembloc = $( "#tembloc" ).val();
//		var html = "";
//		results.each( function( i, v ){
//			html += "<tr class='"+( ( i%2==0 )?"p":"i" )+" id-"+v[ "id" ]+"'"+( i==0?" style='border-top: 1px solid #999;'":"" )+">";
//			html += "<td class=alincenter>"+( v[ "cnumap" ]==null?"":v[ "cnumap" ] )+"</td>";
//			html += "<td>"+( v[ "cnomes" ]==null?"":v[ "cnomes" ] )+"</td>";
//			html += "<td class=alincenter>"+( v[ "cnumbc" ]==null?"":v[ "cnumbc" ] )+"</td>";
//			html += "<td class=alincenter>"+( v[ "cmesre" ]==null?"":v[ "cmesre" ] )+"</td>";
//			html += "<td class=alincenter>"+( v[ "ddtvco" ]==null?"":v[ "ddtvco" ] )+"</td>";
//			html += "<td class=alinright><a href='#' title=\"Clique aqui para ver o rateio ref. "+v["cmesre"]+"\" onclick='return ajax( \"uti_forcontacorrente.php?funcao=alt&id_pro="+v[ "id" ]+"&men_aceita="+men_aceita+"&base="+base+"&cnscod="+v[ "cnscod" ]+"&cmesre="+v["cmesre"]+"&tembloc="+tembloc+"\", \"post\", \"popup\" )'>"+v[ "nvalor" ]+"</a></td>";
//			html += "<td class=alinright>"+( v[ "par_total" ]==null?"":v[ "par_total" ] )+"</td>";
//			html += "<td style='text-align: center;'><input type='checkbox' name='id_pro[]' value='"+v[ "id" ]+"' class='func' />";
//			html += "<input type='hidden' name='"+v[ "id" ]+"' id='"+v[ "id" ]+"' value='"+v[ "flag" ]+"' /></td>";
//			if(v[ "status" ]=="Imp"){
//			  html += "<td class=alincenter><a href='#' title=\"Boleto Impresso em "+v["dataemis"]+" �s "+v["horaemis"]+" no IP "+v["ipemis"]+"\">"+v["status"]+"</a></td></tr>";
//			} else if(v[ "status" ]=="Env"){
//			  html += "<td class=alincenter><a href='#' title=\"Boleto Enviado on line em "+v["dataemis"]+" �s "+v["horaemis"]+" no IP "+v["ipemis"]+"\">"+v["status"]+"</a></td></tr>";
//			} else if(v[ "status" ]=="Vis"){
//			  html += "<td class=alincenter><a href='#' title=\"Boleto Visualizado on line em "+v["dataemis"]+" �s "+v["horaemis"]+" no IP "+v["ipemis"]+"\">"+v["status"]+"</a></td></tr>";
//			} else {
//			  html += "<td class=alincenter></td></tr>";
//			}
//		} );
//		$( "table.registros" ).append( html );
//	},filtro, vars );
//}

function fin_forpendencia_validacao( sobre ){
	if( sobre[ "origem" ].id=="apagar" ){
		var situac = $( "#situac" ).val();
		if( $.trim( $( "#cnscod" ).val() )=="" ){
			if(situac=="ACO"){
				exibe_alerta( "Selecione para acordo um propriet�rio especifico." );
				$( "#cnscod" ).focus();
				return false;
			} else if(situac=="TRA"){
				exibe_alerta( "Selecione para trasnfer�ncia um propriet�rio especifico." );
				$( "#cnscod" ).focus();
				return false;
			}
		}

		if(situac=="TRA"){
			if( qtd_marcados( "func" )==0 ){
				exibe_alerta( msgs[ "sel_reg" ] );
				return false;
			}
		}

		if(situac=="ACO"){
			if( qtd_marcados( "func" )==0 ){
				exibe_alerta( msgs[ "sel_reg" ] );
				return false;
			}
		}
	}

	if( sobre[ "origem" ].id=="fec_aco" ){
		var imboac = $( "#imboac" ).val();
		if(imboac=="EXC"){
			if( qtd_marcados( "afunc" )==0 ){
				exibe_alerta( msgs[ "tod_reg" ] );
				return false;
			}
		}
		else {
			if( qtd_marcados( "afunc" )==0 ){
				exibe_alerta( msgs[ "sel_reg" ] );
				return false;
			}
			//else if( qtd_marcados( "afunc" )>1 ){
			//	exibe_alerta( msgs[ "um_reg" ] );
			//	return false;
			//}
		}
	}

	if( sobre[ "origem" ].className=="boleto_bol" || sobre[ "origem" ].className=="boleto_ema"){
		if( qtd_marcados( "func" )==0 ){
			exibe_alerta( msgs[ "sel_reg" ] );
			return false;
		}
		else if( qtd_marcados( "func" )>1 ){
			exibe_alerta( msgs[ "um_reg" ] );
			return false;
		}
		else {
			var cbox = $( "input.func" );
			for( var i=0;i<cbox.length;i++ ){
				if( cbox[ i ].checked==true ){
					var id = $( cbox[ i ] ).parents( "tr" ).attr( "class" ).split( "id-" )[ 1 ].split( " " )[ 0 ];
					var id_pro = $.trim( $( "#id_pro-"+id ).val() );
					ajax_url_replace( "%#%", id_pro );
				}
			}
			var base = $.trim( $( "#base").val() );
			$.ajax( {
				url: "../include/busca_base.php",
				type: "post",
				data: "busca=021&id_pro="+id_pro+"&base="+base,
				success: function( json ){ //alert (json);
					json = json.split( "|" );
					campo_1 = json[ 0 ];
					campo_2 = json[ 1 ];
					if(campo_2=="TER"){
//						exibe_alerta( "Pend�cia nesta situa��o n�o imprime boleto ou envia e-mail. Gere um acordo" );
						return false;
					} else if(campo_1<=0){
//						exibe_alerta( "Valor negativo n�o emite boleto e n�o envia e-mail." );
						return false;
					}
					else {
						return true;
					}
				}
			} );
		}
	}

        if( sobre[ "origem" ].className=="incluir"){
		var cnscod = $.trim( $( "#cnscod").val() );
                if ( cnscod == ""){
			exibe_alerta( "Selecione um propriet�rio. Sele��o obrigat�ria" );
			return false;
		} else {
			ajax_url_replace( "%#%", cnscod );
			return true;
		}
	}

        if( sobre[ "origem" ].className=="relatorio"){
		var cnscod = $.trim( $( "#cnscod").val() );
		ajax_url_replace( "%#%", cnscod );
		return true;
	}

	if( sobre[ "origem" ].className=="transferir"){
		if( qtd_marcados( "func" )==0 ){
			exibe_alerta( msgs[ "sel_reg" ] );
			return false;
		}
		else if( qtd_marcados( "func" )>1 ){
			exibe_alerta( msgs[ "um_reg" ] );
			return false;
		} else {
			var cbox = $( "input.func" );
			for( var i=0;i<cbox.length;i++ ){
				if( cbox[ i ].checked==true ){
					var id = $( cbox[ i ] ).parents( "tr" ).attr( "class" ).split( "id-" )[ 1 ].split( " " )[ 0 ];
					var id_pro = $.trim( $( "#id_pro-"+id ).val() );
					ajax_url_replace( "%#%", id_pro );
				}
			}
		}
	}


        if( sobre[ "origem" ].className=="excel"){
		var cnscod = $.trim( $( "#cnscod").val() );
		ajax_url_replace( "%#%", cnscod );
		return true;
	}

        if( sobre[ "origem" ].id=="exce_ver"){
		var cnscod = $.trim( $( "#cnscod").val() );
		if( $.trim( $( "#arquinome" ).val() )=="" ){
			exibe_alerta( "Informe o nome do arquivo. Campo obrigat�rio." );
			$( "#arquinome" ).focus();
			return false;
		}
	}

	if( sobre[ "origem" ].id=="pend_com" ){
		if( $.trim( $( "#comentario" ).val() )=="" ){
			exibe_alerta( "Coment�rio n�o pode ser vazio. Campo obrigat�rio." );
			$( "#comentario" ).focus();
			return false;
		}
	}

	if( sobre[ "origem" ].id=="imp_tel" ){
		if( $.trim( $( "#ctelef" ).val() )=="" ){
			exibe_alerta( "Indique pelo menos um telefone. Campo obrigat�rio." );
			$( "#ctelef" ).focus();
			return false;
		} else {
			var cnscod = $.trim( $( "#cnscod" ).val());
			var base = $.trim( $( "#base" ).val());
			var men_aceita = $.trim( $( "#men_aceita" ).val());
			var escolha = $.trim( $( "#escolha" ).val());
			ajax( "fin_movmospendencia.php?men_aceita="+men_aceita+"&cnscodp="+cnscod+"&base="+base+"&escolha="+escolha+"&socont=sim&mostrar=sim", "post", "!conteudo_int");

		}
	}

	if( sobre[ "origem" ].id=="tra_pend" ){
		if( $.trim( $( "#usu_codigo" ).val() )=="" ){
			exibe_alerta( "Indique um usu�rio jur�dico. Campo obrigat�rio." );
			$( "#usu_codigo" ).focus();
			return false;
		}
	}

	if( sobre[ "origem" ].id=="exc_pend" ){
		if( qtd_marcados( "pfunc" )==0 ){
			exibe_alerta( msgs[ "sel_reg" ] );
			return false;
		}
	}

	if( sobre[ "origem" ].id=="avu_pend" ){
		var cnscod = $.trim( $( "#cnscod" ).val() );
		var cbcoem = $.trim( $( "#cbcofx" ).val() );
		var base = $.trim( $( "#base" ).val() );
		if( $.trim( $( "#ctades" ).val() )=="" && $.trim( $( "#cdescr" ).val() )!=""){
			if( $.trim( $( "#tipo" ).val() )==""){
				exibe_alerta( "Indique o tipo da conta. Campo obrigat�rio." );
				$( "#tipo" ).focus();
				return false;
			}
		} else
		if( $.trim( $( "#ctades" ).val() )=="" && $.trim( $( "#cdescr" ).val() )==""){
			exibe_alerta( "Selecione uma conta ou inclua uma para rateio. Campo obrigat�rio." );
			$( "#ctades" ).focus();
			return false;
		}
		if( $.trim( $( "#cmesre" ).val() )=="" ){
			exibe_alerta( "Informe o m�s ref. Campo obrigat�rio." );
			$( "#cmesre" ).focus();
			return false;
		}
		if( $.trim( $( "#ddtvco" ).val() )=="" ){
			exibe_alerta( "Informe o vencimento. Campo obrigat�rio." );
			$( "#ddtvco" ).focus();
			return false;
		}
		if( $.trim( $( "#nvalor" ).val() )=="" ){
			exibe_alerta( "Informe o valor. Campo obrigat�rio." );
			$( "#nvalor" ).focus();
			return false;
		}
		return true;
	}


	if( sobre[ "origem" ].id=="inc_pend" ){
		var cnscod = $.trim( $( "#cnscod" ).val() );
		var cmesre = $.trim( $( "#cmesre" ).val() );
		var base = $.trim( $( "#base" ).val() );
		var acor_do = $.trim( $( "#acor_do" ).val() );
		$.ajax( {
			url: "../include/busca_base.php",
			type: "post",
			data: "busca=015&cnscod="+cnscod+"&base="+base+"&cmesre="+cmesre,
			success: function( json ){
				if( json!="" ){
					$( "#mesrec" ).val(json);
					 return false;
				} else {
					$( "#mesrec" ).val(json);
					return true;
				}
			}
		} );
		if( $.trim( $( "#cmesre" ).val() )=="" ){
			exibe_alerta( "Informe o m�s ref. da pend�ncia. Campo obrigat�rio." );
			$( "#cmesre" ).focus();
			return false;
		}
		if( $.trim( $( "#cmesre" ).val()) == $.trim( $( "#mesrec" ).val()) ){
			exibe_alerta( msgs[ "pen_mes" ] );
			$( "#cmesre" ).focus();
			return false;
		}
		if( $.trim( $( "#ddtvco" ).val() )=="" ){
			exibe_alerta( "Informe o vencimento da pend�ncia. Campo obrigat�rio." );
			$( "#ddtvco" ).focus();
			return false;
		}
		if( $.trim( $( "#nvalor" ).val() )==""){
			exibe_alerta( "Informe o valor da pend�ncia. Campo obrigat�rio." );
			$( "#nvalor" ).focus();
			return false;
		}
		if( $.trim( $( "#csitua" ).val() )=="" ){
			exibe_alerta( "Status n�o pode ser vazia. Campo obrigat�rio." );
			$( "#csitua" ).focus();
			return false;
		}
		if( acor_do=="S" ){
			if( $.trim( $( "#nvlmul" ).val() )=="" && $.trim( $( "#nvljur" ).val() )=="" && $.trim( $( "#nvlcor" ).val() )=="" && $.trim( $( "#nvlhon" ).val() )=="" && $.trim( $( "#nvlcus" ).val() )=="" && $.trim( $( "#nvl475" ).val() )==""){
				exibe_alerta( "Informe o valor pelo menos uns dos valores abaixo. Campo obrigat�rio." );
				$( "#nvlmul" ).focus();
				return false;
			}
			if( $.trim( $( "#usu_codigo" ).val() )=="" ){
				exibe_alerta( "Indique um usu�rio. Campo obrigat�rio." );
				$( "#usu_codigo" ).focus();
				return false;
			}
		}
		return true;
	}

	if( sobre[ "origem" ].id=="imp_pend" ){
		if( $.trim( $( "#cbcofx" ).val() )=="" ){
			exibe_alerta( "Banco para impress�o n�o pode ser vazio. Campo obrigat�rio." );
			$( "#cbcofx" ).focus();
			return false;
		}
	}

	if( sobre[ "origem" ].id=="com_pend" ){
		if( $.trim( $( "#assunto" ).val() )=="" ){
			exibe_alerta( "Fa�a seu coment�rio. Campo obrigat�rio." );
			$( "#assunto" ).focus();
			return false;
		}
	}

	if( sobre[ "origem" ].id=="tro_ver" ){
		if( $.trim( $( "#ddtvco" ).val() )=="" ){
			exibe_alerta( "Indique um novo vencimento. Campo obrigat�rio." );
			$( "#ddtvco" ).focus();
			return false;
		}
	}

	if( sobre[ "origem" ].id=="ema_penda" ){
		var ema = $.trim( $( "#cemailp" ).val());
		var ama = $.trim( $( "#cemaila" ).val());
		if(ama==""){
			if( $.trim( $( "#cemailp" ).val() ).length < 10 || $.trim( $( "#cemailp" ).val() ).indexOf( "@" ) < 0 || $.trim( $( "#cemailp" ).val() ).indexOf( "." ) < 0 ){
				exibe_alerta( "Indique pelo menos um email v�lido. Campo obrigat�rio." );
				$( "#cemailp" ).focus();
				return false;
			}
		} else {
			if( $.trim( $( "#cemaila" ).val() ).length < 10 || $.trim( $( "#cemaila" ).val() ).indexOf( "@" ) < 0 || $.trim( $( "#cemaila" ).val() ).indexOf( "." ) < 0 ){
				exibe_alerta( "Indique pelo menos um email v�lido. Campo obrigat�rio." );
				$( "#cemaila" ).focus();
				return false;
			}
		}
	}

	if( sobre[ "origem" ].id=="ema_pend" ){
		var ema = $.trim( $( "#cemail" ).val());
		var ama = $.trim( $( "#cemaila" ).val());
		if(ama==""){
			if( $.trim( $( "#cemail" ).val() ).length < 10 || $.trim( $( "#cemail" ).val() ).indexOf( "@" ) < 0 || $.trim( $( "#cemail" ).val() ).indexOf( "." ) < 0 ){
				exibe_alerta( "Indique pelo menos um email v�lido. Campo obrigat�rio." );
				$( "#cemail" ).focus();
				return false;
			}
		} else {
			if( $.trim( $( "#cemaila" ).val() ).length < 10 || $.trim( $( "#cemaila" ).val() ).indexOf( "@" ) < 0 || $.trim( $( "#cemaila" ).val() ).indexOf( "." ) < 0 ){
				exibe_alerta( "Indique pelo menos um email v�lido. Campo obrigat�rio." );
				$( "#cemaila" ).focus();
				return false;
			}
		}
	}

	if( sobre[ "origem" ].id=="aco_ver" ){
		vlcust = $.trim( parseFloat( $( "#vlcust" ).val().replace( ".", "" ).replace( ",", "." ) ));
		vl_cus = $.trim( $( "#vl_cus" ).val());
		if( $.trim( $( "#usu_codigo" ).val() )=="" ){
			exibe_alerta( "Indique um usu�rio. Campo obrigat�rio." );
			$( "#usu_codigo" ).focus();
			return false;
		}

		if( $.trim( $( "#vlr_desconto" ).val() )!=""){
			if( $.trim( $( "#vlr_acordado" ).val() )!=""){
				exibe_alerta( "Indique desconto ou valor fixo. N�o ser indicado mais de uma op��o." );
				return false;
			}
			if( $.trim( $( "#vlr_fixo" ).val() )!=""){
				exibe_alerta( "Indique desconto ou valor fixo. N�o ser indicado mais de uma op��o." );
				return false;
			}
		}

		if( $.trim( $( "#vlr_acordado" ).val() )!=""){
			if( $.trim( $( "#vlr_fixo" ).val() )!=""){
				exibe_alerta( "Indique desconto ou valor fixo. N�o ser indicado mais de uma op��o." );
				return false;
			}
		}

		//if( $.trim( $( "#vlr_fixo" ).val() )!=""){
		//	totger = $.trim( parseFloat( $( "#totger" ).val().replace( ".", "" ).replace( ",", "." ) ));
		//	vlrfixo = $.trim( parseFloat( $( "#vlr_fixo" ).val().replace( ".", "" ).replace( ",", "." ) ));
		//	if(vlrfixo>totger){
		//		exibe_alerta( "O valor fixo n�o pode constar custas/multas ." );
		//		return false;
		//	}
		//}

		if(vlcust<vl_cus){
			exibe_alerta( "As custa tem que ser cobrada na totalidade ou n�o cobrada. Custa n�o pode ser proporcional." );
			$( "#usu_codigo" ).focus();
			return false;
		}

	}

	if( sobre[ "origem" ].id=="aco_veraco" ){
		dtnvaco = $.trim( $( "#dtnvaco" ).val());
                nvodpg = $.trim( $( "#nvodpg" ).val());
		//totpendac = $.trim( $( "#totpendac" ).val());
		//vlr_fixo = $.trim( $( "#vlr_fixo" ).val());


		totpendac = $.trim( parseFloat( $( "#totpendac" ).val().replace( ".", "" ).replace( ",", "." ) ));
		vlr_fixo =  $.trim( parseFloat( $( "#vlr_fixo" ) .val().replace( ".", "" ).replace( ",", "." ) ));
		if( $.trim( $( "#nvodpg" ).val() )==""){
			exibe_alerta( "Indique a nova data do acordo.Campo obrigatoria." );
			return false;
		}
		//if(nvodpg<dtnvaco){
		//	exibe_alerta( "A data de vcto. n�o pode ser menor que a data de hoje. Data obrigat�ria." );
		//	return false;
		//}
		if( $.trim( $( "#vlr_fixo" ).val() )==""){
			exibe_alerta( "Indique valor fixo. Campo obrigat�rio." );
			return false;
		}

		//if(vlr_fixo<totpendac){
		//	exibe_alerta( "O valor n�o pode ser menor que o acordo gerado. Verifique o valor." );
		//	return false;
		//}
	}
	return true;

}

function fin_forpendencia_load(){
	//var situac = $( "#situac" ).val();
	//var cnscod = $( "#cnscod" ).val();
	//var men_aceita = $( "#men_aceita" ).val();
	//var base = $( "#base" ).val();
	//if(situac=="ACO"){

//		var vlparc =  $.trim( parseFloat( $( "#vlparc" ).val().replace( ".", "" ).replace( ",", "." ) ));

		//var vlparc =  $.trim( $( "#vlparc" ).val());
		//
		//alert(vlparc);

		if( $( "#valsatua" ).is( "input" ) ){
			eval( "var vals = "+$( "#valsatua" ).val() );
			$( "strong.ac_princ" ).html( parseFloat( vals[ "princ" ] ).formatMoney() );
			$( "strong.ac_multa" ).html( parseFloat( vals[ "multa" ] ).formatMoney() );
			$( "strong.ac_juros" ).html( parseFloat( vals[ "juros" ] ).formatMoney() );
			$( "strong.ac_correc" ).html( parseFloat( vals[ "correc" ] ).formatMoney() );
			$( "strong.ac_honor" ).html( parseFloat( vals[ "honor" ] ).formatMoney() );
			$( "strong.ac_desc" ).html( parseFloat( vals[ "desc" ] ).formatMoney() );
			$( "strong.ac_cust" ).html( parseFloat( vals[ "cust" ] ).formatMoney() );
			$( "strong.ac_liqui" ).html( parseFloat( vals[ "liqui" ] ).formatMoney() );

	                re_liq = parseFloat( vals[ "liqui" ] ) ;
			re_des = parseFloat( vals[ "desc" ] );
	                re_cus = parseFloat( vals[ "cust" ] ) ;
//                        re_tot = re_liq + re_des;
                        re_tot = re_liq + re_des - re_cus;




	                $( "#tot_gerx" ).val(re_tot);

			//var re_liq = parseFloat( vals[ "liqui" ] );
			//var qtparc=re_liq/vlparc;
			//var num_parcela=parseInt(qtparc);
			//var sdparc=vlparc*num_parcela;
			//var vlentr=re_liq-sdparc;
			//sdparc = parseFloat( sdparc).formatMoney();
			//vlentr = parseFloat( vlentr).formatMoney();
		}
	//}
	//else {
		//ajax( "fin_movmospendencia.php?men_aceita="+men_aceita+"&cnscodp="+cnscod+"&base="+base+"&socont=sim", "post", "!conteudo_int");
	//}

}

function funpg(classe){$( "#funrel" ).val( classe );}
function fin_forrateiorel_validacao( sobre ){
	var funrel = $( "#funrel" ).val();
	var usus_tipo = $( "#usus_tipo" ).val();
	if( sobre[ "origem" ].id=="apagarpg" ){
		if( qtd_marcados( "funcpg" )==0 ){
			exibe_alerta( msgs[ "sel_reg" ] );
			return false;
		}
		else if( qtd_marcados( "funcpg" )>1 ){
			exibe_alerta( msgs[ "um_reg" ] );
			return false;
		}
	}
	if(funrel=="EXC"){
		if(usus_tipo!="S" && usus_tipo!="A"){
			exibe_alerta( "Fun��o permitida somente para o administrador." );
			return false;
		}
	}
	return true;
}

function funho(classe){$( "#funrelho" ).val( classe );}
function ger_acrescimo_validacao( sobre ){
	var funrelho = $( "#funrelho" ).val();
	if( sobre[ "origem" ].id=="apagarhon" ){
		if( qtd_marcados( "funcho" )==0 ){
			exibe_alerta( msgs[ "sel_reg" ] );
			return false;
		}
		else if( qtd_marcados( "funcho" )>1 ){
			exibe_alerta( msgs[ "um_reg" ] );
			return false;
		}
	}
	return true;
}



function fecbotaa(classe){$( "#imboac" ).val( classe );}
function fin_mosacordo_validacao( sobre ){
	if( sobre[ "origem" ].id=="con_aco" ){
		var imboac = $( "#imboac" ).val();
		if(imboac=="EXC"){
			if( qtd_marcados( "afunc" )==0 ){
				exibe_alerta( msgs[ "tod_reg" ] );
				return false;
			}
		}
		else
		if( qtd_marcados( "afunc" )==0 ){
			exibe_alerta( msgs[ "sel_reg" ] );
			return false;
		}
	}

	if( sobre[ "origem" ].id=="ema_pendaco" ){
		var ema = $.trim( $( "#cemailema" ).val());
		var ama = $.trim( $( "#cemailama" ).val());
		if(ama==""){
			if( $.trim( $( "#cemailema" ).val() ).length < 10 || $.trim( $( "#cemailema" ).val() ).indexOf( "@" ) < 0 || $.trim( $( "#cemailema" ).val() ).indexOf( "." ) < 0 ){
				exibe_alerta( "Indique pelo menos um email v�lido. Campo obrigat�rio." );
				$( "#cemailema" ).focus();
				return false;
			}
		} else {
			if( $.trim( $( "#cemailama" ).val() ).length < 10 || $.trim( $( "#cemailama" ).val() ).indexOf( "@" ) < 0 || $.trim( $( "#cemailama" ).val() ).indexOf( "." ) < 0 ){
				exibe_alerta( "Indique pelo menos um email v�lido. Campo obrigat�rio." );
				$( "#cemailama" ).focus();
				return false;
			}
		}
	}
	return true;
}

// rotinas de PREVISAO OR�AMENTARIA
function fin_mosorcamento_validacao( sobre ){
	if( sobre[ "origem" ].id=="apagar" ){
		if( qtd_marcados( "func" )==0 ){
			exibe_alerta( msgs[ "sel_reg" ] );
			return false;
		}
		else if( qtd_marcados( "func" )>1 ){
			exibe_alerta( msgs[ "um_reg" ] );
			return false;
		}
	}
	return true;
}

function fin_fororcamento_load( sobre ){
	if( sobre[ "origem" ].tagName=="FORM" ){
		var id = $( sobre[ "origem" ] ).find( "input[name=ccodig]" ).val();
		var fn = $( sobre[ "origem" ] ).find( "input[name=funcao]" ).val();
		var men_aceita = $( "#men_aceita" ).val();
		var base = $( sobre[ "origem" ] ).find( "input[name=base]" ).val();
		ajax( "fin_mosorcamento.php?men_aceita="+men_aceita+"&base="+base+"&socont=sim", "post", "!conteudo" );

		if( fn=="inc" ){
			exibe_alerta( msgs[ "reg_inc" ] );
		}
		else{
			exibe_alerta( msgs[ "reg_alt" ] );
		}
	}
}

function fin_fororcamento_validacao( sobre ){
	if( sobre[ "origem" ].tagName=="FORM" ){
		if( sobre[ "origem" ].id=="apagar" ){
			if( qtd_marcados( "func" )==0 ){
				exibe_alerta( msgs[ "sel_reg" ] );
				return false;
			}
			else if( qtd_marcados( "func" )>1 ){
				exibe_alerta( msgs[ "um_reg" ] );
				return false;
			}
		}
		else if( sobre[ "origem" ].id=="apagarc" ){
			if( qtd_marcados( "funcpr" )==0 ){
				exibe_alerta( msgs[ "sel_reg" ] );
				return false;
			}
		}

		else {
			if( sobre[ "origem" ].id=="fin_orca" ){
				if( $.trim( $( "#orc_conta" ).val() )=="" ){
					exibe_alerta( "Informe uma conta de despesa.Campo obrigat�rio." );
					$( "#orc_conta" ).focus();
					return false;
				}
				if( $.trim( $( "#orc_valor" ).val() )=="" ){
					exibe_alerta( "Informe o valor base.Campo obrigat�rio." );
					$( "#orc_valor" ).focus();
					return false;
				}
				return true;
			}
			if( sobre[ "origem" ].id=="inc_orc" ){
				if( $.trim( $( "#orc_anoinicial" ).val() )=="" ){
					exibe_alerta( "Informe o ano inicial.Campo obrigat�rio." );
					$( "#orc_anoinicial" ).focus();
					return false;
				}
				if( $.trim( $( "#orc_anofinal" ).val() )=="" ){
					exibe_alerta( "Informe o ano final. Campo obrigat�rio." );
					$( "#orc_anofinal" ).focus();
					return false;
				}
				if( $.trim( $( "#orc_mesrefbase" ).val() )=="" ){
					exibe_alerta( "Informe o m�s ref. base. Campo obrigat�rio." );
					$( "#orc_mesrefbase" ).focus();
					return false;
				}
				if( $.trim( $( "#orc_periodo" ).val() )=="" ){
					exibe_alerta( "Informe o per�odo para proje��o. Campo obrigat�rio." );
					$( "#orc_periodo" ).focus();
					return false;
				}
				return true;
			}
		}
		return true;

	}
	else {
		return true;
	}
}


function fin_relorcamento_validacao( sobre ){
	if( sobre[ "origem" ].id=="apagar" ){
		if( qtd_marcados( "func" )==0 ){
			exibe_alerta( msgs[ "sel_reg" ] );
			return false;
		}
		else if( qtd_marcados( "func" )>1 ){
			exibe_alerta( msgs[ "um_reg" ] );
			return false;
		}
	}
	return true;
}

// rotinas de SERVI�OS DE COBRAN�AS
function uti_conservicos_load( sobre ){
	if( sobre[ "origem" ].tagName=="FORM" ){
		var men_aceita = $( "#men_aceita" ).val();
		var tipo_mka = $( "#tipo_mka" ).val();
		var tipo_car = $( "#tipo_car" ).val();
		var base = $( "#base" ).val();
		if(tipo_mka=="t"){
		  ajax( "uti_conservicos.php?men_aceita="+men_aceita+"&tipo_car="+tipo_car+"&base="+base+"&socont=sim", "post", "!conteudo_int" );
		}
	}
}

function uti_conservicos_validacao( sobre ){
	var tipo_car = $( "#tipo_car" ).val();
	if(tipo_car=="12"){
		if( $.trim( $( "#comgas" ).val() )=="N" ){
			exibe_alerta( "Este cliente n�o tem servi�o de g�s." );
			return false;
		}
	}

	if(tipo_car=="13"){
		if( $.trim( $( "#comagua" ).val() )=="N" ){
			exibe_alerta( "Este cliente n�o tem servi�o de �gua." );
			return false;
		}
	}

	if( sobre[ "origem" ].id=="apagar" ){
		if( qtd_marcados( "func" )==0 ){
			exibe_alerta( msgs[ "sel_reg" ] );
			return false;
		}
	}

	if( sobre[ "origem" ].className=="visualizar" ){
		if( $.trim( $( "#tipo_car" ).val() )=="" ){
			exibe_alerta( "Selecione um tipo de servi�o. Sele��o obrigat�rio." );
			$( "#tipo_car" ).focus();
			return false;
		}
		else {
			var tipo_car = $.trim( $( "#tipo_car").val() );
			ajax_url_replace( "%#%", tipo_car );
			return true;
		}
	}

	if( sobre[ "origem" ].className=="relatorio"){
		if( $.trim( $( "#tipo_car" ).val() )=="" ){
			exibe_alerta( "Selecione um tipo de servi�o. Sele��o obrigat�rio." );
			$( "#tipo_car" ).focus();
			return false;
		}
	}

	if( sobre[ "origem" ].id=="cad_makt" ){
		var atua = $( "#atua" ).val();
		var base = $( "#base" ).val();
		var men_aceita = $( "#men_aceita" ).val();
		var tipo_car = $( "#tipo_car" ).val();
		if( $.trim( $( "#tex_data" ).val() )=="" ){
			exibe_alerta( "Informe a data do E-mail/Informativo. Campo obrigat�rio." );
			$( "#tex_data" ).focus();
			return false;
		        atua="NAO";
		}
		if( $.trim( $( "#ema_grupo" ).val() )==""){
			exibe_alerta( "Informe o grupo para envio E-mail/Informativo. Campo obrigat�rio." );
			$( "#ema_grupo" ).focus();
			return false;
		        atua="NAO";
		}
		if( $.trim( $( "#tex_titulo" ).val() )==""){
			exibe_alerta( "Informe o t�tulo do E-mail/Informativo. Campo obrigat�rio." );
			$( "#tex_titulo" ).focus();
			return false;
		        atua="NAO";
		}
		if( $.trim( $( "#tex_texto" ).val() )==""){
			exibe_alerta( "Informe o texto do E-mail/Informativo. Campo obrigat�rio." );
			$( "#tex_texto" ).focus();
			return false;
		        atua="NAO";
		}
	}
	return true;
}

function uti_relservicosema_validacao( sobre ){
	if( sobre[ "origem" ].id=="apagar" ){
		if( qtd_marcados( "func" )==0 ){
			exibe_alerta( msgs[ "sel_reg" ] );
			return false;
		}
	}
	return true;
}

function uti_forservicos_validacao( sobre ){
	var situac = $( "#situac" ).val();
	var tip_car = $( "#tipo_car" ).val();
	if(tip_car!="14" && tip_car!="15" && tip_car!="16"){
		if(tip_car=="11" || tip_car=="12" || tip_car=="13" || tip_car=="17"){
			if( sobre[ "origem" ].id=="apagar" ){
				if( qtd_marcados( "func" )==0 ){
					exibe_alerta( msgs[ "sel_reg" ] );
					return false;
				}
			}
		} else	{
			if( sobre[ "origem" ].id=="apagar" ){
				if( qtd_marcados( "func" )==0 ){
					exibe_alerta( msgs[ "sel_reg" ] );
					return false;
				}
				else if( qtd_marcados( "func" )>1 ){
					exibe_alerta( msgs[ "um_reg" ] );
					return false;
				}
			}
		}
	}
	else if(tip_car=="14"){
		if( sobre[ "origem" ].id=="maladir" ){
			if( qtd_marcados( "funcml" )==0 ){
				exibe_alerta( msgs[ "sel_reg" ] );
				return false;
			}
		}
	}
	else if(tip_car=="15"){
		if(situac=="MKE"){
			if( sobre[ "origem" ].id=="apagar" ){
				if( qtd_marcados( "func" )==0 ){
					exibe_alerta( msgs[ "sel_reg" ] );
					return false;
				}
				else if( qtd_marcados( "func" )>1 ){
					exibe_alerta( msgs[ "um_reg" ] );
					return false;
				}
			}
		}
	}
	else if(tip_car=="16"){
		if(situac=="SOT"){
			if( sobre[ "origem" ].id=="apagar" ){
				if( qtd_marcados( "func" )==0 ){
					exibe_alerta( msgs[ "sel_reg" ] );
					return false;
				}
				else if( qtd_marcados( "func" )>1 ){
					exibe_alerta( msgs[ "um_reg" ] );
					return false;
				}
			}
		}

		if( sobre[ "origem" ].id=="cad_sor" ){
			if( $.trim( $( "#sor_data" ).val() )==""){
				exibe_alerta( "Informe a data do evento. Campo obrigat�rio." );
				$( "#sor_data" ).focus();
				return false;
			}
			if( $.trim( $( "#sor_grupo" ).val() )==""){
				exibe_alerta( "Informe o grupo participante. Campo obrigat�rio." );
				$( "#sor_grupo" ).focus();
				return false;
			}
			if( $.trim( $( "#sor_produto" ).val() )==""){
				exibe_alerta( "Informe o produto. Campo obrigat�rio." );
				$( "#sor_produto" ).focus();
				return false;
			}
		}
	}


	if( sobre[ "origem" ].id=="cad_reci" ){
		if( $.trim( $( "#nvalorrec" ).val() )=="" ){
			exibe_alerta( "Informe o valor do recibo. Campo obrigat�rio." );
			$( "#nvalorrec" ).focus();
			return false;
		}
	}

	if( sobre[ "origem" ].id=="cad_prot" ){
		if( $.trim( $( "#cmotiv" ).val() )=="" ){
			exibe_alerta( "Informe o assunto/motivo do protocolo. Campo obrigat�rio." );
			$( "#cmotiv" ).focus();
			return false;
		}
	}

	return true;
}
// rotina de MANUTEN��O DE COBRANCA
function uti_cobrancaret_load(){
	pagina_atual = 1;
	var filtro = "";
	filtro = ( filtro!="" )?( ( filtro.length==1 )?filtro+"*":"*"+filtro+"*" ):"";
	var men_aceita = $( "#men_aceita" ).val();
	paginacao( 32, function( results ){
		var men_aceita = $( "#men_aceita" ).val();
		var html = "";
		results.each( function( i, v ){
			html += "<tr class='"+( ( i%2==0 )?"p":"i" )+" id-"+v[ "id" ]+"'"+( i==0?" style='border-top: 1px solid #999;'":"" )+">";
			html += "<td>"+( v[ "cbanco" ]==null?"":v[ "cbanco" ] )+"</td>";
			html += "<td>"+( v[ "nome" ]==null?"":v[ "nome" ] )+"</td>";
			html += "<td class='alincenter'>"+( v[ "ddtbai" ]==null?"":v[ "ddtbai" ] )+"</td>";
			html += "<td class='alincenter'>"+( v[ "qtd" ]==null?"":v[ "qtd" ] )+"</td>";
			html += "<td class='alinright'>"+( v[ "vlr01" ]==null?"":v[ "vlr01" ] )+"</td>";
			html += "<td class='alincenter'>"+( v[ "c_mov" ]==null?"":v[ "c_mov" ] )+"</td>";
			html += "<td style='text-align: center;'><input type='checkbox' id='arquivo[]' name='arquivo[]' value='"+v[ "nome" ]+"' class='func' /></td></tr>";
		} );
		$( "table.registros" ).append( html );
	}, filtro);
}

function uti_conconvencao_validacao( sobre ){
	if( sobre[ "origem" ].id=="apagar" ){
		if( qtd_marcados( "func" )==0 ){
			exibe_alerta( msgs[ "sel_reg" ] );
			return false;
		}
		else if( qtd_marcados( "func" )>1 ){
			exibe_alerta( msgs[ "um_reg" ] );
			return false;
		}
	}
	return true;
}

function uti_conconvencao_load(){
	busca_dadoscond();
	pagina_atual = 1;
	var filtro = "";
	filtro = ( filtro!="" )?( ( filtro.length==1 )?filtro+"*":"*"+filtro+"*" ):"";
	var men_aceita = $( "#men_aceita" ).val();
	var base = $( "#base" ).val();
	var cnscod = $( "#cnscodp" ).val();
	var tembloc = $( "#tembloc" ).val();
	var tex_tipo = $( "#tex_tipo" ).val();
	var vars = "&men_aceita="+men_aceita+"&base="+base+"&cnscod="+cnscod+"&tembloc="+tembloc+"&tex_tipo="+tex_tipo;
	paginacao( 33, function( results ){
		var men_aceita = $( "#men_aceita" ).val();
	        var base = $( "#base" ).val();
		var cnscod = $( "#cnscodp" ).val();
		var tembloc = $( "#tembloc" ).val();
		var tex_tipo = $( "#tex_tipo" ).val();
		var html = "";
		results.each( function( i, v ){
			html += "<tr class='"+( ( i%2==0 )?"p":"i" )+" id-"+v[ "id" ]+"'"+( i==0?" style='border-top: 1px solid #999;'":"" )+">";
			if(tex_tipo=="p"){
				html += "<td>"+( v[ "cnumap" ]==null?"":v[ "cnumap" ] )+"</td>";
				if(tembloc=="S"){html += "<td>"+( v[ "cbloco" ]==null?"":v[ "cbloco" ] )+"</td>";}
				html += "<td>"+( v[ "cnomes" ]==null?"":v[ "cnomes" ] )+"</td>";
			}
			html += "<td class=alincenter>"+( v[ "tex_data" ]==null?"":v[ "tex_data" ] )+"</td>";
			html += "<td>"+( v[ "titulo" ]==null?"":v[ "titulo" ] )+"</td>";
			html += "<td class=alincenter><a href='#' onclick='return ajax( \"uti_conconvencao.php?funcao=abrir&id_tex="+v[ "id" ]+"&men_aceita="+men_aceita+"&base="+base+"&cnscodp="+v[ "cnscodp" ]+"&tembloc="+tembloc+"\", \"post\", \"mostrar\" )'>"+v[ "arquivo" ]+"</a></td>";
			html += "<td style='text-align: center;'><input type='checkbox' name='id_tex[]' value='"+v[ "id" ]+"' class='func' />";
			html += "<input type='hidden' name='"+v[ "id" ]+"' id='"+v[ "id" ]+"' value='"+v[ "flag" ]+"' /></td></tr>";
		} );
		$( "table.registros" ).append( html );
	},filtro, vars );
}

function fin_transferenciaretupl() {
	carregando.exibe();
	ajaxupload( {
		url: "../sys_sys/fin_transferenciaretupl.php",
		fileField: "arquivo",
		onComplete: function( retorno ){
			// alert( retorno );
			switch( retorno ){
				case "[AINV]": {
					msg.ex( [ "Formato de arquivo inválido.", "error" ] );
					break;
				}
				case "[SREG]": {
					msg.ex( [ "Arquivo lido sem registro com sucesso!", "success" ] );
					break;
				}
				case "[SUCE]": {
					msg.ex( [ "Arquivo lido com sucesso!", "success" ] );
					break;
				}
			}
			carregando.esconde();
			$( "#modalCaptura" ).modal( "hide" );
			ajax( "../sys_sys/fin_transferenciaretcob.php?men_aceita=cobr_admin", "get", "conteudo", event );
		}
	} );
}

function uti_uploadextrato(){
	var arquivo = $( "#arquivo" ).val();
	var ccodbc = $( "#ccodbc" ).val();
	var id_ban = $( "#id_ban" ).val();
	var men_aceita = $( "#men_aceita" ).val();
	ajaxupload( {
		url: "uti_uploadextrato.php?ccodbc="+ccodbc,
		fileField: "arquivo",
		onComplete: function( retorno ){ //alert(retorno);
			eval( "var resultado="+retorno );
		        ajax( "fin_movmosbanco.php?men_aceita="+men_aceita+"&ccodbc="+ccodbc+"id_ban="+id_ban+"&socont=sim", "post", "!conteudo", "event" );
			exibe_alerta( msgs[ "ext_arq" ] );
		}
	} );
}

function uti_uploadconver(){
	msg.ex();
	if( $.trim( $( "#totuni" ).val() )=="" ){
		swal( "warning", "Informe a quantidade de unidades.", "warning" );
	} else if( $.trim( $( "#mesrat" ).val() )=="" ){
		swal( "warning", "Informe o mês Referência", "warning" );
	} else if( $.trim( $( "#arquivo" ).val() )=="" ){
		swal( "warning", "Selecione o arquivo no seu computador", "warning" );
	} else {
		carregando.exibe();
		var basecl = $( "#basecl" ).val();
		var ccodig = $( "#ccodig" ).val();
		var totuni = $( "#totuni" ).val();
		var mesrat = $( "#mesrat" ).val();
		var ddtinv = $( "#ddtinv" ).val();
		var nvlant = $( "#nvlant" ).val();
		var nvlnao = $( "#nvlnao" ).val();
		var nvlinv = $( "#nvlinv" ).val();
		var men_aceita = $( "#men_aceita" ).val();
		ajaxupload( {
			url: "../sys_sys/uti_uploadexcelrec.php?basecl="+basecl+"&ccodig="+ccodig+"&totuni="+totuni+"&mesrat="+mesrat+"&ddtinv="+ddtinv+"&nvlant="+nvlant+"&nvlnao="+nvlnao+"&nvlinv="+nvlinv,
			fileField: "arquivo",
			onComplete: function( retorno ){
				if( retorno.indexOf( "Por favor, renvie" ) != -1 ){
					msg.ex( [ retorno, "error" ] );
				}
				else{
					msg.ex( [ "Arquivo importado com sucesso!", "success" ] );
				}
				debug.returnedAJAX( retorno );
				carregando.esconde();
				ajax( "../sys_sys/uti_concapturarec.php?men_aceita="+men_aceita+"&basecl="+basecl+"&ccodig="+ccodig+"&mostger=NAO", "post", "conteudo");
			}
		} );
	}
  return true;
}

function uti_uploadconverexc(){
		if( $.trim( $( "#arquivo" ).val() )=="" ){
				swal( "warning", "Selecione o arquivo no seu computador", "warning" );
		} else {
				carregando.exibe();
				var baseuni = $( "#baseuni" ).val();
				var men_aceita = $( "#men_aceita" ).val();
				var tipo = $( "#tipo" ).val();

				if(tipo=='dep') {
						ajaxupload( {
								url: "../sys_sys/uti_uploadexceldep.php?baseuni="+baseuni,
								fileField: "arquivo",
								onComplete: function( retorno ){ //
									console.log(retorno);
										carregando.esconde();
										if( retorno.trim()!="" ){
												msg.ex( [ retorno, "error" ] );
										} else {
												msg.ex( [ "Arquivo importado com sucesso!", "success" ] );
										}
										debug.returnedAJAX( retorno ); //
										console.log(retorno);
										ajax( "../sys_sys/uti_uploadcaptexcel.php?men_aceita="+men_aceita+"&baseuni="+baseuni+"&tipo="+tipo+"&mostget=NAO", "post", "conteudo");
								}
						} );
				} else if(tipo=='con') {
						ajaxupload( {
								url: "../sys_sys/uti_uploadexcelcon.php?baseuni="+baseuni,
								fileField: "arquivo",
								onComplete: function( retorno ){ //
									console.log(retorno);
										carregando.esconde();
										if( retorno.trim()!="" ){
												msg.ex( [ retorno, "error" ] );
										} else {
												msg.ex( [ "Arquivo importado com sucesso!", "success" ] );
										}
										debug.returnedAJAX( retorno ); //
										console.log(retorno);
										ajax( "../sys_sys/uti_uploadcaptexcel.php?men_aceita="+men_aceita+"&baseuni="+baseuni+"&tipo="+tipo+"&mostget=NAO", "post", "conteudo");
								}
						} );
				} else if(tipo=='teo') {
						ajaxupload( {
								url: "../sys_sys/uti_uploadexcelteo.php?baseuni="+baseuni,
								fileField: "arquivo",
								onComplete: function( retorno ){ //
									console.log(retorno);
										carregando.esconde();
										if( retorno.trim()!="" ){
												msg.ex( [ retorno, "error" ] );
										} else {
												msg.ex( [ "Arquivo importado com sucesso!", "success" ] );
										}
										debug.returnedAJAX( retorno ); //
										console.log(retorno);
										ajax( "../sys_sys/uti_uploadcaptexcel.php?men_aceita="+men_aceita+"&baseuni="+baseuni+"&tipo="+tipo+"&mostget=NAO", "post", "conteudo");
								}
						} );
				} else if(tipo=='pra') {
						ajaxupload( {
								url: "../sys_sys/uti_uploadexcelpra.php?baseuni="+baseuni,
								fileField: "arquivo",
								onComplete: function( retorno ){ //
									console.log(retorno);
										carregando.esconde();
										if( retorno.trim()!="" ){
												msg.ex( [ retorno, "error" ] );
										} else {
												msg.ex( [ "Arquivo importado com sucesso!", "success" ] );
										}
										debug.returnedAJAX( retorno ); //
										console.log(retorno);
										ajax( "../sys_sys/uti_uploadcaptexcel.php?men_aceita="+men_aceita+"&baseuni="+baseuni+"&tipo="+tipo+"&mostget=NAO", "post", "conteudo");
								}
						} );
				} else if(tipo=='fam') {
						ajaxupload( {
								url: "../sys_sys/uti_uploadexcelfam.php?baseuni="+baseuni,
								fileField: "arquivo",
								onComplete: function( retorno ){ //

									console.log(retorno);
										carregando.esconde();
										if( retorno.trim()!="" ){
												msg.ex( [ retorno, "error" ] );
										} else {
												msg.ex( [ "Arquivo importado com sucesso!", "success" ] );
										}
										debug.returnedAJAX( retorno ); //
										console.log(retorno);
										ajax( "../sys_sys/uti_uploadcaptexcel.php?men_aceita="+men_aceita+"&baseuni="+baseuni+"&tipo="+tipo+"&mostget=NAO", "post", "conteudo");
								}
						} );
				} else if(tipo=='enc') {
						ajaxupload( {
								url: "../sys_sys/uti_uploadexcelenc.php?baseuni="+baseuni,
								fileField: "arquivo",
								onComplete: function( retorno ){ //

									console.log(retorno);
										carregando.esconde();
										if( retorno.trim()!="" ){
												msg.ex( [ retorno, "error" ] );
										} else {
												msg.ex( [ "Arquivo importado com sucesso!", "success" ] );
										}
										debug.returnedAJAX( retorno ); //
										console.log(retorno);
										ajax( "../sys_sys/uti_uploadcaptexcel.php?men_aceita="+men_aceita+"&baseuni="+baseuni+"&tipo="+tipo+"&mostget=NAO", "post", "conteudo");
								}
						} );

				} else if(tipo=='esc') {
						ajaxupload( {
								url: "../sys_sys/uti_uploadexcelesc.php?baseuni="+baseuni,
								fileField: "arquivo",
								onComplete: function( retorno ){ //

									console.log(retorno);
										carregando.esconde();
										if( retorno.trim()!="" ){
												msg.ex( [ retorno, "error" ] );
										} else {
												msg.ex( [ "Arquivo importado com sucesso!", "success" ] );
										}
										debug.returnedAJAX( retorno ); //
										console.log(retorno);
										ajax( "../sys_sys/uti_uploadcaptexcel.php?men_aceita="+men_aceita+"&baseuni="+baseuni+"&tipo="+tipo+"&mostget=NAO", "post", "conteudo");
								}
						} );
				} else if(tipo=='cur') {
							ajaxupload( {
									url: "../sys_sys/uti_uploadexcelcur.php?baseuni="+baseuni,
									fileField: "arquivo",
									onComplete: function( retorno ){ //

										console.log(retorno);
											carregando.esconde();
											if( retorno.trim()!="" ){
													msg.ex( [ retorno, "error" ] );
											} else {
													msg.ex( [ "Arquivo importado com sucesso!", "success" ] );
											}
											debug.returnedAJAX( retorno ); //
											console.log(retorno);
											ajax( "../sys_sys/uti_uploadcaptexcel.php?men_aceita="+men_aceita+"&baseuni="+baseuni+"&tipo="+tipo+"&mostget=NAO", "post", "conteudo");
									}
							} );
				} else if(tipo=='tur') {
						ajaxupload( {
								url: "../sys_sys/uti_uploadexceltur.php?baseuni="+baseuni,
								fileField: "arquivo",
								onComplete: function( retorno ){ //

									console.log(retorno);
										carregando.esconde();
										if( retorno.trim()!="" ){
												msg.ex( [ retorno, "error" ] );
										} else {
												msg.ex( [ "Arquivo importado com sucesso!", "success" ] );
										}
										debug.returnedAJAX( retorno ); //
										console.log(retorno);
										ajax( "../sys_sys/uti_uploadcaptexcel.php?men_aceita="+men_aceita+"&baseuni="+baseuni+"&tipo="+tipo+"&mostget=NAO", "post", "conteudo");
								}
						} );
				} else if(tipo=='man') {
							ajaxupload( {
									url: "../sys_sys/uti_uploadexcelman.php?baseuni="+baseuni,
									fileField: "arquivo",
									onComplete: function( retorno ){ //console.log(retorno);
											carregando.esconde();
											if( retorno.trim()!="" ){
													msg.ex( [ retorno, "error" ] );
											} else {
													msg.ex( [ "Arquivo importado com sucesso!", "success" ] );
											}
											debug.returnedAJAX( retorno ); //console.log(retorno);
											ajax( "../sys_sys/uti_uploadcaptexcel.php?men_aceita="+men_aceita+"&baseuni="+baseuni+"&tipo="+tipo+"&mostget=NAO", "post", "conteudo");
									}
							} );
				} else if(tipo=='ass') {
						ajaxupload( {
								url: "../sys_sys/uti_uploadexcelass.php?baseuni="+baseuni,
								fileField: "arquivo",
								onComplete: function( retorno ){ //
									console.log(retorno);
										carregando.esconde();
										if( retorno.trim()!="" ){
												msg.ex( [ retorno, "error" ] );
										} else {
												msg.ex( [ "Arquivo importado com sucesso!", "success" ] );
										}
										debug.returnedAJAX( retorno ); //
										ajax( "../sys_sys/uti_uploadcaptexcel.php?men_aceita="+men_aceita+"&baseuni="+baseuni+"&tipo="+tipo+"&mostget=NAO", "post", "conteudo");
								}
						} );
				} else if(tipo=='as2') {
						ajaxupload( {
								url: "../sys_sys/uti_uploadexcelas2.php?baseuni="+baseuni,
								fileField: "arquivo",
								onComplete: function( retorno ){ //
									console.log(retorno);
										carregando.esconde();
										if( retorno.trim()!="" ){
												msg.ex( [ retorno, "error" ] );
										} else {
												msg.ex( [ "Arquivo importado com sucesso!", "success" ] );
										}
										debug.returnedAJAX( retorno ); //
										ajax( "../sys_sys/uti_uploadcaptexcel.php?men_aceita="+men_aceita+"&baseuni="+baseuni+"&tipo="+tipo+"&mostget=NAO", "post", "conteudo");
								}
						} );

				} else if(tipo=='as3') {
						ajaxupload( {
								url: "../sys_sys/uti_uploadexcelas3.php?baseuni="+baseuni,
								fileField: "arquivo",
								onComplete: function( retorno ){ //
									console.log(retorno);
										carregando.esconde();
										if( retorno.trim()!="" ){
												msg.ex( [ retorno, "error" ] );
										} else {
												msg.ex( [ "Arquivo importado com sucesso!", "success" ] );
										}
										debug.returnedAJAX( retorno ); //
										ajax( "../sys_sys/uti_uploadcaptexcel.php?men_aceita="+men_aceita+"&baseuni="+baseuni+"&tipo="+tipo+"&mostget=NAO", "post", "conteudo");
								}
						} );
					} else if(tipo=='as4') {
							ajaxupload( {
									url: "../sys_sys/uti_uploadexcelas4.php?baseuni="+baseuni,
									fileField: "arquivo",
									onComplete: function( retorno ){ //
										console.log(retorno);
											carregando.esconde();
											if( retorno.trim()!="" ){
													msg.ex( [ retorno, "error" ] );
											} else {
													msg.ex( [ "Arquivo importado com sucesso!", "success" ] );
											}
											debug.returnedAJAX( retorno ); //
											ajax( "../sys_sys/uti_uploadcaptexcel.php?men_aceita="+men_aceita+"&baseuni="+baseuni+"&tipo="+tipo+"&mostget=NAO", "post", "conteudo");
									}
							} );

				} else if(tipo=='usu') {
						ajaxupload( {
								url: "../sys_sys/uti_uploadexcelusu.php?baseuni="+baseuni,
								fileField: "arquivo",
								onComplete: function( retorno ){ //console.log(retorno);

										carregando.esconde();
										if( retorno.trim()!="" ){
												msg.ex( [ retorno, "error" ] );
										} else {
												msg.ex( [ "Arquivo importado com sucesso!", "success" ] );
										}
										debug.returnedAJAX( retorno ); // console.log(retorno);
										ajax( "../sys_sys/uti_uploadcaptexcel.php?men_aceita="+men_aceita+"&baseuni="+baseuni+"&tipo="+tipo+"&mostget=NAO", "post", "conteudo");
								}
						} );
				} else if(tipo=='for') {
						ajaxupload( {
								url: "../sys_sys/uti_uploadexcelfor.php?baseuni="+baseuni,
								fileField: "arquivo",
								onComplete: function( retorno ){ //console.log(retorno);
										carregando.esconde();
										if( retorno.trim()!="" ){
												msg.ex( [ retorno, "error" ] );
										} else {
												msg.ex( [ "Arquivo importado com sucesso!", "success" ] );
										}
										debug.returnedAJAX( retorno ); // console.log(retorno);
										ajax( "../sys_sys/uti_uploadcaptexcel.php?men_aceita="+men_aceita+"&baseuni="+baseuni+"&tipo="+tipo+"&mostget=NAO", "post", "conteudo");
								}
						} );
				}
		}
		return true;
}

function uti_uploadconvercessao(){
		if( $.trim( $( "#arquivo" ).val() )=="" ){
				swal( "warning", "Selecione o arquivo no seu computador", "warning" );
		} else {
				carregando.exibe();
				var basecl = $( "#basecl" ).val();
				var ccodig = $( "#ccodig" ).val();
				var men_aceita = $( "#men_aceita" ).val();
				ajaxupload( {
						url: "../sys_sys/uti_uploadexcelcessao_div.php?basecl="+basecl+"&ccodig="+ccodig,
						fileField: "arquivo",
						onComplete: function( retorno ){
								carregando.esconde();
								if( retorno.trim()!="" ){
										msg.ex( [ retorno, "error" ] );
								}
								else{
										msg.ex( [ "Arquivo importado com sucesso!", "success" ] );
								}
								debug.returnedAJAX( retorno );
								//eval( "var resultado="+retorno );
								ajax( "../sys_sys/uti_concapturacessao.php?men_aceita="+men_aceita+"&basecl="+basecl+"&ccodig="+ccodig+"&mostget=NAO", "post", "conteudo");
						}
			} );
		}
    return true;
}
function uti_uploadconverpen(){
		if( $.trim( $( "#arquivo" ).val() )=="" ){
				swal( "warning", "Selecione o arquivo no seu computador", "warning" );
		} else {
				carregando.exibe();
				var basecl = $( "#basecl" ).val();
				var ccodig = $( "#ccodig" ).val();
				var men_aceita = $( "#men_aceita" ).val();
				ajaxupload( {
						url: "../sys_sys/uti_uploadexcelpen_se.php?basecl="+basecl+"&ccodig="+ccodig,
						fileField: "arquivo",
						onComplete: function( retorno ){
								carregando.esconde();
								if( retorno.trim()!="" ){
										msg.ex( [ retorno, "error" ] );
								}
								else{
										msg.ex( [ "Arquivo importado com sucesso!", "success" ] );
								}
								debug.returnedAJAX( retorno );
								//eval( "var resultado="+retorno );
								ajax( "../sys_sys/uti_concapturapen.php?men_aceita="+men_aceita+"&basecl="+basecl+"&ccodig="+ccodig+"&mostget=NAO", "post", "conteudo");
						}
			} );
		}
    return true;
}
function uti_uploadconverind(){
	msg.ex();
	if( $.trim( $( "#arquivo" ).val() )=="" ){
		swal( "warning", "Selecione o arquivo no seu computador", "warning" );
	} else {
		carregando.exibe();
		var basecl = $( "#basecl" ).val();
		var ccodig = $( "#ccodig" ).val();
		var men_aceita = $( "#men_aceita" ).val();
		ajaxupload( {
			url: "../sys_sys/uti_uploadexcelind.php?basecl="+basecl+"&ccodig="+ccodig+"&men_aceita="+men_aceita,
			fileField: "arquivo",
			onComplete: function( retorno ){
				carregando.esconde();
				if( retorno.trim()!="" ){
					msg.ex( [ retorno, "error" ] );
				}
				else{
					msg.ad( [ "Arquivo importado com sucesso!", "success" ] );
				}
				debug.returnedAJAX( retorno );
				//eval( "var resultado="+retorno );
				ajax( "../sys_sys/uti_concapturaind.php?men_aceita="+men_aceita+"&basecl="+basecl+"&ccodig="+ccodig+"&mostger=NAO", "post", "conteudo");
			}
		} );
	}
        return true;
}

function uti_uploadconvercon(){
	msg.ex();
	if( $.trim( $( "#arquivo" ).val() )=="" ){
		swal( "warning", "Selecione o arquivo no seu computador", "warning" );
	} else {
		carregando.exibe();
		var basecl = $( "#basecl" ).val();
		var ccodig = $( "#ccodig" ).val();
		var men_aceita = $( "#men_aceita" ).val();
		ajaxupload( {
			url: "../sys_sys/uti_uploadexcelcon.php?basecl="+basecl+"&ccodig="+ccodig+"&men_aceita="+men_aceita,
			fileField: "arquivo",
			onComplete: function( retorno ){
				carregando.esconde();
				if( retorno.trim()!="" ){
					msg.ex( [ retorno, "error" ] );
				}
				else{
					msg.ad( [ "Arquivo importado com sucesso!", "success" ] );
				}
				debug.returnedAJAX( retorno );
				//eval( "var resultado="+retorno );
				ajax( "../sys_sys/uti_concapturacon.php?men_aceita="+men_aceita+"&basecl="+basecl+"&ccodig="+ccodig+"&mostger=NAO", "post", "conteudo");
			}
		} );
	}
        return true;
}


function uti_forcobranca_validacao( sobre ){
	if( sobre[ "origem" ].id=="prev_rel" ){
		if( $.trim( $( "#ccodig" ).val() )=="" && $.trim( $( "#filtr1" ).val() )=="" && $.trim( $( "#filtr2" ).val() )=="" ){
			exibe_alerta( "Selecione uma condi��o condom�nio ou data espec�fica. Campo obrigat�rio." );
			$( "#ccodig" ).focus();
			return false;
		}
		if( $.trim( $( "#filtr1" ).val() )=="" && $.trim( $( "#filtr2" ).val() )=="" ){
			exibe_alerta( "Selecione uma data espec�fica. Campo obrigat�rio." );
			$( "#ccodig" ).focus();
			return false;
		}
	}
        return true;
}

function uti_forcobrancaenv_validacao( sobre ){
	if( sobre[ "origem" ].id=="prev_rel" ){
		if( $.trim( $( "#ccodig" ).val() )=="" && $.trim( $( "#filtr1" ).val() )=="" && $.trim( $( "#filtr2" ).val() )=="" ){
			exibe_alerta( "Selecione uma condi��o condom�nio ou data espec�fica. Campo obrigat�rio." );
			$( "#ccodig" ).focus();
			return false;
		}
		if( $.trim( $( "#filtr1" ).val() )=="" && $.trim( $( "#filtr2" ).val() )=="" ){
			exibe_alerta( "Selecione uma data espec�fica. Campo obrigat�rio." );
			$( "#ccodig" ).focus();
			return false;
		}
	}
        return true;
}
// rotina de MANUTEN��O DE COBRANCA remessa
function uti_cobrancarem_load(){
	pagina_atual = 1;
	var filtro = "";
	filtro = ( filtro!="" )?( ( filtro.length==1 )?filtro+"*":"*"+filtro+"*" ):"";
	var men_aceita = $( "#men_aceita" ).val();
	paginacao( 41, function( results ){
		var men_aceita = $( "#men_aceita" ).val();
		var html = "";
		results.each( function( i, v ){
			html += "<tr class='"+( ( i%2==0 )?"p":"i" )+" id-"+v[ "id" ]+"'"+( i==0?" style='border-top: 1px solid #999;'":"" )+">";
			html += "<td>"+( v[ "nome" ]==null?"":v[ "nome" ] )+"</td>";
			html += "<td>"+( v[ "arquivo" ]==null?"":v[ "arquivo" ] )+"</td>";
			html += "<td class='alincenter'>"+( v[ "ddtbai" ]==null?"":v[ "ddtbai" ] )+"</td>";
			html += "<td class='alincenter'>"+( v[ "qtd" ]==null?"":v[ "qtd" ] )+"</td>";
			html += "<td class='alinright'>"+( v[ "vlr01" ]==null?"":v[ "vlr01" ] )+"</td>";
			html += "<td class='alincenter'>"+( v[ "c_mov" ]==null?"":v[ "c_mov" ] )+"</td>";
			html += "<td style='text-align: center;'><input type='checkbox' id='arquivo[]' name='arquivo[]' value='"+v[ "arquivo" ]+"' class='func' /></td></tr>";
		} );

		$( "table.registros" ).append( html );
	}, filtro);
}
function uti_forcobrancaenv_load( sobre ){
	if( sobre[ "origem" ].tagName=="FORM" ){
		var id = $( sobre[ "origem" ] ).find( "input[name=id_nos]" ).val();
		var fn = $( sobre[ "origem" ] ).find( "input[name=impbol]" ).val();
		var men_aceita = $( "#men_aceita" ).val();
		var pesquisar = $( "#pesquisar" ).val();
                if (pesquisar!="SIM") {
			ajax( "uti_cobrancarem.php?men_aceita="+men_aceita+"&socont=sim", "post", "!conteudo", "event" );
			if( fn=="GER" ){
	//			exibe_alerta( "Arquivo Gerado com sucesso." );
			}
			else if( fn=="ENV" ){
				exibe_alerta( "Arquivo enviado com sucesso" );
			}
			else if( fn=="REG" ){
				exibe_alerta( "Arquivo enviado com sucesso" );
			}
			//else if( fn=="tra" ){
			//	exibe_alerta( msgs[ "reg_tra" ] );
		}			//}
	}
}
function uti_cobrancarem_validacao( sobre ){
	if( sobre[ "origem" ].id=="apagar" ){
		if( qtd_marcados( "func" )==0 ){
			exibe_alerta( msgs[ "sel_reg" ] );
			return false;
		}
		else if( qtd_marcados( "func" )>1 ){
			exibe_alerta( msgs[ "um_reg" ] );
			return false;
		}
	}
	return true;
}
function uti_forcobrancaenv_validacao( sobre ){
	if( sobre[ "origem" ].id=="apagar" ){
		if( qtd_marcados( "func" )==0 ){
			exibe_alerta( msgs[ "sel_reg" ] );
			return false;
		}
		else if( qtd_marcados( "func" )>1 ){
			exibe_alerta( msgs[ "um_reg" ] );
			return false;
		}
	}
	if( sobre[ "origem" ].id=="emi_bol" ){
		if( $.trim( $( "#cmesre" ).val() )=="" ){
			exibe_alerta( "Indique o m�s de gera��o. Campo obrigat�rio." );
			$( "#cmesre" ).focus();
			return false;
		}
		if( $.trim( $( "#ccodig" ).val() )=="" ){
			exibe_alerta( "Indique o condom�nio. Campo obrigat�rio." );
			$( "#ccodig" ).focus();
			return false;
		}
		if( $.trim( $( "#dataini" ).val() )=="" ){
			exibe_alerta( "Indique a data in�cio. Campo obrigat�rio." );
			$( "#dataini" ).focus();
			return false;
		}
		if( $.trim( $( "#datafim" ).val() )=="" ){
			exibe_alerta( "Indique a data final. Campo obrigat�rio." );
			$( "#datafim" ).focus();
			return false;
		}
	}

	if( sobre[ "origem" ].id=="rem_bol" ){
		if( $.trim( $( "#cemail" ).val() ).length < 10 || $.trim( $( "#cemail" ).val() ).indexOf( "@" ) < 0 || $.trim( $( "#cemail" ).val() ).indexOf( "." ) < 0 ){
			exibe_alerta( "Indique pelo menos um email v�lido. Campo obrigat�rio." );
			$( "#cemail" ).focus();
			return false;
		}
	}
	return true;
}
function uti_forconvencao_validacao( sobre ){
	var tex_tipo = $( "#tex_tipo" ).val();
        if(tex_tipo=="p"){
		if( sobre[ "origem" ].id=="inclu" ){
			if( $.trim( $( "#cnscodp" ).val() )=="" ){
				exibe_alerta( "Selecione um propriet�rio. Sele��o obrigat�rio." );
				return false;
			}
		}
	}
	if( sobre[ "origem" ].className=="transferir"){
		var cnscod = $.trim( $( "#cnscod").val() );
		ajax_url_replace( "%#%", cnscod );
		return true;
	}
	return true;
}

//marketing
function conv_uploadmka( gatilho ){
	var base = $( "#base" ).val();
	var tipo_car = $( "#tipo_car" ).val();
	var tipo_mka = $( "#tipo_mka" ).val();
	var tex_texto = $( "#tex_texto" ).val();
	var men_aceita = $( "#men_aceita" ).val();
	ajaxupload( {
		url: "uti_convupload.php",
		fileField: "arquivo",
		onComplete: function( retorno ){
			if( retorno.indexOf( "ERRO:" )!=-1 ){
				exibe_alerta( retorno.replace( "ERRO:", "" ) );
			}
			if( retorno.indexOf( "ARQUIVO:" )!=-1 ){
				$( "#img_tex" ).val( retorno.split( "/" ).last() );
			}
			uti_cadmak( "uti_conservicos.php?atualizar=SIM&base="+base+"&tipo_mka="+tipo_mka+"&men_aceita="+men_aceita+"&tipo_car="+tipo_car+"&tex_texto="+tex_texto+"&socont=sim&tex_data="+$( "#tex_data" ).val()+"&ema_grupo="+$( "#ema_grupo" ).val()+"&tex_titulo="+$( "#tex_titulo" ).val()+"&img_tex="+retorno.split( "/" ).last(), "conteudo_int" );
		}
	} );
}

// rotina de UPLOAD marketing
function uti_cadmak(url, destino){
	var erro = false;
	if( $.trim( $( "#tex_data" ).val() )=="" ){
		exibe_alerta( "Informe a data do E-mail/Informativo. Campo obrigat�rio." );
		$( "#tex_data" ).focus();
		erro = true;
	}
	if( $.trim( $( "#ema_grupo" ).val() )=="" && erro==false ){
		exibe_alerta( "Informe o grupo para envio E-mail/Informativo. Campo obrigat�rio." );
		$( "#ema_grupo" ).focus();
		erro = true;
	}
	if( $.trim( $( "#tex_titulo" ).val() )=="" && erro==false ){
		exibe_alerta( "Informe o t�tulo do E-mail/Informativo. Campo obrigat�rio." );
		$( "#tex_titulo" ).focus();
		erro = true;
	}
	if( $.trim( $( "#img_tex" ).val() )=="" && erro==false ){
		exibe_alerta( "Selecione o imagem. Campo obrigat�rio." );
		erro = true;
	}
	if( erro==false ){
		ajax( url, "post", "!"+destino );
		fecha_popup();
	}
}



/// Rotinas de Gerencial  Acompanhamento Diversos
function ger_acompanhadiv_validacao( sobre ){
        if( sobre[ "origem" ].id=="cad_desp"){
		if( $.trim( $( "#fin_conta" ).val() )=="" ){
			exibe_alerta( "Selecione uma conta. Sele��o obrigat�rio." );
			return false;
		}
	}

	if( sobre[ "origem" ].id=="rel_cta" ){
		if( $.trim( $( "#pendpe1" ).val() )=="" ){
			exibe_alerta( "Informe a data inicial. Campo obrigat�rio." );
			$( "#pendpe1" ).focus();
			return false;
		}
		if( $.trim( $( "#pendpe2" ).val() )=="" ){
			exibe_alerta( "Informe a data final. Campo obrigat�rio." );
			$( "#pendpe2" ).focus();
			return false;
		}
	}

	if( sobre[ "origem" ].id=="rel_aco" ){
		if( $.trim( $( "#filtro" ).val() )=="" ){
			exibe_alerta( "Informe o n�mero. Campo obrigat�rio." );
			$( "#filro" ).focus();
			return false;
		}
	}

	return true;
}

function ger_acompanhadiv_load(){
	pagina_atual = 1;
	var men_aceita = $( "#men_aceita" ).val();
	var fin_conta = $( "#fin_conta" ).val();
	var rela = $( "#rela" ).val();
	if(rela=="cta"){
		var filtro = "";
		filtro = ( filtro!="" )?( ( filtro.length==1 )?filtro+"*":"*"+filtro+"*" ):"";
		var vars = "&men_aceita="+men_aceita+"&fin_conta="+fin_conta;
		paginacao( 34, function( results ){
			var men_aceita = $( "#men_aceita" ).val();
			var fin_conta = $( "#fin_conta" ).val();
			var rela = $( "#rela" ).val();
			var html = "";
			results.each( function( i, v ){
				html += "<tr class='"+( ( i%2==0 )?"p":"i" )+" id-"+v[ "id" ]+"'"+( i==0?" style='border-top: 1px solid #999;'":"" )+">";
				html += "<td  class='alincenter'>"+( v[ "ddtmov" ]==null?"":v[ "ddtmov" ] )+"</td>";
				html += "<td  class='alincenter'>"+( v[ "cnumbc" ]==null?"":v[ "cnumbc" ] )+"</td>";
				html += "<td>"+( v[ "cchequ" ]==null?"":v[ "cchequ" ] )+"</td>";
				html += "<td>"+( v[ "chisto" ]==null?"":v[ "chisto" ] )+"</td>";
				html += "<td class='alinright'>"+( v[ "nvalor" ]==null?"":v[ "nvalor" ] )+"</td>";
				html += "<td class='alincenter'>"+( v[ "status" ]==null?"":v[ "status" ] )+"</td></tr>";
			} );
			$( "table.registros" ).append( html );
		}, filtro, vars);
	}

	if(rela=="rec"){
		var filtro = $( "#filtro" ).val();
		var vars = "&men_aceita="+men_aceita+"&rela="+rela+"&filtro="+filtro;
		paginacao( 35, function( results ){
			var men_aceita = $( "#men_aceita" ).val();
			var rela = $( "#rela" ).val();
			var filtro = $( "#filtro" ).val();
			var html = "";
			results.each( function( i, v ){
				html += "<tr class='"+( ( i%2==0 )?"p":"i" )+" id-"+v[ "id" ]+"'"+( i==0?" style='border-top: 1px solid #999;'":"" )+">";
				html += "<td  class='alincenter'>"+( v[ "ddtemi" ]==null?"":v[ "ddtemi" ] )+"</td>";
				html += "<td class=alincenter><a href='#' onclick='return ajax(\"ger_acompanhadiv.php?tipo_car=10&socont=sim&men_aceita="+men_aceita+"&imprec=SIM&base="+v["base"]+"&numrec="+v["numrec"]+"\", \"post\", \"relat\" )'>"+v[ "numrec" ]+"</a></td>";
				html += "<td>"+( v[ "capeli" ]==null?"":v[ "capeli" ] )+"</td>";
				html += "<td>"+( v[ "cnomes" ]==null?"":v[ "cnomes" ] )+"</td>";
				html += "<td class='alinright'>"+( v[ "nvalor" ]==null?"":v[ "nvalor" ] )+"</td>";
				html += "<td>"+( v[ "emiten" ]==null?"":v[ "emiten" ] )+"</td></tr>";
			} );
			$( "table.registros" ).append( html );
		}, filtro, vars);
	}

	if(rela=="aco"){
		var filtro = $( "#filtro" ).val();
		var vars = "&men_aceita="+men_aceita+"&rela="+rela+"&filtro="+filtro;
		paginacao( 36, function( results ){
			var men_aceita = $( "#men_aceita" ).val();
			var rela = $( "#rela" ).val();
			var filtro = $( "#filtro" ).val();
			var html = "";
			results.each( function( i, v ){
				html += "<tr class='"+( ( i%2==0 )?"p":"i" )+" id-"+v[ "id" ]+"'"+( i==0?" style='border-top: 1px solid #999;'":"" )+">";
				html += "<td  class='alincenter'>"+( v[ "ddtemi" ]==null?"":v[ "ddtemi" ] )+"</td>";
				html += "<td class=alincenter><a href='#' onclick='return ajax(\"uti_mosacordo.php?men_aceita="+men_aceita+"&base="+v["base"]+"&cnscod="+v["cnscod"]+"&cnumac="+v["numrec"]+"\", \"post\", \"popup\" )'>"+v[ "numrec" ]+"</a></td>";
				html += "<td>"+( v[ "capeli" ]==null?"":v[ "capeli" ] )+"</td>";
				html += "<td>"+( v[ "cnomes" ]==null?"":v[ "cnomes" ] )+"</td>";
				html += "<td class='alinright'>"+( v[ "nvalor" ]==null?"":v[ "nvalor" ] )+"</td>";
				html += "<td>"+( v[ "emiten" ]==null?"":v[ "emiten" ] )+"</td></tr>";
			} );
			$( "table.registros" ).append( html );
		}, filtro, vars);
	}
}

//function ger_relatorio_validacao( sobre ){
//	var cmodulo = $( "#cmodulo" ).val();
//
//	//if( sobre[ "origem" ].id=="cad_desp" ){
//	//	if( $.trim( $( "#fin_conta" ).val() )=="" ){
//	//		exibe_alerta( "Selecione uma conta. Campo obrigat�rio." );
//	//		$( "#fin_conta" ).focus();
//	//		return false;
//	//	}
//	//}
//	if (cmodulo=="modadm") {
//		if( sobre[ "origem" ].id=="rel_cap" ){
//			if( $.trim( $( "#ccodig" ).val() )=="" ){
//				exibe_alerta( "Selecione um condom�nio. Campo obrigat�rio." );
//				$( "#ccodig" ).focus();
//				return false;
//			}
//			if( $.trim( $( "#pendpe1" ).val() )=="" ){
//				exibe_alerta( "Informe a data inicial. Campo obrigat�rio." );
//				$( "#pendpe1" ).focus();
//				return false;
//			}
//			if( $.trim( $( "#pendpe2" ).val() )=="" ){
//				exibe_alerta( "Informe a data final. Campo obrigat�rio." );
//				$( "#pendpe2" ).focus();
//				return false;
//			}
//		}
//		if( sobre[ "origem" ].id=="rel_cta" ){
//			if( $.trim( $( "#ccodig" ).val() )=="" ){
//				exibe_alerta( "Selecione um condom�nio. Campo obrigat�rio." );
//				$( "#ccodig" ).focus();
//				return false;
//			}
//			if( $.trim( $( "#pendpe1" ).val() )=="" ){
//				exibe_alerta( "Informe a data inicial. Campo obrigat�rio." );
//				$( "#pendpe1" ).focus();
//				return false;
//			}
//			if( $.trim( $( "#pendpe2" ).val() )=="" ){
//				exibe_alerta( "Informe a data final. Campo obrigat�rio." );
//				$( "#pendpe2" ).focus();
//				return false;
//			}
//		}
//	} else {
//		if( sobre[ "origem" ].id=="rel_cap" ){
//			if( $.trim( $( "#pendpe1" ).val() )=="" ){
//				exibe_alerta( "Informe a data inicial. Campo obrigat�rio." );
//				$( "#pendpe1" ).focus();
//				return false;
//			}
//			if( $.trim( $( "#pendpe2" ).val() )=="" ){
//				exibe_alerta( "Informe a data final. Campo obrigat�rio." );
//				$( "#pendpe2" ).focus();
//				return false;
//			}
//		}
//		if( sobre[ "origem" ].id=="rel_cta" ){
//			if( $.trim( $( "#pendpe1" ).val() )=="" ){
//				exibe_alerta( "Informe a data inicial. Campo obrigat�rio." );
//				$( "#pendpe1" ).focus();
//				return false;
//			}
//			if( $.trim( $( "#pendpe2" ).val() )=="" ){
//				exibe_alerta( "Informe a data final. Campo obrigat�rio." );
//				$( "#pendpe2" ).focus();
//				return false;
//			}
//		}
//	}
//
//	if( sobre[ "origem" ].id=="rat_habil" ){
//		if( $.trim( $( "#cmesre" ).val() )=="" && $.trim( $( "#ccodig" ).val() )=="" ){
//			exibe_alerta( "Selecione um m�s ou um condom�nio. Campo obrigat�rio." );
//			return false;
//		}
//	}
//	return true;
//}


//function ger_forestatistica_validacao( sobre ){
//	if( sobre[ "origem" ].id=="rel_con" ){
//		if( $.trim( $( "#ccodi" ).val() )=="" ){
//			exibe_alerta( "Selecione o condom�nio. Campo obrigat�rio." );
//			$( "#ccodi" ).focus();
//			return false;
//		}
//	}
//	return true;
//}

function busca_mesesta ( ){
		var ccodig = $( "#ccodi" ).val();
		$.ajax( {
				url: "../include/busca_base.php",
				type: "post",
				data: "busca=025&ccodig="+ccodig,
				success: function( json ){
						if( json=="err" ){ //alert (json);
								exibe_alerta( "Não existe recebimento para este condom�nio." );
						}
						else{
								eval( "var itens="+json );
								var partes = "<option value=''>Selecione o mês</option>";
								itens.each( function( i, v ){
									partes += "<option value='"+v[ "valor" ]+"'>"+v[ "texto" ]+"</option>";
								} );
								$( "#cmesre" ).html( partes );
						}
				}
		} );
}

function ger_estatistica_validacao( sobre ){
	if( sobre[ "origem" ].id=="rel_rec" ){
		if( $.trim( $( "#ccodig" ).val() )=="" && $.trim( $( "#cmesre" ).val() )=="" ){
			exibe_alerta( "Selecione um condomínio ou um mês ref. Campo obrigatõrio." );
			return false;
		}
	}
	if( sobre[ "origem" ].id=="rel_rat" ){
		if( $.trim( $( "#ccodig" ).val() )=="" && $.trim( $( "#cmesre" ).val() )=="" ){
			exibe_alerta( "Selecione um condomínio ou um mês ref. Campo obrigatório." );
			return false;
		}
	}
	return true;
}

function ger_acrescimo_load(){
	var filtro = "";
	var id_fun = $( "#id_fun" ).val();
	var rela = $( "#rela" ).val();
	var men_aceita = $( "#men_aceita" ).val();
	var vars = "&men_aceita="+men_aceita+"&rela="+rela+"&filtro="+filtro+"&id_fun="+id_fun;
	paginacao( 40, function( results ){
		var men_aceita = $( "#men_aceita" ).val();
		var rela = $( "#rela" ).val();
		var id_fun = $( "#id_fun" ).val();
		var html = "";
		results.each( function( i, v ){
			html += "<tr class='"+( ( i%2==0 )?"p":"i" )+" id-"+v[ "id" ]+"'"+( i==0?" style='border-top: 1px solid #999;'":"" )+">";
			html += "<td class='alincenter'><a href='#' onclick='return ajax(\"uti_mosacordo.php?men_aceita="+men_aceita+"&ccodig="+v["ccodig"]+"&cnscod="+v["cnscod"]+"&cnumac="+v["cnumac"]+"&id_fun="+id_fun+"&rela="+rela+"\", \"post\", \"popup\" )'>"+v[ "cnumac" ]+"</a></td>";
			html += "<td class='alincenter'>"+( v[ "dtvcto" ]==null?"":v[ "dtvcto" ] )+"</td>";
			html += "<td class='alinright'>"+( v[ "nprinc" ]==null?"":v[ "nprinc" ] )+"</td>";
			html += "<td class='alinright'>"+( v[ "nmulta" ]==null?"":v[ "nmulta" ] )+"</td>";
			html += "<td class='alinright'>"+( v[ "njuros" ]==null?"":v[ "njuros" ] )+"</td>";
			html += "<td class='alinright'>"+( v[ "ncorre" ]==null?"":v[ "ncorre" ] )+"</td>";
			html += "<td class='alinright'>"+( v[ "nhonor" ]==null?"":v[ "nhonor" ] )+"</td>";
			html += "<td class='alinright'>"+( v[ "ndesco" ]==null?"":v[ "ndesco" ] )+"</td>";
			html += "<td class='alinright'>"+( v[ "ntotpr" ]==null?"":v[ "ntotpr" ] )+"</td>";
			if(v[ "c_movi" ]=="."){
				html += "<td style='text-align: center;'>"+( "<img src=../images/xxxx.gif>" )+"</td>";
			} else if (v[ "c_movi" ]=="*"){
				html += "<td style='text-align: center;'>"+( "<img src=../images/tique.gif>" )+"</td>";
			}
			if(v[ "c_movi" ]=="."){
				    html += "<td style='text-align: center;'>"+( "<img src=../images/xxxx.gif>" )+"</td>";
			} else if (v[ "c_movi" ]=="*"){
				html += "<td style='text-align: center;'><input type='checkbox' name='id_hon[]' value='"+v[ "id" ]+"' class='func' />";
				html += "<input type='hidden' name='"+v[ "id" ]+"' id='"+v[ "id" ]+"' value='"+v[ "id_hon" ]+"' /></td></tr>";
			}
		} );
		$( "table.registros" ).append( html );
	}, filtro, vars);
}

function ger_foracrescimo_validacao( sobre ){
	if( sobre[ "origem" ].id=="pag_hono" ){
		if( qtd_marcados( "func" )==0 ){
			exibe_alerta( msgs[ "sel_reg" ] );
			return false;
		}
	}

	if( sobre[ "origem" ].id=="popapagar" ){
		if( qtd_marcados( "popfunc" )==0 ){
			exibe_alerta( msgs[ "sel_reg" ] );
			return false;
		}
	}

	if( sobre[ "origem" ].id=="papagari" ){
		if( qtd_marcados( "ppfunc" )==0 ){
			exibe_alerta( msgs[ "sel_reg" ] );
			return false;
		}
	}

	if( sobre[ "origem" ].className=="pagar" ){
		if( qtd_marcados( "func" )==0 ){
			exibe_alerta( msgs[ "sel_reg" ] );
			return false;
		}
		else if( qtd_marcados( "func" )>1 ){
			exibe_alerta( msgs[ "um_reg" ] );
			return false;
		}
		else{
			var cbox = $( "input.func" );
			for( var i=0;i<cbox.length;i++ ){
				if( cbox[ i ].checked==true ){
					var id = $( cbox[ i ] ).parents( "tr" ).attr( "class" ).split( "id-" )[ 1 ].split( " " )[ 0 ];
					var id_rtg = $.trim( $( "#id_rtg-"+id ).val() );
					ajax_url_replace( "%#%", id_rtg );
					return true;
				}
			}
		}
	}

	if( sobre[ "origem" ].className=="relatorio" ){
		if( $.trim( $( "#cmesre" ).val() )=="" && $.trim( $( "#ccodig" ).val() )=="" ){
			exibe_alerta( "Selecione um m�s refer�ncia ou condom�nio. Campo obrigat�rio." );
			$( "#cmesre" ).focus();
			return false;
		}
	}

	if( sobre[ "origem" ].id=="popimpr" ){
		var nvlant = parseFloat( $( "#nvlant" ).val().replace( ".", "" ).replace( ",", "." ) );
		var nvlpgo = parseFloat( $( "#nvlpgo" ).val().replace( ".", "" ).replace( ",", "." ) );
		var ntotal = parseFloat( $( "#ntotal" ).val().replace( ".", "" ).replace( ",", "." ) );
		if(nvlpgo<nvlant){
			exibe_alerta( msgs[ "rat_naof" ] );
			$( "#ntotal" ).focus();
			return false;
		}
	}
	if( sobre[ "origem" ].id=="popimprrel" ){
		var nvlant = parseFloat( $( "#nvlant" ).val().replace( ".", "" ).replace( ",", "." ) );
		var nvlpgo = parseFloat( $( "#nvlpgo" ).val().replace( ".", "" ).replace( ",", "." ) );
		var ntotal = parseFloat( $( "#ntotal" ).val().replace( ".", "" ).replace( ",", "." ) );
		if(nvlpgo<nvlant){
			exibe_alerta( msgs[ "rat_naof" ] );
			$( "#ntotal" ).focus();
			return false;
		}
	}
	if( sobre[ "origem" ].id=="aco_tro" ){
		if( $.trim( $( "#usu_codigo" ).val() )=="" ){
			exibe_alerta( "Informe novo respons�vel. Campo obrigat�rio." );
			$( "#usu_codigo" ).focus();
			return false;
		}
	}
	if( sobre[ "origem" ].id=="cad_ratn" ){
		var nvlant = parseFloat( $( "#nvlant" ).val().replace( ".", "" ).replace( ",", "." ) );
		var nvlpgo = parseFloat( $( "#nvlpgo" ).val().replace( ".", "" ).replace( ",", "." ) );
		var ntotal = parseFloat( $( "#ntotal" ).val().replace( ".", "" ).replace( ",", "." ) );
                var funcao = $( "#funcao" ).val();
		var nvlant = parseFloat( $( "#nvlant" ).val().replace( ".", "" ).replace( ",", "." ) );
		var nvlpgo = parseFloat( $( "#nvlpgo" ).val().replace( ".", "" ).replace( ",", "." ) );
		var ntotal = parseFloat( $( "#ntotal" ).val().replace( ".", "" ).replace( ",", "." ) );
		if( $.trim( $( "#ddtmov" ).val() )=="" ){
			exibe_alerta( "A data de movimenta��o n�o pode ser vazia. Campo obrigat�rio." );
			$( "#ddtmov" ).focus();
			return false;
		}
		if( $.trim( $( "#cchequ" ).val() )=="" ){
			exibe_alerta( "Informe o n�mero do cheque ou doc. Campo obrigat�rio." );
			$( "#cchequ" ).focus();
			return false;
		}
		if( $.trim( $( "#cbanco" ).val() )=="" ){
			exibe_alerta( "Informe o banco ou caixa. Campo obrigat�rio." );
			$( "#cbanco" ).focus();
			return false;
		}
		if( $.trim( $( "#forma" ).val() )=="" ){
			exibe_alerta( "Informe a forma de pagamento. Campo obrigat�rio." );
			$( "#forma" ).focus();
			return false;
		}
		if( $.trim( $( "#ntotal" ).val() )=="" ){
			exibe_alerta( "Informe o valor a pagar. Campo obrigat�rio." );
			$( "#ntotal" ).focus();
			return false;
		}
		if( $.trim( $( "#ddtpre" ).val() )=="" ){
			exibe_alerta( "A data de previs�o n�o pode ser vazia. Campo obrigat�rio." );
			$( "#ddtpre" ).focus();
			return false;
		}
		if(nvlpgo==nvlant){
			exibe_alerta( msgs[ "rat_totf" ] );
			$( "#ntotal" ).focus();
			return false;
		}

		if((nvlpgo+ntotal)>nvlant){
			exibe_alerta( msgs[ "rat_maif" ] );
			$( "#ntotal" ).focus();
			return false;
		}
		return true;
	}
	else{
		return true;
	}
}





















/////////// FIM DAS FUN��ES PARA O AJAX ///////////


//////////  FUNCOES DE  BUSCAS E CALCULOS ///////////////
function busca_saldos( ccodbc ){
	$.ajax( {
		type: "post",
		url: "../include/busca_base.php",
		data: "busca=002&ccodbc="+ccodbc,
		success: function( response ){ alert (response);
			eval( "var saldos = "+response );
			$( "td.qtd_autenticacao" ).html( saldos[ "qtd_autenticacao" ] );
			$( "td.qtd_cheque" ).html( saldos[ "qtd_cheque" ] );
			$( "td.qtd_chequepre" ).html( saldos[ "qtd_chequepre" ] );
			$( "td.qtd_cartao" ).html( saldos[ "qtd_cartao" ] );
			$( "td.valor_reais" ).html( saldos[ "valor_reais" ] );
			$( "td.valor_cheque" ).html( saldos[ "valor_cheque" ] );
			$( "td.valor_chequepre" ).html( saldos[ "valor_chequepre" ] );
			$( "td.valor_cartao" ).html( saldos[ "valor_cartao" ] );
			$( "td.saldo_anterior" ).html( saldos[ "saldo_anterior" ] );
			$( "td.saldo_atual" ).html( saldos[ "saldo_atual" ] );
			$( "td.total_debitos" ).html( saldos[ "total_debitos" ] );
			$( "td.total_creditos" ).html( saldos[ "total_creditos" ] );
			$( "td.total_limite" ).html( saldos[ "total_limite" ] );
			$( "td.liqemp_total" ).html( saldos[ "liqemp_total" ] );
			$( "td.liqbco_total" ).html( saldos[ "liqbco_total" ] );
			$( "td.valor_vencido" ).html( saldos[ "valor_vencido" ] );
			$( "td.saldo_com30dias" ).html( saldos[ "saldo_com30dias" ] );
			$( "td.saldo_com60dias" ).html( saldos[ "saldo_com60dias" ] );
			$( "td.total_dodia" ).html( saldos[ "total_dodia" ] );
		}
	} );
}
function busca_dadoscond( comp ){
	comp = ( comp==undefined )?"":comp;
	var base = $( "#base" ).val();
	$.ajax( {
		type: "post",
		url: "../include/busca_base.php",
		data: "busca=017&base="+base,
		success: function( response ){
			eval( "var condominio = "+response );
			var opt = "<option value=\"\">Unid.</option>\n";
			condominio.unidades.each( function( i, t ){
				opt += "<option value=\""+t+"\">"+t+"</option>\n";
			} );
			$( "#cnscoda"+comp ).html( opt );
			opt = "<option value=\"\">Bloco</option>\n";
			if( condominio.blocos[ 0 ]!=null ){
				condominio.blocos.each( function( i, t ){
					opt += "<option value=\""+t+"\">"+t+"</option>\n";
				} );
			}
			$( "#cnscodb"+comp ).html( opt );
			opt = "<option value=\"\">Selecione um propriet�rio</option>\n";
			condominio.proprietarios.each( function( i, ar ){
				var bloco = ( ar[ "bloco" ]!=null )?"-"+ar[ "bloco" ]:"";
				opt += "<option value=\""+ar[ "cod" ]+"\" class=\""+ar[ "unidade" ]+bloco+"\">"+ar[ "nome" ]+"</option>\n";
			} );
			$( "#cnscodp"+comp ).html( opt );
		}
	} );
}
function sinc_dadoscond( tipo, comp ){
	comp = ( comp==undefined )?"":comp;
	switch( tipo ){
		case "ub":
			var unidade = $( "#cnscoda"+comp )[ 0 ].options[ $( "#cnscoda"+comp )[ 0 ].selectedIndex ].value;
			var bloco = $( "#cnscodb"+comp )[ 0 ].options[ $( "#cnscodb"+comp )[ 0 ].selectedIndex ].value;
			if( $( "#cnscodb"+comp )[ 0 ].options.length>1 ){
//				if( unidade!="" && bloco!="" ){
				if( unidade!="" ){
					$( "#cnscodp"+comp+" option."+unidade+"-"+bloco )[ 0 ].selected = true;
				}
			}
			else{
				if( unidade!="" ){
					$( "#cnscodp"+comp+" option."+unidade )[ 0 ].selected = true;
				}
			}
			break;
		case "p":
			var unidade = $( "#cnscodp"+comp )[ 0 ].options[ $( "#cnscodp"+comp )[ 0 ].selectedIndex ].className.split( "-" );
			var bloco = ( unidade.length==2 )?unidade[ 1 ]:"";
			unidade = unidade[ 0 ];
			for( var i=0;i<$( "#cnscoda"+comp )[ 0 ].options.length;i++ ){
				if( $( "#cnscoda"+comp )[ 0 ].options[ i ].value==unidade ){
					$( "#cnscoda"+comp )[ 0 ].options[ i ].selected = true;
				}
			}
			if( bloco!="" ){
				for( var i=0;i<$( "#cnscodb"+comp )[ 0 ].options.length;i++ ){
					if( $( "#cnscodb"+comp )[ 0 ].options[ i ].value==bloco ){
						$( "#cnscodb"+comp )[ 0 ].options[ i ].selected = true;
					}
				}
			}
			break;
	}
	var cnscodp = $( "#cnscodp"+comp )[ 0 ].options[ $( "#cnscodp"+comp )[ 0 ].selectedIndex ].value;
}

function busca_dadoscondjur( comp ){
	comp = ( comp==undefined )?"":comp;
	var base = $( "#base" ).val();
	$.ajax( {
		type: "post",
		url: "../include/busca_base.php",
		data: "busca=029&base="+base,
		success: function( response ){
			eval( "var condominio = "+response );
			var opt = "<option value=\"\">Unid.</option>\n";
			condominio.unidades.each( function( i, t ){
				opt += "<option value=\""+t+"\">"+t+"</option>\n";
			} );
			$( "#cnscoda"+comp ).html( opt );
			opt = "<option value=\"\">Bloco</option>\n";
			if( condominio.blocos[ 0 ]!=null ){
				condominio.blocos.each( function( i, t ){
					opt += "<option value=\""+t+"\">"+t+"</option>\n";
				} );
			}
			$( "#cnscodb"+comp ).html( opt );
			opt = "<option value=\"\">Selecione um propriet�rio</option>\n";
			condominio.proprietarios.each( function( i, ar ){
				var bloco = ( ar[ "bloco" ]!=null )?"-"+ar[ "bloco" ]:"";
				opt += "<option value=\""+ar[ "cod" ]+"\" class=\""+ar[ "unidade" ]+bloco+"\">"+ar[ "nome" ]+"</option>\n";
			} );
			$( "#cnscodp"+comp ).html( opt );
		}
	} );
}

function sinc_dadoscondjur( tipo, comp ){
	comp = ( comp==undefined )?"":comp;
	switch( tipo ){
		case "ub":
			var unidade = $( "#cnscoda"+comp )[ 0 ].options[ $( "#cnscoda"+comp )[ 0 ].selectedIndex ].value;
			var bloco = $( "#cnscodb"+comp )[ 0 ].options[ $( "#cnscodb"+comp )[ 0 ].selectedIndex ].value;
			if( $( "#cnscodb"+comp )[ 0 ].options.length>1 ){
//				if( unidade!="" && bloco!="" ){
				if( unidade!="" ){
					$( "#cnscodp"+comp+" option."+unidade+"-"+bloco )[ 0 ].selected = true;
				}
			}
			else{
				if( unidade!="" ){
					$( "#cnscodp"+comp+" option."+unidade )[ 0 ].selected = true;
				}
			}
			break;
		case "p":
			var unidade = $( "#cnscodp"+comp )[ 0 ].options[ $( "#cnscodp"+comp )[ 0 ].selectedIndex ].className.split( "-" );
			var bloco = ( unidade.length==2 )?unidade[ 1 ]:"";
			unidade = unidade[ 0 ];
			for( var i=0;i<$( "#cnscoda"+comp )[ 0 ].options.length;i++ ){
				if( $( "#cnscoda"+comp )[ 0 ].options[ i ].value==unidade ){
					$( "#cnscoda"+comp )[ 0 ].options[ i ].selected = true;
				}
			}
			if( bloco!="" ){
				for( var i=0;i<$( "#cnscodb"+comp )[ 0 ].options.length;i++ ){
					if( $( "#cnscodb"+comp )[ 0 ].options[ i ].value==bloco ){
						$( "#cnscodb"+comp )[ 0 ].options[ i ].selected = true;
					}
				}
			}
			break;
	}
	var cnscodp = $( "#cnscodp"+comp )[ 0 ].options[ $( "#cnscodp"+comp )[ 0 ].selectedIndex ].value;
}





function somamarcados( cls ){
	var soma = 0;
	var juros = 0;
	var multa = 0;
	var correcao = 0;
	var encargos = 0;
	$( "input."+cls ).each( function( i, e ){
		if( e.checked==true ){
			soma += parseFloat( pendencias[ i ][ "valor" ] );
			juros += parseFloat( pendencias[ i ][ "juros" ] );
			multa += parseFloat( pendencias[ i ][ "multa" ] );
			correcao += parseFloat( pendencias[ i ][ "correcao" ] );
			encargos += parseFloat( pendencias[ i ][ "honorarios" ] );
		}
	} );
	var total = soma+juros+multa+correcao+encargos;
	$( "#somatoria" ).html( soma.formatMoney() );
	$( "#ntotge" ).val( total.formatMoney() );
	$( "#exb_juros" ).html( juros.formatMoney() );
	$( "#exb_multa" ).html( multa.formatMoney() );
	$( "#exb_correcao" ).html( correcao.formatMoney() );
	$( "#exb_encargos" ).html( encargos.formatMoney() );
	$( "#exb_total" ).html( total.formatMoney() );

	var somatoria = "";
	$( "input.pendencia" ).each( function( i, e ){
	  if( e.checked ){
	    var indice = parseInt( $( this ).attr( "class" ).replace( "pendencia ", "" ) );
	    somatoria += pendencias[ indice ][ "id_pro" ]+":";
	    somatoria += pendencias[ indice ][ "multa" ]+":";
	    somatoria += pendencias[ indice ][ "juros" ]+":";
	    somatoria += pendencias[ indice ][ "correcao" ]+":";
	    somatoria += pendencias[ indice ][ "honorarios" ]+":";
	    somatoria += pendencias[ indice ][ "valor" ]+"|";
	  }
	} );
	somatoria = somatoria.substring( 0, somatoria.length-1 );
	$( "#agrega" ).val( somatoria );
}

function calcula_diferenca(){
	var receber = parseFloat( $( "#ntotge" ).val().replace( ".", "" ).replace( ",", "." ) );
	var dinheiro = parseFloat( $( "#ntotdi" ).val().replace( ".", "" ).replace( ",", "." ) );
	var resultado = receber-dinheiro;
	if( resultado>0 ){
		$( "#nfatdi" ).val( resultado.formatMoney() );
		$( "#nfatch" ).val( "0,00" );
	}
	else{
		$( "#nfatdi" ).val( "0,00" );
		resultado = resultado*(-1);
		$( "#nfatch" ).val( resultado.formatMoney() );
  	}
}

function calcula_diferenca_venda(){
	var receber = parseFloat( $( "#ntotge" ).val().replace( ".", "" ).replace( ",", "." )/100 );
	var dinheiro = parseFloat( $( "#ntotdi" ).val().replace( ".", "" ).replace( ",", "." ));
	var resultado = receber-dinheiro;
	if( resultado>0 ){
		$( "#nfatdi" ).val( resultado.formatMoney() );
		$( "#nfatch" ).val( "0,00" );
	}
	else{
		$( "#nfatdi" ).val( "0,00" );
		resultado = resultado*(-1);
		$( "#nfatch" ).val( resultado.formatMoney() );
  	}
}

function calcula_diferenca_baixa(){
	var receber = parseFloat( $( "#ntotge" ).val().replace( ".", "" ).replace( ",", "." ) );
	var dinheiro = parseFloat( $( "#ntotdi" ).val().replace( ".", "" ).replace( ",", "." ));
	var resultado = receber-dinheiro;
	if( resultado>0 ){
		$( "#nfatdi" ).val( resultado.formatMoney() );
		$( "#nfatch" ).val( "0,00" );
	}
	else{
		$( "#nfatdi" ).val( "0,00" );
		resultado = resultado*(-1);
		$( "#nfatch" ).val( resultado.formatMoney() );
  	}
}

Number.prototype.formatMoney = function( c, d, t ){ //Serve para formatar um number em formato dinheiro
	var n = this;
	c = isNaN( c = Math.abs( c ) )?2:c;
	d = ( d==undefined )?",":d;
	t = ( t==undefined )?".":t;
	var i = parseInt( n = ( +n || 0 ).toFixed( c ) )+"";
	var j = ( ( j=i.length )>3 )?j%3:0;
	return ( ( j )?i.substr( 0, j )+t:"" )+i.substr( j ).replace( /(\d{3})(?=\d)/g, "$1"+t )+( ( c )?d+( n-i ).toFixed( c ).slice( 2 ):"" );
};

Number.prototype.formatMoneyy = function( c, d, t ){ //Serve para formatar um number em formato dinheiro
	var n = this;
	c = isNaN( c = Math.abs( c ) )?4:c;
	d = ( d==undefined )?",":d;
	t = ( t==undefined )?".":t;
	var i = parseInt( n = ( +n || 0 ).toFixed( c ) )+"";
	var j = ( ( j=i.length )>3 )?j%3:0;
	return ( ( j )?i.substr( 0, j )+t:"" )+i.substr( j ).replace( /(\d{3})(?=\d)/g, "$1"+t )+( ( c )?d+( n-i ).toFixed( c ).slice( 2 ):"" );
};

Number.prototype.formatMoneyyy = function( c, d, t ){ //Serve para formatar um number em formato dinheiro
	var n = this;
	c = isNaN( c = Math.abs( c ) )?3:c;
	d = ( d==undefined )?",":d;
	t = ( t==undefined )?".":t;
	var i = parseInt( n = ( +n || 0 ).toFixed( c ) )+"";
	var j = ( ( j=i.length )>3 )?j%3:0;
	return ( ( j )?i.substr( 0, j )+t:"" )+i.substr( j ).replace( /(\d{3})(?=\d)/g, "$1"+t )+( ( c )?d+( n-i ).toFixed( c ).slice( 2 ):"" );
};


//////////  FIM FUNCOES DE  BUSCAS E CALCULOS///////////////












// bloqueia visualizacao do fonte
function verfonte() {
  if(event.button==2){
    window.alert('O c�digo fonte deste site n�o pode ser exibido.\n\  Mas solicite voc� infrma��o para o endere�o:\n\         webmaster@activecompany.com.br\n\n\     Clique em Ok, para continuar navegando.');
  }
}

// abre janela poup-up de ajuda do sistema
function OpenUpAjuda(pagina,janela) {
   window.open(pagina,janela,'toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=no,menubar=no,width=520,height=400')
}

// funcao para impressao
function imprimir(){
   window.print();
}

//funcao voltar campos
function voltar(todoscampos,getoupost,tab){
  enviagenerico(todoscampos,document.getElementById("ultima").value,getoupost,tab)
}

function enviacomfoco(campo,todoscampos,idcampo,getoupost,tab){
  enviagenerico(todoscampos,idcampo,getoupost,tab);
}

function levarvalor(origem,destino){
  document.getElementById(destino).value=document.getElementById(origem).value;
}

function levarvalormulti(origem,destino,destinoo){
	  document.getElementById(destinoo).value=document.getElementById(destino).value;
	  document.getElementById(destino).value=document.getElementById(origem).value;
}

function foco_primeiro( id_form ){
  for (var i=0; i<document.getElementById( id_form ).elements.length;i++){
    if(document.getElementById( id_form ).elements[i].type!="hidden"){
      document.getElementById( id_form ).elements[i].focus();
      window.setTimeout(function() { document.getElementById( id_form ).elements[i].focus();},250)
      //alert(document.getElementById( id_form ).elements[i].id)
      return;
    }
  }
}

/*
function click() {
  if (event.button==2) {
    alert('Todos os Direitos Reservados.')
  }
}
document.onmousedown=click

function disableselect(e){
  return false
}
function reEnable(){
  return true
}
document.onselectstart=new Function ("return false")
if (window.sidebar){
  document.onmousedown=disableselect
  document.onclick=reEnable
}
						 */


Array.prototype.last = function(){
	var array = this;
	return array[ array.length-1 ];
};

// mover relogio
function moveRelogio(){
  momentoAtual = new Date()
  hora = momentoAtual.getHours()
  minuto = momentoAtual.getMinutes()
  segundo = momentoAtual.getSeconds()
  str_segundo = new String (segundo)
  if(str_segundo.length == 1)
    segundo = "0" + segundo
    str_minuto = new String (minuto)
    if(str_minuto.length == 1)
      minuto = "0" + minuto
    str_hora = new String (hora)
    if(str_hora.length == 1)
       hora = "0" + hora
	if(document.getElementById('campoteste2').value==""){
 	  document.getElementById('campoteste2').value=segundo;
	  var tempofinal=document.getElementById('campoteste2').value+3;
	}
	document.getElementById('campoteste').value=tempofinal;
	if(document.getElementById('campoteste2').value==tempofinal){
	  document.getElementById('palav').value='00000';
	}
    setTimeout("moveRelogio()",1000)
}

// estracao de scrit de texo
function extraiScript(texto){
  //Maravilhosa fun��o feita pelo SkyWalker.TO do imasters/forum
  // inicializa o inicio ><
  var ini = 0;
  // loop enquanto achar um script
  while (ini!=-1){
    // procura uma tag de script
    ini = texto.indexOf('<script', ini);
    // se encontrar
    if(ini >=0){
      // define o inicio para depois do fechamento dessa tag
      ini = texto.indexOf('>', ini) + 1;
      // procura o final do script
      var fim = texto.indexOf('</script>', ini);
      // extrai apenas o script
      codigo = texto.substring(ini,fim);
      //  alert(codigo);
	  // executa o script
      // eval(codigo);
      novo = document.createElement("script")
	  // Define par�metro language=javascript para o objeto de script
  	  novo.setAttribute('language', 'javascript');
      novo.text = codigo;
	  document.body.appendChild(novo);
    }
  }
}

// funcao envia formulario com id para validar/gravar/alterar (AJAX)
function enviaForm(frmNome, url, destino){
  var query='';
  // Captura o form
  f = document.getElementById(frmNome);
  for (i=0;i<f.elements.length;i++){
    // concatena a variavel na query
    if(f.elements[i].type=='radio'||f.elements[i].type=='checkbox'){
      if(f.elements[i].checked){
        query +=  '&'+f.elements[i].name + '=' + f.elements[i].value;
      }
    } else {
      query +=  '&'+f.elements[i].name + '=' + escape( f.elements[i].value.replace("&","@@@@@@") );
    }
  }
  // envia o formulario
  //alert(query);
  if(arguments[3]==null){
    enviagenerico(query,url,'POST',destino);
  } else {
    enviagenerico(query,url,'POST',destino,arguments[3]);
  }
}

// envia texto com fckeditor para um campo de edicao unico
function enviatexto(frmNome, url, destino){
  var erro="N";
  if(document.getElementById('tit').value==""){
	exibe_alerta("Informe o titulo do artigo.\n       Campo obrigat�rio.");
	document.getElementById('tit').focus();
	erro="S";
	return false;
  }
  if(document.getElementById('num').value==""){
	exibe_alerta("Informe o n�mero do artigo.\n       Campo obrigat�rio.");
	document.getElementById('num').focus();
	erro="S";
	return false;
  }
  if(document.getElementById('dat').value==""){
	exibe_alerta("Informe a data do artigo.\n       Campo obrigat�rio.");
	document.getElementById('dat').focus();
	erro="S";
	return false;
  }
  var query='';
  var not_conteudo = FCKeditorAPI.GetInstance('not_conteudo').GetXHTML();
  //aqui eu troco o & por @@@@@@
  not_conteudo=not_conteudo.replace(/&/g,"@@@@@@");

  FCKeditorAPI = null;
  __FCKeditorNS = null;

  // Captura o form
  f = document.getElementById(frmNome);

  for (i=0;i<f.elements.length;i++){
    // concatena a variavel na query
    if(f.elements[i].type=='radio'||f.elements[i].type=='checkbox'){
      if(f.elements[i].checked){
        query +=  '&'+f.elements[i].name + '=' + f.elements[i].value;
	  }
    } else {
      query +=  '&'+f.elements[i].name + '=' + f.elements[i].value.replace("&","@@@@@@");
    }
  }
  // envia o formulario
  // alert(query);

  query+="&not_conteudo="+not_conteudo;
  if(erro=="N"){enviagenerico(query,url,'POST',destino);}
}


function enviatexto2cpo(frmNome, url, destino){
  var query='';
  var not_conteudo1 = FCKeditorAPI.GetInstance('not_conteudo1').GetXHTML();
  //aqui eu troco o & por @@@@@@
  not_conteudo1=not_conteudo1.replace(/&/g,"@@@@@@");

  var not_conteudo2 = FCKeditorAPI.GetInstance('not_conteudo2').GetXHTML();
  //aqui eu troco o & por @@@@@@
  not_conteudo2=not_conteudo2.replace(/&/g,"@@@@@@");

  FCKeditorAPI = null;
  __FCKeditorNS = null;

  // Captura o form
  f = document.getElementById(frmNome);

  for (i=0;i<f.elements.length;i++){
    // concatena a variavel na query
    if(f.elements[i].type=='radio'||f.elements[i].type=='checkbox'){
      if(f.elements[i].checked){
        query +=  '&'+f.elements[i].name + '=' + f.elements[i].value;
	  }
    } else {
      query +=  '&'+f.elements[i].name + '=' + f.elements[i].value.replace("&","@@@@@@");
    }
  }
  // envia o formulario
  //alert(query);

  query+="&not_conteudo1="+not_conteudo1+"&not_conteudo2="+not_conteudo2;
  enviagenerico(query,url,'POST',destino);
}

function enviatexto3cpo(frmNome, url, destino){
  var query='';
  var not_conteudo1 = FCKeditorAPI.GetInstance('not_conteudo1').GetXHTML();
  //aqui eu troco o & por @@@@@@
  not_conteudo1=not_conteudo1.replace(/&/g,"@@@@@@");

  var not_conteudo2 = FCKeditorAPI.GetInstance('not_conteudo2').GetXHTML();
  //aqui eu troco o & por @@@@@@
  not_conteudo2=not_conteudo2.replace(/&/g,"@@@@@@");

  var not_conteudo3 = FCKeditorAPI.GetInstance('not_conteudo3').GetXHTML();
  //aqui eu troco o & por @@@@@@
  not_conteudo3=not_conteudo3.replace(/&/g,"@@@@@@");

  FCKeditorAPI = null;
  __FCKeditorNS = null;

  // Captura o form
  f = document.getElementById(frmNome);

  for (i=0;i<f.elements.length;i++){
    // concatena a variavel na query
    if(f.elements[i].type=='radio'||f.elements[i].type=='checkbox'){
      if(f.elements[i].checked){
        query +=  '&'+f.elements[i].name + '=' + f.elements[i].value;
	  }
    } else {
      query +=  '&'+f.elements[i].name + '=' + f.elements[i].value.replace("&","@@@@@@");
    }
  }
  // envia o formulario
  //alert(query);

  query+="&not_conteudo1="+not_conteudo1+"&not_conteudo2="+not_conteudo2+"&not_conteudo3="+not_conteudo3;
  enviagenerico(query,url,'POST',destino);
}

// formata campos diversos
function formatar(mascara, documento){
  var i = documento.value.length;
  var saida = mascara.substring(0,1);
  var texto = mascara.substring(i)
  if (texto.substring(0,1) != saida){
	documento.value += texto.substring(0,1);
  }
}

// formata campo de mes referencia
function mascara_referencia(nascimento,campoesp){
  var mynascimento = '';
  mynascimento = mynascimento + nascimento;
  if(mynascimento.length == 2){
    mynascimento = mynascimento + '-';
    campoesp.value = mynascimento;
  }
  if(mynascimento.length == 7){
    verifica_referencia(campoesp);
  }
}

// verifica mes referencia
function verifica_referencia (campoesp) {
  mes = (campoesp.value.substring(0,2));
  ano = (campoesp.value.substring(3,7));
  situacao = "";
  // verifica se o mes e valido
  if(mes < "01" || mes > "12" ) {
    situacao = "falsa";
  }
  // verifica se e ano bissexto
  if(mes == "2" && ( dia < "01" || dia > "29" || ( dia > "28" && (parseInt(ano / 4) != ano / 4)))) {
    situacao = "falsa";
  }
  if(campoesp.value == "") {
    situacao = "falsa";
  }
  if(situacao == "falsa") {
    exibe_alerta("A Referencia "+campoesp.value+" � inv�lida! Insira uma refer�ncia correta!");
	campoesp.value="";
    campoesp.focus();
  }
}

// formata campo data
function mascara_nascimento(nascimento,campoesp){
  var mynascimento = '';
  mynascimento = mynascimento + nascimento;
  if(mynascimento.length == 2){
    mynascimento = mynascimento + '/';
    campoesp.value = mynascimento;
  }
  if(mynascimento.length == 5){
    mynascimento = mynascimento + '/';
    campoesp.value = mynascimento;
  }
  if(mynascimento.length == 10){
    verifica_nascimento(campoesp);
  }
}

// verifica campo data
function verifica_nascimento (campoesp) {
  dia = (campoesp.value.substring(0,2));
  mes = (campoesp.value.substring(3,5));
  ano = (campoesp.value.substring(6,10));
  situacao = "";
  // verifica o dia valido para cada mes
  if((dia < "01")||(dia < "01" || dia > "30") && (  mes == "04" || mes == "06" || mes == "09" || mes == "11" ) || dia > "31") {
    situacao = "falsa";
  }
  // verifica se o mes e valido
  if(mes < "01" || mes > "12" ) {
    situacao = "falsa";
  }
  // verifica se e ano bissexto
  if(mes == "2" && ( dia < "01" || dia > "29" || ( dia > "28" && (parseInt(ano / 4) != ano / 4)))) {
    situacao = "falsa";
  }
  if(campoesp.value == "") {
    situacao = "falsa";
  }
  if(situacao == "falsa") {
    exibe_alerta("A Data "+campoesp.value+" � inv�lida!\nInsira uma data correta!");
	campoesp.value="";
    campoesp.focus();
  }
}

// mascara para cep
function mascara_cep(cep,campo){
  var mycep = '';
  mycep = mycep + cep;
  if(mycep.length == 5){
	 mycep = mycep + '-';
	 campo.value = mycep;
  }
}

// formata valores de moedas, percentuais
function FormataValor2(campo,tammax,casas){

	if( typeof( campo )=="string" ){ var el = document.getElementById(campo); } else { var el = campo; }
	var vr=el.value

	// var vrss=document.getElementById(campo).value
	while (vr.indexOf(".")>=0) {
		vr=vr.replace(".","");
	}
	while (vr.indexOf(",")>=0) {
		vr=vr.replace(",","");
	}
	if(isNaN(vr)){
		exibe_alerta("Foi Digitado uma Letra. Este campo aceita só numeros com virgula ou ponto");
		el.value=vr.substring(0,vr.length-1);
	} else {
		if(vr.length<tammax){
			if(vr.length>casas){
								vr=vr.substr(0,vr.length-casas)+","+vr.substr(vr.length-casas,vr.length);
								el.value=vr;
					  }
					  vrteste=vr.substr(0,vr.length-casas);
					  numero=vrteste.length;
			  		if(numero>0){
								comparador=5;
								var numero=0;
								while (numero<=vrteste.length){
									  if(numero==comparador){
												var anterior=numero-1;
												vrteste=vrteste.substr(0,vrteste.length-anterior)+"."+vrteste.substr(vrteste.length-anterior,vr.length);
												comparador=comparador+4;
									  }
									  numero++;
								}
								vr=vrteste+vr.substr(vr.length-casas,vr.length);
					  }
					  el.value=vr.substr(0,tammax);
				}
		}
}

function limpaCampoMonetario( element ) {
	let input = $( element );

	if( input.val() === "0,00" ) {
		input.val( "" );
	}
}

// formata valores de moedas, percentuais
function FormataValor3(campo,tammax,casas){
	if( typeof( campo )=="string" ){ var el = document.getElementById(campo); }else{ var el = campo; }
	var vr=el.value
  // var vrss=document.getElementById(campo).value
  while (vr.indexOf(".")>=0) {
	vr=vr.replace(".","");
  }
  while (vr.indexOf(",")>=0) {
	vr=vr.replace(",","");
  }
//  if(isNaN(vr)){
//	exibe_alerta("Foi Digitado uma Letra. Este campo aceita s� numeros com virgula ou ponto");
//	el.value=vr.substring(0,vr.length-1);
//  } else {
    if(vr.length<tammax){
	  if(vr.length>casas){
		vr=vr.substr(0,vr.length-casas)+","+vr.substr(vr.length-casas,vr.length);
		el.value=vr;
	  }
	  vrteste=vr.substr(0,vr.length-casas);
	  numero=vrteste.length;
	  if(numero>0){
		comparador=5;
		var numero=0;
		while (numero<=vrteste.length){
		  if(numero==comparador){
			var anterior=numero-1;
			vrteste=vrteste.substr(0,vrteste.length-anterior)+"."+vrteste.substr(vrteste.length-anterior,vr.length);
			comparador=comparador+4;
		  }
		  numero++;
		}
		vr=vrteste+vr.substr(vr.length-casas,vr.length);
	  }
	  el.value=vr.substr(0,tammax);
	}
  //}
}

// abre janelas poup-u
function MM_openBrWindow(theURL,winName,features) { //v2.0
  window.open(theURL,winName,features);
}

//saber qual browser �
String.prototype.contains = function(){
 var resu = false;
 for(var i=0; i < arguments.length; i++){
  if(this.toLowerCase().indexOf(arguments[i].toLowerCase()) > -1){
   resu = i + 1;
   break;
  }
 }
 return resu;
}

var _ua = navigator.userAgent;
var _vd = navigator.vendor;
var _pd = navigator.product;
var _browser_rv = ( _ua.indexOf('rv:') > -1 );
var _browser_op = ( _ua.indexOf('Opera') > -1 );
var _browser_ie = ( _ua.indexOf('MSIE') > -1 );
var _browser_pd = ( _pd == 'Gecko' );
var _browser_ff = ( _vd == 'Firefox' || ( _browser_pd && _ua.contains('Firefox','BonEcho','Paradiso') && ! _ua.contains('Flock')));
var _browser_fk = ( _browser_pd && _ua.contains('Flock') && ! _browser_ff );
var _browser_ns = ( _vd == 'Netscape' );

function isMozilla(){ // Mozilla Suite Browser
  return ( _browser_pd && _browser_rv && ! _browser_ff && ! _browser_ns && ! _browser_fk);
}

function isFirefox(){ // Mozilla Firefox
  return ( _browser_pd && ( _browser_ff || ! _browser_rv ) && ! _browser_fk);
}

function isFlock(){
  return ( _browser_pd && _browser_fk);
}

function isNetscape(){ // Netscape 6 or higher
  return( _browser_pd && _browser_ns ) ;
}

function isIE(){ // Internet Explorer
  return( _browser_ie && ! _browser_pd && ! _browser_op);
}

function isOpera(){ // Opera browser
  return( ! _browser_pd && _browser_op);
}

function otherBrowsers(){
  return( !isMozilla() && !isFirefox() && !isFlock() && !isNetscape() && !isIE() && !isOpera());
}

function verificanav(){
  if(isFirefox()){
    document.getElementById('navegador').value="firefox"
  } else {
	document.getElementById('navegador').value="ie"
  }
}

Number.prototype.formatMoney = function(c, d, t){ //Serve para formatar um number em formato dinheiro
var n = this, c = isNaN(c = Math.abs(c)) ? 2 : c, d = d == undefined ? "," : d, t = t == undefined ? "." : t,
i = parseInt(n = (+n || 0).toFixed(c)) + "", j = (j = i.length) > 3 ? j % 3 : 0;
return (j ? i.substr(0, j) + t : "") + i.substr(j).replace(/(\d{3})(?=\d)/g, "$1" + t)
+ (c ? d + (n - i).toFixed(c).slice(2) : "");
};

Number.prototype.formatMoneyy = function(c, d, t){ //Serve para formatar um number em formato dinheiro
var n = this, c = isNaN(c = Math.abs(c)) ? 4 : c, d = d == undefined ? "," : d, t = t == undefined ? "." : t,
i = parseInt(n = (+n || 0).toFixed(c)) + "", j = (j = i.length) > 3 ? j % 3 : 0;
return (j ? i.substr(0, j) + t : "") + i.substr(j).replace(/(\d{3})(?=\d)/g, "$1" + t)
+ (c ? d + (n - i).toFixed(c).slice(2) : "");
};


// valida cadastro de centro custo
function adm_cadctr(frmNome,url,destino ){
  var erro="N";
  if(document.getElementById('cta_descricao').value==""){
    exibe_alerta("Voc� precisa informar o nome da centro de custo.\n                         Campo obrigat�rio.");
	document.getElementById('cta_descricao').focus();
    erro="S";
	return false;
  }
  if(document.getElementById('cta_percentual').value!=""){
    f=document.getElementById(frmNome);
    for (i=0;i<f.elements.length;i++){
      if(f.elements[i].checked){
        if(f.elements[i].value=="N"){
		  exibe_alerta("Voc� precisa indicar S para percentual. Campo obrigat�rio.");
          erro="S";
	      return false;
		}
      }
	}
  }
  if(erro=="N"){enviaForm(frmNome,url,destino);}
}
